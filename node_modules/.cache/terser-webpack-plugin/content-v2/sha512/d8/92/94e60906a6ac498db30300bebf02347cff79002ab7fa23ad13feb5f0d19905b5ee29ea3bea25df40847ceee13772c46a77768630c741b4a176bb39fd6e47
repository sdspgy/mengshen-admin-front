{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-0a41432e\"],{3682:function(e,t,s){\"use strict\";var a=s(\"ae1a\"),r=s.n(a);r.a},aac9:function(e,t,s){\"use strict\";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"div\",[s(\"Button\",{attrs:{icon:e.icon},on:{click:function(t){e.userModalVisible=!0}}},[e._v(e._s(e.text))]),s(\"span\",{staticClass:\"clear\",on:{click:e.clearSelectData}},[e._v(\"清空已选\")]),s(\"Collapse\",{staticClass:\"collapse\",attrs:{simple:\"\"}},[s(\"Panel\",{attrs:{name:\"1\"}},[e._v(\"\\n      已选择\\n      \"),s(\"span\",{staticClass:\"select-count\"},[e._v(e._s(e.selectUsers.length))]),e._v(\" 人\\n      \"),s(\"p\",{attrs:{slot:\"content\"},slot:\"content\"},e._l(e.selectUsers,(function(t,a){return s(\"Tag\",{key:a,attrs:{name:t.id,color:\"default\",closable:\"\"},on:{\"on-close\":e.handleCancelUser}},[e._v(e._s(t.username))])})),1)])],1),s(\"Drawer\",{attrs:{title:\"选择用户\",closable:\"\",width:\"800\",draggable:\"\"},model:{value:e.userModalVisible,callback:function(t){e.userModalVisible=t},expression:\"userModalVisible\"}},[s(\"Form\",{ref:\"searchUserForm\",staticClass:\"search-form\",attrs:{model:e.searchUserForm,inline:\"\",\"label-width\":55}},[s(\"Form-item\",{attrs:{label:\"用户名\",prop:\"username\"}},[s(\"Input\",{staticStyle:{width:\"200px\"},attrs:{type:\"text\",clearable:\"\",placeholder:\"请输入用户名\"},model:{value:e.searchUserForm.username,callback:function(t){e.$set(e.searchUserForm,\"username\",t)},expression:\"searchUserForm.username\"}})],1),s(\"Form-item\",{staticClass:\"br\",staticStyle:{\"margin-left\":\"-35px\"}},[s(\"Button\",{attrs:{type:\"primary\",icon:\"ios-search\"},on:{click:e.handleSearchUser}},[e._v(\"搜索\")]),s(\"Button\",{on:{click:e.handleResetUser}},[e._v(\"重置\")])],1)],1),s(\"Table\",{ref:\"userTable\",attrs:{loading:e.userLoading,border:\"\",columns:e.userColumns,data:e.userData,height:e.height}}),s(\"Row\",{staticClass:\"code-row-bg page\",staticStyle:{margin:\"10px 0\"},attrs:{type:\"flex\",justify:\"end\"}},[s(\"Page\",{attrs:{current:e.searchUserForm.pageNumber,total:e.totalUser,\"page-size\":e.searchUserForm.pageSize,\"page-size-opts\":[10,20,50],size:\"small\",\"show-total\":\"\",\"show-elevator\":\"\",\"show-sizer\":\"\"},on:{\"on-change\":e.changeUserPage,\"on-page-size-change\":e.changeUserPageSize}})],1),s(\"div\",{staticClass:\"my-drawer-footer\"},[e._v(\"\\n      已选择\\n      \"),s(\"span\",{staticClass:\"select-count\"},[e._v(e._s(e.selectUsers.length))]),e._v(\" 人\\n      \"),s(\"Button\",{staticStyle:{\"margin-left\":\"10px\"},on:{click:e.clearSelectData}},[e._v(\"清空已选\")]),s(\"Button\",{staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"primary\"},on:{click:function(t){e.userModalVisible=!1}}},[e._v(\"关闭\")])],1)],1)],1)},r=[],i=s(\"365c\"),n={name:\"userChoose\",props:{text:{type:String,default:\"选择用户\"},icon:{type:String,default:\"md-person-add\"}},data:function(){var e=this;return{height:500,userLoading:!0,userModalVisible:!1,selectUsers:[],searchUserForm:{username:\"\",type:\"\",status:\"\",pageNumber:1,pageSize:10,sort:\"createTime\",order:\"desc\"},userColumns:[{type:\"index\",width:60,align:\"center\"},{title:\"用户名\",key:\"username\",width:145,sortable:!0},{title:\"头像\",key:\"avatar\",width:80,align:\"center\",render:function(e,t){return e(\"Avatar\",{props:{src:t.row.avatar}})}},{title:\"手机\",key:\"mobile\",width:115,sortable:!0},{title:\"邮箱\",key:\"email\",width:180,sortable:!0},{title:\"性别\",key:\"sex\",width:70,align:\"center\"},{title:\"用户类型\",key:\"type\",align:\"center\",width:100,render:function(e,t){var s=\"\";return 1==t.row.type?s=\"管理员\":0==t.row.type&&(s=\"普通用户\"),e(\"div\",s)}},{title:\"状态\",key:\"status\",align:\"center\",width:120,render:function(e,t){return 0==t.row.status?e(\"div\",[e(\"Badge\",{props:{status:\"success\",text:\"正常启用\"}})]):-1==t.row.status?e(\"div\",[e(\"Badge\",{props:{status:\"error\",text:\"禁用\"}})]):void 0}},{title:\"创建时间\",key:\"createTime\",sortable:!0,sortType:\"desc\",width:150},{title:\"操作\",key:\"action\",width:130,align:\"center\",fixed:\"right\",render:function(t,s){return t(\"div\",[t(\"Button\",{props:{type:\"info\",size:\"small\"},on:{click:function(){e.chooseUser(s.row)}}},\"添加该用户\")])}}],userData:[],totalUser:0}},methods:{changeUserPage:function(e){this.searchUserForm.pageNumber=e,this.getUserDataList()},changeUserPageSize:function(e){this.searchUserForm.pageSize=e,this.getUserDataList()},getUserDataList:function(){var e=this;this.userLoading=!0,Object(i[\"rb\"])(this.searchUserForm).then((function(t){e.userLoading=!1,t.success&&(e.data=t.result.records,e.total=t.result.total,(t.result.content||t.result.totalElements)&&(e.data=t.result.content,e.total=t.result.totalElements))}))},handleSearchUser:function(){this.searchUserForm.pageNumber=1,this.searchUserForm.pageSize=9,this.getUserDataList()},handleResetUser:function(){this.$refs.searchUserForm.resetFields(),this.searchUserForm.pageNumber=1,this.searchUserForm.pageSize=9,this.$refs.dep.clearSelect(),this.getUserDataList()},setData:function(e){this.selectUsers=e,this.$emit(\"on-change\",this.selectUsers)},chooseUser:function(e){var t=this,s=!0;if(this.selectUsers.forEach((function(a){e.id==a.id&&(t.$Message.warning(\"已经添加过啦，请勿重复选择\"),s=!1)})),s){var a={id:e.id,username:e.username};this.selectUsers.push(a),this.$emit(\"on-change\",this.selectUsers),this.$Message.success(\"添加用户 \".concat(e.username,\" 成功\"))}},clearSelectData:function(){this.selectUsers=[],this.$emit(\"on-change\",this.selectUsers)},handleCancelUser:function(e,t){var s=[];this.selectUsers.forEach((function(e){t!=e.id&&s.push(e)})),this.selectUsers=s,this.$emit(\"on-change\",this.selectUsers),this.$Message.success(\"删除所选用户成功\")}},created:function(){this.height=Number(document.documentElement.clientHeight-230),this.getUserDataList()}},c=n,o=(s(\"3682\"),s(\"2877\")),l=Object(o[\"a\"])(c,a,r,!1,null,null,null);t[\"default\"]=l.exports},ae1a:function(e,t,s){}}]);","extractedComments":[]}