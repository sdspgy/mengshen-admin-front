{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-2d2176dc\"],{c74f:function(t,e,i){\"use strict\";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i(\"div\",{staticClass:\"search\"},[i(\"Row\",[i(\"Button\",{on:{click:t.getNotices}},[t._v(\"查询\")]),i(\"Button\",{on:{click:t.openAddDialog}},[t._v(\"添加\")])],1),i(\"Row\",[i(\"Table\",{ref:\"table\",attrs:{loading:t.loading,border:\"\",columns:t.columns,data:t.notices}})],1),i(\"Row\",[i(\"Modal\",{attrs:{title:t.dialogFormTitle,\"mask-closable\":!1,width:\"50%\"},model:{value:t.dialogFormVisible,callback:function(e){t.dialogFormVisible=e},expression:\"dialogFormVisible\"}},[i(\"Form\",{attrs:{model:t.form,\"label-width\":120}},[i(\"FormItem\",{attrs:{label:\"公告起止时间\"}},[i(\"DatePicker\",{staticStyle:{width:\"50%\",\"max-width\":\"350px\"},attrs:{type:\"datetimerange\",format:\"yyyy-MM-dd HH:mm:ss\",placeholder:\"请选择时间日期\",options:t.disabledDate},model:{value:t.form.duration,callback:function(e){t.$set(t.form,\"duration\",e)},expression:\"form.duration\"}})],1),i(\"FormItem\",{attrs:{label:\"公告类型\"}},[i(\"Input\",{attrs:{autocomplete:\"off\",placeholder:\"请输入公告类型，最大输入6字\",maxlength:t.formTypeStrMaxlength},model:{value:t.form.typeStr,callback:function(e){t.$set(t.form,\"typeStr\",e)},expression:\"form.typeStr\"}})],1),i(\"FormItem\",{attrs:{label:\"标题\"}},[i(\"Input\",{attrs:{autocomplete:\"off\",placeholder:\"请输入标题，最大输入20字\",maxlength:t.formTitleMaxlength},model:{value:t.form.title,callback:function(e){t.$set(t.form,\"title\",e)},expression:\"form.title\"}})],1),i(\"FormItem\",{attrs:{label:\"跳转\"}},[i(\"Input\",{attrs:{autocomplete:\"off\",placeholder:\"请输入跳转\"},model:{value:t.form.frontSkipPos,callback:function(e){t.$set(t.form,\"frontSkipPos\",e)},expression:\"form.frontSkipPos\"}})],1),i(\"FormItem\",{attrs:{label:\"优先级\"}},[i(\"Input\",{attrs:{autocomplete:\"off\",placeholder:\"请输入优先级\"},model:{value:t.form.priority,callback:function(e){t.$set(t.form,\"priority\",e)},expression:\"form.priority\"}})],1),i(\"FormItem\",{staticStyle:{height:\"100px\"},attrs:{label:\"内容\"}},[i(\"Input\",{attrs:{autocomplete:\"off\",type:\"textarea\",placeholder:\"请输入公告内容\",autosize:{minRows:2,maxRows:5}},model:{value:t.form.content,callback:function(e){t.$set(t.form,\"content\",e)},expression:\"form.content\"}})],1),i(\"FormItem\",{attrs:{label:\"标题图片\"}},[i(\"Input\",{attrs:{autocomplete:\"off\",placeholder:\"请输入标题图片链接\"},model:{value:t.form.titleImg,callback:function(e){t.$set(t.form,\"titleImg\",e)},expression:\"form.titleImg\"}})],1),i(\"FormItem\",{attrs:{label:\"广告图片\"}},[i(\"Input\",{attrs:{autocomplete:\"off\",placeholder:\"请输入广告图片链接\"},model:{value:t.form.adImg,callback:function(e){t.$set(t.form,\"adImg\",e)},expression:\"form.adImg\"}})],1),i(\"FormItem\",{attrs:{label:\"跳转后界面图片\"}},[i(\"Input\",{attrs:{autocomplete:\"off\",placeholder:\"请输入跳转图片链接\"},model:{value:t.form.skipImg,callback:function(e){t.$set(t.form,\"skipImg\",e)},expression:\"form.skipImg\"}})],1)],1),i(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"Button\",{on:{click:function(e){return t.hideAddDialog()}}},[t._v(\"取 消\")]),i(\"Button\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.isEdit,expression:\"!isEdit\"}],attrs:{type:\"primary\"},on:{click:function(e){return t.addNotice()}}},[t._v(\"确定添加\")]),i(\"Button\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.isEdit,expression:\"isEdit\"}],attrs:{type:\"primary\"},on:{click:function(e){return t.editNotice()}}},[t._v(\"确定修改\")])],1)],1)],1),i(\"Row\",{staticClass:\"page\",attrs:{type:\"flex\",justify:\"end\"}},[i(\"Page\",{attrs:{current:t.page.cur_page,total:t.page.total,\"page-size\":t.page.per_page,\"page-size-opts\":[10,20,50],size:\"small\",\"show-total\":\"\",\"show-elevator\":\"\",\"show-sizer\":\"\"},on:{\"on-change\":t.changePage,\"on-page-size-change\":t.changePageSize}})],1)],1)},r=[],a=i(\"365c\"),n=i(\"c276\"),s={name:\"notice\",data:function(){var t=this;return{loading:!1,page:{per_page:10,cur_page:1,total:0},formTypeStrMaxlength:6,formTitleMaxlength:20,notices:[],columns:[{type:\"index\",width:60,align:\"center\"},{title:\"公告ID\",key:\"id\",width:80},{title:\"发布时间\",key:\"publishTime\",width:110,align:\"center\",render:function(t,e){return t(\"div\",n[\"a\"].Time2DefaultFormat(e.row.publishTime))}},{title:\"开始时间\",key:\"startTime\",width:110,align:\"center\",render:function(t,e){return t(\"div\",n[\"a\"].Time2DefaultFormat(e.row.startTime))}},{title:\"结束时间\",key:\"endTime\",width:110,align:\"center\",render:function(t,e){return t(\"div\",n[\"a\"].Time2DefaultFormat(e.row.endTime))}},{title:\"跳转\",key:\"frontSkipPos\",width:80,align:\"center\"},{title:\"跳转图片\",key:\"skipImg\",width:110,align:\"center\"},{title:\"标题\",key:\"title\",width:80,align:\"center\"},{title:\"公告类型\",key:\"typeStr\",width:100,align:\"center\"},{title:\"优先级\",key:\"priority\",width:100,align:\"center\"},{title:\"内容\",key:\"content\",width:200,align:\"center\"},{title:\"操作\",key:\"action\",width:200,align:\"center\",render:function(e,i){return e(\"div\",[e(\"Button\",{props:{type:\"info\",size:\"small\"},on:{click:function(){t.openEditDialog(i.row)}}},\"编辑\"),e(\"Button\",{props:{type:\"error\",size:\"small\"},on:{click:function(){t.deleteNotice(i.row.id)}}},\"删除\")])}}],dialogFormVisible:!1,dialogFormTitle:\"\",isEdit:!1,form:{id:-1,title:\"\",typeStr:\"\",priority:\"\",titleImg:\"\",adImg:\"\",duration:[],content:\"\",frontSkipPos:\"\",skipImg:\"\"},disabledDate:{disabledDate:function(t){return t.getTime()<new Date((new Date).toLocaleDateString()).getTime()}}}},methods:{init:function(){this.getNotices()},getNotices:function(){var t=this;Object(a[\"gb\"])(this.page).then((function(e){t.notices=e.data.notices,t.page.total=e.data.total}))},openAddDialog:function(){this.clearFrom(),this.dialogFormTitle=\"添加游戏公告\",this.isEdit=!1,this.dialogFormVisible=!0},hideAddDialog:function(){this.clearFrom(),this.dialogFormVisible=!1,this.getNotices()},openEditDialog:function(t){this.clearFrom(),this.dialogFormTitle=\"修改游戏公告\",this.isEdit=!0,this.form.id=t.id,this.dialogFormVisible=!0,this.form.title=t.title,this.form.typeStr=t.typeStr,this.form.priority=t.priority,this.form.titleImg=t.titleImg,this.form.adImg=t.adImg,this.form.duration.push(new Date(t.startTime)),this.form.duration.push(new Date(t.endTime)),this.form.content=t.content,this.form.frontSkipPos=t.frontSkipPos,this.form.skipImg=t.skipImg},clearFrom:function(){this.form.id=-1,this.form.title=\"\",this.form.typeStr=\"\",this.form.priority=\"\",this.form.titleImg=\"\",this.form.adImg=\"\",this.form.duration=[],this.form.content=\"\",this.form.frontSkipPos=\"\",this.form.skipImg=\"\"},checkFrom:function(){var t=this;return 2!==this.form.duration.length?(this.$Message.error(\"请选择时间\"),!1):this.form.title&&this.form.typeStr&&this.form.priority&&this.form.content&&this.form.frontSkipPos?this.form.title.length>20||this.form.typeStr.length>6?(this.$Message.error(\"长度过长\"),!1):(this.form.duration.forEach((function(e,i){t.form.duration[i]=e.getTime()})),!0):(this.$Message.error(\"参数异常\"),!1)},addNotice:function(){var t=this;this.checkFrom()&&Object(a[\"d\"])(this.form).then((function(e){t.hideAddDialog(),200===e.status&&t.$Message.success(\"添加成功\")}))},editNotice:function(){var t=this;Object(a[\"E\"])(this.form).then((function(e){t.hideAddDialog(),200===e.status&&t.$Message.success(\"修改成功\")}))},deleteNotice:function(t){var e=this;Object(a[\"u\"])({id:t}).then((function(t){200===t.status&&e.$Message.success(\"删除成功\"),e.getNotices()}))},changePage:function(t){this.page.cur_page=t,this.getNotices()},changePageSize:function(t){this.page.per_page=t,this.getNotices()}},mounted:function(){this.init()}},l=s,m=i(\"2877\"),c=Object(m[\"a\"])(l,o,r,!1,null,\"54beda1c\",null);e[\"default\"]=c.exports}}]);","extractedComments":[]}