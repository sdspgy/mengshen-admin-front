{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-ca00473a\",\"chunk-48da05d1\"],{dc3e:function(e,t,i){\"use strict\";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",[i(\"Upload\",{ref:\"upload\",attrs:{multiple:\"\",type:\"drag\",accept:\".jpg, .jpeg, .png, .gif, .bmp\",\"max-size\":5e3,\"before-upload\":e.handleUpload,action:\"#\"}},[i(\"div\",{staticStyle:{padding:\"20px 0\"}},[i(\"Icon\",{staticStyle:{color:\"#3399ff\"},attrs:{type:\"ios-cloud-upload\",size:\"52\"}}),i(\"p\",[e._v(\"点击或者拖拽到此次上传图片\")])],1)]),i(\"div\",e._l(e.fileList,(function(t,n){return i(\"ul\",{key:n,staticClass:\"file-list\"},[i(\"li\",[e._v(\"文件名: \"),i(\"span\",{staticStyle:{\"font-size\":\"15px\"}},[e._v(e._s(t.name)+\" \")]),i(\"Button\",{on:{click:function(t){return e.deleteFile(n)}}},[e._v(\"删除\")])],1)])})),0),i(\"Row\",e._l(e.types,(function(t,n){return i(\"Col\",{key:n,staticStyle:{float:\"left\",margin:\"10px\"}},[i(\"Button\",{attrs:{type:\"primary\"},on:{click:function(i){return e.upload(t.type)}}},[e._v(\"上传\"+e._s(t.name)+\"图片\")])],1)})),1),i(\"h2\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.succesList.length>0,expression:\"succesList.length>0\"}]},[e._v(\"成功信息\")]),e._l(e.succesList,(function(t,n){return i(\"ul\",{key:n,staticClass:\"file-list\"},[i(\"li\",[i(\"span\",{staticStyle:{\"font-size\":\"15px\"}},[e._v(e._s(t))])])])})),i(\"h2\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.errorList.length>0,expression:\"errorList.length>0\"}]},[e._v(\"错误信息\")]),e._l(e.errorList,(function(t,n){return i(\"ul\",{key:n,staticClass:\"file-list\"},[i(\"li\",[i(\"span\",{staticStyle:{\"font-size\":\"15px\"}},[e._v(e._s(t))])])])}))],2)},a=[],s=i(\"e463\"),l=i(\"365c\"),o={name:\"uploadImg\",components:{uploadPicInput:s[\"default\"]},data:function(){return{fileList:[],errorList:[],succesList:[],types:[]}},methods:{getUploadImgConfig:function(){var e=this;Object(l[\"pb\"])().then((function(t){e.types=[],t.result.forEach((function(t){e.types.push({type:t.split(\",\")[0],name:t.split(\",\")[1]})}))}))},handleUpload:function(e){return this.fileList.push(e),!1},upload:function(e){var t=this;if(console.log(\">>>>\",this.fileList),0!=this.fileList.length){for(var i=new FormData,n=0;n<this.fileList.length;n++)i.append(\"file\",this.fileList[n]);i.append(\"type\",e),Object(l[\"Rb\"])(i).then((function(e){200===e.code&&(t.fileList=[],t.$Message.info(\"上传成功\"),t.succesList=e.result.succ,t.errorList=e.result.error)}))}else this.$Message.error(\"未选择文件！\")},deleteFile:function(e){this.fileList.splice(e,1)}},mounted:function(){this.getUploadImgConfig()}},r=o,c=i(\"2877\"),u=Object(c[\"a\"])(r,n,a,!1,null,\"7eacccc3\",null);t[\"default\"]=u.exports},e463:function(e,t,i){\"use strict\";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticStyle:{display:\"flex\"}},[i(\"Upload\",{ref:\"up\",staticClass:\"upload\",attrs:{action:e.uploadFileUrl,headers:e.accessToken,\"on-success\":e.handleSuccess,\"on-error\":e.handleError,format:[\"jpg\",\"jpeg\",\"png\",\"gif\",\"bmp\"],accept:\".jpg, .jpeg, .png, .gif, .bmp\",\"max-size\":5120,\"on-format-error\":e.handleFormatError,\"on-exceeded-size\":e.handleMaxSize,\"before-upload\":e.beforeUpload,\"show-upload-list\":!1}},[i(\"Button\",{attrs:{loading:e.loading,size:e.size,disabled:e.disabled,icon:e.icon}},[e._v(\"上传图片\")])],1),i(\"Poptip\",{attrs:{trigger:\"hover\",title:\"图片预览\",placement:\"right-start\",width:\"350\"}},[i(\"Input\",{attrs:{placeholder:e.placeholder,size:e.size,disabled:e.disabled,readonly:e.readonly,maxlength:e.maxlength,clearable:\"\"},on:{\"on-change\":e.handleChange},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:\"currentValue\"}}),i(\"div\",{attrs:{slot:\"content\"},slot:\"content\"},[i(\"img\",{staticStyle:{width:\"100%\",margin:\"auto\",display:\"block\"},attrs:{src:e.currentValue,alt:\"无效的图片链接\"}}),i(\"a\",{staticStyle:{\"margin-top\":\"5px\",\"text-align\":\"right\",display:\"block\"},on:{click:function(t){e.viewImage=!0}}},[e._v(\"查看大图\")])])],1),i(\"Modal\",{attrs:{title:\"图片预览\",styles:{top:\"30px\"},draggable:\"\"},model:{value:e.viewImage,callback:function(t){e.viewImage=t},expression:\"viewImage\"}},[i(\"img\",{staticStyle:{width:\"100%\",margin:\"0 auto\",display:\"block\"},attrs:{src:e.currentValue,alt:\"无效的图片链接\"}}),i(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"Button\",{on:{click:function(t){e.viewImage=!1}}},[e._v(\"关闭\")])],1)])],1)},a=[],s=i(\"365c\"),l={name:\"uploadPicInput\",props:{value:String,size:String,placeholder:{type:String,default:\"可输入图片链接\"},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},maxlength:Number,icon:{type:String,default:\"ios-cloud-upload-outline\"}},data:function(){return{accessToken:{},currentValue:this.value,loading:!1,viewImage:!1,uploadFileUrl:s[\"Qb\"]}},methods:{init:function(){this.accessToken={accessToken:this.getStore(\"accessToken\")}},handleFormatError:function(e){this.loading=!1,this.$Notice.warning({title:\"不支持的文件格式\",desc:\"所选文件‘ \"+e.name+\" ’格式不正确, 请选择 .jpg .jpeg .png .gif .bmp格式文件\"})},handleMaxSize:function(e){this.loading=!1,this.$Notice.warning({title:\"文件大小过大\",desc:\"所选文件‘ \"+e.name+\" ’大小过大, 不得超过 5M.\"})},beforeUpload:function(){return this.loading=!0,!0},handleSuccess:function(e,t){this.loading=!1,e.success?(t.url=e.result,this.currentValue=e.result,this.$emit(\"input\",this.currentValue),this.$emit(\"on-change\",this.currentValue)):this.$Message.error(e.message)},handleError:function(e,t,i){this.loading=!1,this.$Message.error(e.toString())},handleChange:function(e){this.$emit(\"input\",this.currentValue),this.$emit(\"on-change\",this.currentValue)},setCurrentValue:function(e){e!==this.currentValue&&(this.currentValue=e,this.$emit(\"on-change\",this.currentValue))}},watch:{value:function(e){this.setCurrentValue(e)}},created:function(){this.init()}},o=l,r=(i(\"fb9f\"),i(\"2877\")),c=Object(r[\"a\"])(o,n,a,!1,null,null,null);t[\"default\"]=c.exports},f59e:function(e,t,i){},fb9f:function(e,t,i){\"use strict\";var n=i(\"f59e\"),a=i.n(n);a.a}}]);","extractedComments":[]}