{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-83941706\"],{\"77d4\":function(e,t,i){\"use strict\";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",[i(\"Divider\",[e._v(\"JSON上传\")]),i(\"Upload\",{ref:\"upload\",attrs:{multiple:\"\",type:\"drag\",accept:\".json, .JSON\",\"max-size\":5e3,\"before-upload\":e.handleUpload,action:\"#\"}},[i(\"div\",{staticStyle:{padding:\"20px 0\"}},[i(\"Icon\",{staticStyle:{color:\"#3399ff\"},attrs:{type:\"ios-cloud-upload\",size:\"52\"}}),i(\"p\",[e._v(\"点击或者拖拽到此次上传文件\")])],1)]),i(\"div\",e._l(e.fileList,(function(t,s){return i(\"ul\",{key:s,staticClass:\"file-list\"},[i(\"li\",[e._v(\"文件名: \"),i(\"span\",{staticStyle:{\"font-size\":\"15px\"}},[e._v(e._s(t.name)+\" \")]),i(\"Button\",{on:{click:function(t){return e.deleteFile(s)}}},[e._v(\"删除\")])],1)])})),0),this.$route.meta.permTypes.includes(\"upload\")?i(\"Button\",{attrs:{type:\"primary\"},on:{click:e.upload}},[e._v(\"上传\")]):i(\"Button\",{attrs:{type:\"primary\",disabled:\"\"},on:{click:e.upload}},[e._v(\"上传\")]),i(\"h2\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.succesList.length>0,expression:\"succesList.length>0\"}]},[e._v(\"成功信息\")]),e._l(e.succesList,(function(t,s){return i(\"ul\",{key:s,staticClass:\"file-list\"},[i(\"li\",[i(\"span\",{staticStyle:{\"font-size\":\"15px\"}},[e._v(e._s(t))])])])})),i(\"h2\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.errorList.length>0,expression:\"errorList.length>0\"}]},[e._v(\"错误信息\")]),e._l(e.errorList,(function(t,s){return i(\"ul\",{key:s,staticClass:\"file-list\"},[i(\"li\",[i(\"span\",{staticStyle:{\"font-size\":\"15px\"}},[e._v(e._s(t))])])])})),i(\"Divider\",[e._v(\"查看服务器JSON\")]),i(\"Input\",{staticStyle:{width:\"200px\"},attrs:{type:\"text\",clearable:\"\",placeholder:\"请输入文件名 xxx.json\"},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:\"fileName\"}}),i(\"Button\",{on:{click:e.openDialog}},[e._v(\"查看服务器JSON\")]),i(\"Modal\",{attrs:{title:\"服务器JSON\",\"mask-closable\":!1,width:\"1000\"},model:{value:e.dialogFormVisible,callback:function(t){e.dialogFormVisible=t},expression:\"dialogFormVisible\"}},[i(\"Button\",{on:{click:function(t){return e.clickCopyPre()}}},[e._v(\"点击复制\")]),i(\"br\"),i(\"pre\",{attrs:{id:\"copyPre\"}},[e._v(\"      \"+e._s(e.jsonStr)+\"\\n    \")]),i(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"Button\",{on:{click:function(t){return e.hideDialog()}}},[e._v(\"取 消\")])],1)],1),i(\"Divider\",[e._v(\"服务器列表\")]),i(\"Row\",{directives:[{name:\"show\",rawName:\"v-show\",value:this.$route.meta.permTypes.includes(\"other\"),expression:\"this.$route.meta.permTypes.includes('other')\"}]},[i(\"Table\",{ref:\"table\",attrs:{border:\"\",columns:e.columns,data:e.serverList}}),i(\"Button\",{attrs:{type:\"info\",loading:e.loading},on:{click:function(t){return e.loadRemoteConfig()}}},[e._v(\"加载远程配置\")])],1)],2)},n=[],o=i(\"365c\"),r={name:\"uploadJson\",data:function(){var e=this;return{fileList:[],errorList:[],succesList:[],serverList:[],isShow:!0,loading:!1,fileName:\"\",jsonStr:\"\",jsonStrFormat:\"\",dialogFormVisible:!1,columns:[{type:\"index\",width:60,align:\"center\"},{title:\"服务器名称\",key:\"name\",align:\"center\",width:150},{title:\"服务器地址\",key:\"address\",align:\"center\",width:150},{title:\"端口\",key:\"port\",align:\"center\",width:100},{title:\"请求url\",key:\"requestUrl\",align:\"center\",width:200},{title:\"加载状态\",key:\"success\",align:\"center\",width:100,render:function(t,i){return e.isShow?t(\"div\",i.row.success):\"\"}},{title:\"加载远程配置返回信息\",key:\"msg\",align:\"center\",width:300}]}},methods:{init:function(){this.getServerList()},handleUpload:function(e){return this.fileList.push(e),!1},upload:function(){var e=this;if(console.log(\">>>>\",this.fileList),0!=this.fileList.length){for(var t=new FormData,i=0;i<this.fileList.length;i++)t.append(\"file\",this.fileList[i]);Object(o[\"Sb\"])(t).then((function(t){200===t.status?(e.fileList=[],e.$Message.success(\"上传成功\"),e.succesList=t.data.succ,e.errorList=t.data.error):e.$Message.error(t.data)}))}else this.$Message.error(\"未选择文件！\")},deleteFile:function(e){this.fileList.splice(e,1)},getServerList:function(){var e=this;this.$route.meta.permTypes.includes(\"other\")&&Object(o[\"cb\"])().then((function(t){t.success&&(e.isShow=!1,e.serverList=t.result)}))},loadRemoteConfig:function(){var e=this;this.loading=!0,Object(o[\"tb\"])().then((function(t){e.loading=!1,e.serverList=t.result}))},openDialog:function(){this.getJsonByName()},hideDialog:function(){this.dialogFormVisible=!1},getJsonByName:function(){var e=this;this.jsonStr=\"\",Object(o[\"bb\"])({fileName:this.fileName}).then((function(t){200===t.status&&(t.data.error?(e.hideDialog(),e.$Message.error(t.data.error)):(e.dialogFormVisible=!0,e.jsonStr=t.data.jsonStr))}))},clickCopyPre:function(){var e=document.getElementById(\"copyPre\");if(document.body.createTextRange){var t=document.body.createTextRange();t.moveToElementText(e),t.select()}else if(window.getSelection){var i=window.getSelection();t=document.createRange();t.selectNodeContents(e),i.removeAllRanges(),i.addRange(t)}else console.warn(\"none\");document.execCommand(\"Copy\"),this.$Message.success(\"复制成功\")}},mounted:function(){this.init()}},a=r,l=(i(\"cf99\"),i(\"2877\")),c=Object(l[\"a\"])(a,s,n,!1,null,\"1aa6fb69\",null);t[\"default\"]=c.exports},a868:function(e,t,i){},cf99:function(e,t,i){\"use strict\";var s=i(\"a868\"),n=i.n(s);n.a}}]);","extractedComments":[]}