{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-2d0c1f47\"],{\"47f4\":function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"Form\",{ref:\"creativeForm\",staticClass:\"search-form\",attrs:{model:e.searchForm,inline:\"\",\"label-width\":70}},[a(\"Form-item\",{attrs:{label:\"游戏ID\",prop:\"gameid\"}},[a(\"Select\",{staticStyle:{width:\"200px\"},model:{value:e.searchForm.gameid,callback:function(t){e.$set(e.searchForm,\"gameid\",t)},expression:\"searchForm.gameid\"}},e._l(e.games,(function(t){return a(\"Option\",{key:t.gameid,attrs:{value:t.gameid}},[e._v(e._s(t.name))])})),1)],1),a(\"Form-item\",{attrs:{label:\"广告码\",prop:\"advertName\"}},[a(\"Input\",{staticStyle:{width:\"200px\"},attrs:{type:\"text\",clearable:\"\",placeholder:\"请输入广告码\"},model:{value:e.searchForm.advertName,callback:function(t){e.$set(e.searchForm,\"advertName\",t)},expression:\"searchForm.advertName\"}})],1)],1),a(\"Button\",{attrs:{type:\"primary\",icon:\"ios-search\"},on:{click:e.handleSearch}},[e._v(\"搜索\")]),a(\"Button\",{directives:[{name:\"show\",rawName:\"v-show\",value:this.$route.meta.permTypes.includes(\"add\"),expression:\"this.$route.meta.permTypes.includes('add')\"}],staticStyle:{margin:\"10px 10px\"},attrs:{type:\"primary\",icon:\"md-add\"},on:{click:e.add}},[e._v(\"添加广告\\n    \")]),a(\"Row\",[a(\"Table\",{ref:\"table\",attrs:{loading:e.loading,border:\"\",columns:e.columns,data:e.data,sortable:\"custom\"}})],1),a(\"Row\",{staticClass:\"page\",attrs:{type:\"flex\",justify:\"end\"}},[a(\"Page\",{attrs:{current:e.searchForm.pageNumber,total:e.total,\"page-size\":e.searchForm.pageSize,\"page-size-opts\":[10,20,50],size:\"small\",\"show-total\":\"\",\"show-elevator\":\"\",\"show-sizer\":\"\"},on:{\"on-change\":e.changePage,\"on-page-size-change\":e.changePageSize}})],1),a(\"Modal\",{attrs:{title:e.modalTitle,\"mask-closable\":!1,width:500},model:{value:e.advertModalVisible,callback:function(t){e.advertModalVisible=t},expression:\"advertModalVisible\"}},[a(\"Form\",{ref:\"advertForm\",attrs:{model:e.advertForm,\"label-width\":80,rules:e.advertFormValidate}},[a(\"FormItem\",{attrs:{label:\"游戏名称\",prop:\"gameid\"}},[a(\"Select\",{staticStyle:{width:\"200px\"},model:{value:e.advertForm.gameid,callback:function(t){e.$set(e.advertForm,\"gameid\",t)},expression:\"advertForm.gameid\"}},e._l(e.games,(function(t){return a(\"Option\",{key:t.gameid,attrs:{value:t.gameid}},[e._v(e._s(t.name))])})),1)],1),a(\"FormItem\",{attrs:{label:\"广告名称\",prop:\"advertName\",error:e.errorAdvertName}},[a(\"Input\",{model:{value:e.advertForm.advertName,callback:function(t){e.$set(e.advertForm,\"advertName\",t)},expression:\"advertForm.advertName\"}})],1)],1),a(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"Button\",{attrs:{type:\"text\"},on:{click:e.cancelAdvert}},[e._v(\"取消\")]),a(\"Button\",{attrs:{type:\"primary\",loading:e.submitLoading},on:{click:e.submitAdvert}},[e._v(\"提交\")])],1)],1)],1)},i=[],s=a(\"365c\"),d={name:\"advert\",comments:{},data:function(){var e=this;return{columns:[{type:\"selection\",width:60,align:\"center\",fixed:\"left\"},{type:\"index\",width:60,align:\"center\",fixed:\"left\"},{title:\"游戏ID\",key:\"gameid\",width:150},{title:\"广告ID\",key:\"advertid\",width:150},{title:\"广告名称\",key:\"advertName\",width:150},{title:\"操作\",key:\"action\",width:200,align:\"center\",render:function(t,a){var r=t(\"Button\",{props:{type:\"primary\",size:\"small\",disabled:!e.$route.meta.permTypes.includes(\"edit\")},style:{marginRight:\"5px\"},on:{click:function(){e.edit(a.row)}}},\"编辑\"),i=t(\"Button\",{props:{type:\"error\",size:\"small\",disabled:!e.$route.meta.permTypes.includes(\"delete\")},on:{click:function(){e.remove(a.row)}}},\"删除\");return t(\"div\",[r,i])}}],data:[],searchForm:{gameid:\"\",advertName:\"\",pageNumber:1,pageSize:10},total:0,submitLoading:!1,advertModalVisible:!1,advertForm:{id:\"\",gameid:\"\",advertid:\"\",advertName:\"\"},games:[]}},methods:{init:function(){this.queryAllAdvert()},handleSearch:function(){this.queryAllAdvert()},queryAllAdvert:function(){var e=this;Object(s[\"zb\"])(this.searchForm).then((function(t){t.success&&(e.data=t.result[1].records,e.games=t.result[0].records,e.total=t.result.total)}))},changePage:function(e){this.searchForm.pageNumber=e,this.queryAllAdvert(),this.clearSelectAll()},changePageSize:function(e){this.searchForm.pageSize=e,this.queryAllAdvert()},clearSelectAll:function(){this.$refs.table.selectAll(!1)},submitAdvert:function(){var e=this;this.$refs.advertForm.validate((function(t){if(t)if(0==e.modalType){if(delete e.advertForm.id,\"\"==e.advertForm.advertName||void 0==e.advertForm.advertName)return void(e.errorAdvertName=\"广告名称不能为空\");e.submitLoading=!0,Object(s[\"a\"])({gameid:e.advertForm.gameid,advertid:e.advertForm.advertid,advertName:e.advertForm.advertName}).then((function(t){e.submitLoading=!1,t.success&&(e.$Message.success(\"操作成功\"),e.queryAllAdvert(),e.advertModalVisible=!1)}))}else e.submitLoading=!0,Object(s[\"D\"])({id:e.advertForm.id,gameid:e.advertForm.gameid,advertid:e.advertForm.advertid,advertName:e.advertForm.advertName}).then((function(t){e.submitLoading=!1,t.success&&(e.$Message.success(\"操作成功\"),e.queryAllAdvert(),e.advertModalVisible=!1)}))}))},cancelAdvert:function(){this.advertModalVisible=!1},add:function(){this.modalType=0,this.modalTitle=\"添加广告\",this.$refs.advertForm.resetFields(),this.advertModalVisible=!0},edit:function(e){for(var t in this.modalType=1,this.modalTitle=\"编辑广告\",this.$refs.advertForm.resetFields(),e)null==e[t]&&(e[t]=\"\");var a=JSON.stringify(e),r=JSON.parse(a);this.advertForm=r,this.advertModalVisible=!0},remove:function(e){var t=this;this.$Modal.confirm({title:\"确认删除\",content:\"您确认要删除广告名为： \"+e.advertName+\"?\",loading:!0,onOk:function(){Object(s[\"p\"])(e.id).then((function(e){t.$Modal.remove(),e.success&&(t.$Message.success(\"删除成功\"),t.queryAllAdvert())}))}})}},mounted:function(){this.init()}},o=d,l=a(\"2877\"),n=Object(l[\"a\"])(o,r,i,!1,null,\"2070e892\",null);t[\"default\"]=n.exports}}]);","extractedComments":[]}