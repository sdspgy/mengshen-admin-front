{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/thread-loader/dist/cjs.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/creative/creative.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/creative/creative.vue","mtime":1575948010268},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { queryAllCreativeReq, addCreative, editCreative, deleteCreative } from '@/api/index';\nexport default {\n  name: 'gameCreative',\n  comments: {},\n  data: function data() {\n    var _this = this;\n\n    return {\n      columns: [{\n        type: 'selection',\n        width: 60,\n        align: 'center',\n        fixed: 'left'\n      }, // {\n      // \ttype: 'expand',\n      // \twidth: 50,\n      // \tfixed: 'left',\n      // \trender: (h, params) => {\n      // \t\treturn h(expandRow, {\n      // \t\t\tprops: {\n      // \t\t\t\trow: params.row\n      // \t\t\t}\n      // \t\t});\n      // \t}\n      // },\n      {\n        type: 'index',\n        width: 60,\n        align: 'center',\n        fixed: 'left'\n      }, {\n        title: '游戏ID',\n        key: 'gameid',\n        width: 150 // sortable: true,\n        // fixed: 'left'\n\n      }, {\n        title: '渠道码',\n        key: 'creativeid',\n        width: 150 // sortable: true\n\n      }, {\n        title: '渠道名称',\n        key: 'creativeName',\n        width: 150 // sortable: true\n\n      }, // {\n      // \ttitle: '创建时间',\n      // \tkey: 'createTime',\n      // \tsortable: true,\n      // \tsortType: 'desc',\n      // \twidth: 150\n      // },\n      {\n        title: '操作',\n        key: 'action',\n        width: 200,\n        align: 'center',\n        // fixed: 'right',\n        render: function render(h, params) {\n          var enableOrDisable = '';\n          var editButton = h('Button', {\n            props: {\n              type: 'primary',\n              size: 'small',\n              disabled: !_this.$route.meta.permTypes.includes('edit')\n            },\n            style: {\n              marginRight: '5px'\n            },\n            on: {\n              click: function click() {\n                _this.edit(params.row);\n              }\n            }\n          }, '编辑');\n          var deleteButton = h('Button', {\n            props: {\n              type: 'error',\n              size: 'small',\n              disabled: !_this.$route.meta.permTypes.includes('delete')\n            },\n            on: {\n              click: function click() {\n                _this.remove(params.row);\n              }\n            }\n          }, '删除');\n          return h('div', [editButton, deleteButton]);\n        }\n      }],\n      data: [],\n      searchForm: {\n        gameid: '',\n        creativeid: '',\n        pageNumber: 1,\n        pageSize: 10\n      },\n      total: 0,\n      submitLoading: false,\n      creativeModalVisible: false,\n      creativeForm: {\n        id: '',\n        gameid: '',\n        creativeid: '',\n        creativeName: ''\n      },\n      games: []\n    };\n  },\n  methods: {\n    init: function init() {\n      this.queryAllCreative();\n    },\n    handleSearch: function handleSearch() {\n      this.queryAllCreative();\n    },\n    queryAllCreative: function queryAllCreative() {\n      var _this2 = this;\n\n      queryAllCreativeReq(this.searchForm).then(function (res) {\n        // this.loading = false;\n        if (res.success) {\n          _this2.data = res.result[1].records;\n          _this2.games = res.result[0].records;\n          _this2.total = res.result.total;\n        }\n      });\n    },\n    changePage: function changePage(v) {\n      this.searchForm.pageNumber = v;\n      this.queryAllCreative();\n      this.clearSelectAll();\n    },\n    changePageSize: function changePageSize(v) {\n      this.searchForm.pageSize = v;\n      this.queryAllCreative();\n    },\n    clearSelectAll: function clearSelectAll() {\n      this.$refs.table.selectAll(false);\n    },\n    submitCreative: function submitCreative() {\n      var _this3 = this;\n\n      this.$refs.creativeForm.validate(function (valid) {\n        if (valid) {\n          if (_this3.modalType == 0) {\n            // 添加 避免编辑后传入id\n            delete _this3.creativeForm.id;\n\n            if (_this3.creativeForm.creativeid == '' || _this3.creativeForm.creativeid == undefined) {\n              _this3.errorCreativeid = '渠道码不能为空';\n              return;\n            }\n\n            if (_this3.creativeForm.creativeName == '' || _this3.creativeForm.creativeName == undefined) {\n              _this3.errorCreativeName = '渠道名称不能为空';\n              return;\n            }\n\n            _this3.submitLoading = true;\n            addCreative({\n              gameid: _this3.creativeForm.gameid,\n              creativeid: _this3.creativeForm.creativeid,\n              creativeName: _this3.creativeForm.creativeName\n            }).then(function (res) {\n              _this3.submitLoading = false;\n\n              if (res.success) {\n                _this3.$Message.success('操作成功');\n\n                _this3.queryAllCreative();\n\n                _this3.creativeModalVisible = false;\n              }\n            });\n          } else {\n            // 编辑\n            _this3.submitLoading = true;\n            editCreative({\n              id: _this3.creativeForm.id,\n              gameid: _this3.creativeForm.gameid,\n              creativeid: _this3.creativeForm.creativeid,\n              creativeName: _this3.creativeForm.creativeName\n            }).then(function (res) {\n              _this3.submitLoading = false;\n\n              if (res.success) {\n                _this3.$Message.success('操作成功');\n\n                _this3.queryAllCreative();\n\n                _this3.creativeModalVisible = false;\n              }\n            });\n          }\n        }\n      });\n    },\n    cancelCreative: function cancelCreative() {\n      this.creativeModalVisible = false;\n    },\n    add: function add() {\n      this.modalType = 0;\n      this.modalTitle = '添加渠道';\n      this.$refs.creativeForm.resetFields();\n      this.creativeModalVisible = true;\n    },\n    edit: function edit(v) {\n      this.modalType = 1;\n      this.modalTitle = '编辑渠道';\n      this.$refs.creativeForm.resetFields(); // 转换null为\"\"\n\n      for (var attr in v) {\n        if (v[attr] == null) {\n          v[attr] = '';\n        }\n      }\n\n      var str = JSON.stringify(v);\n      var data = JSON.parse(str);\n      this.creativeForm = data;\n      this.creativeModalVisible = true;\n    },\n    remove: function remove(v) {\n      var _this4 = this;\n\n      this.$Modal.confirm({\n        title: '确认删除',\n        content: '您确认要删除渠道名为： ' + v.creativeName + '?',\n        loading: true,\n        onOk: function onOk() {\n          deleteCreative(v.id).then(function (res) {\n            _this4.$Modal.remove();\n\n            if (res.success) {\n              _this4.$Message.success('删除成功');\n\n              _this4.queryAllCreative();\n            }\n          });\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.init();\n  }\n};",null]}