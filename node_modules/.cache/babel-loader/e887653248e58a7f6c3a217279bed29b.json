{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/upload-img/uploadImg.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/upload-img/uploadImg.vue","mtime":1574132205000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport uploadPicInput from \"../../my-components/rbac/upload-pic-input\";\nimport { getUploadImgConfig as _getUploadImgConfig, uploadImg } from \"@/api/index\";\nexport default {\n  name: \"uploadImg\",\n  components: {\n    uploadPicInput: uploadPicInput\n  },\n  data: function data() {\n    return {\n      fileList: [],\n      errorList: [],\n      succesList: [],\n      types: []\n    };\n  },\n  methods: {\n    getUploadImgConfig: function getUploadImgConfig() {\n      var _this = this;\n\n      _getUploadImgConfig().then(function (res) {\n        _this.types = [];\n        res.result.forEach(function (obj) {\n          _this.types.push({\n            type: obj.split(\",\")[0],\n            name: obj.split(\",\")[1]\n          });\n        });\n      });\n    },\n    handleUpload: function handleUpload(file) {\n      this.fileList.push(file);\n      return false;\n    },\n    upload: function upload(type) {\n      var _this2 = this;\n\n      console.log('>>>>', this.fileList);\n\n      if (this.fileList.length == 0) {\n        this.$Message.error('未选择文件！');\n        return;\n      }\n\n      var formData = new FormData();\n\n      for (var i = 0; i < this.fileList.length; i++) {\n        formData.append(\"file\", this.fileList[i]);\n      }\n\n      formData.append(\"type\", type);\n      uploadImg(formData).then(function (res) {\n        debugger;\n\n        if (res.code === 200) {\n          _this2.fileList = [];\n\n          _this2.$Message.info('上传成功');\n\n          _this2.succesList = res.result.succ;\n          _this2.errorList = res.result.error;\n        }\n      });\n    },\n    deleteFile: function deleteFile(index) {\n      this.fileList.splice(index, 1);\n    }\n  },\n  mounted: function mounted() {\n    this.getUploadImgConfig();\n  }\n};",{"version":3,"sources":["uploadImg.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA,OAAA,cAAA,MAAA,2CAAA;AACA,SAAA,kBAAA,IAAA,mBAAA,EAAA,SAAA,QAAA,aAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,cAAA,EAAA;AADA,GAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,SAAA,EAAA,EAFA;AAGA,MAAA,UAAA,EAAA,EAHA;AAIA,MAAA,KAAA,EAAA;AAJA,KAAA;AAMA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,kBADA,gCACA;AAAA;;AACA,MAAA,mBAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,KAAA,GAAA,EAAA;AACA,QAAA,GAAA,CAAA,MAAA,CAAA,OAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AAAA,YAAA,IAAA,EAAA,GAAA,CAAA,KAAA,CAAA,GAAA,EAAA,CAAA,CAAA;AAAA,YAAA,IAAA,EAAA,GAAA,CAAA,KAAA,CAAA,GAAA,EAAA,CAAA;AAAA,WAAA;AACA,SAFA;AAGA,OALA;AAMA,KARA;AASA,IAAA,YATA,wBASA,IATA,EASA;AACA,WAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,aAAA,KAAA;AACA,KAZA;AAaA,IAAA,MAbA,kBAaA,IAbA,EAaA;AAAA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,MAAA,EAAA,KAAA,QAAA;;AACA,UAAA,KAAA,QAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,QAAA;AACA;AACA;;AACA,UAAA,QAAA,GAAA,IAAA,QAAA,EAAA;;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,QAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,QAAA,QAAA,CAAA,MAAA,CAAA,MAAA,EAAA,KAAA,QAAA,CAAA,CAAA,CAAA;AACA;;AACA,MAAA,QAAA,CAAA,MAAA,CAAA,MAAA,EAAA,IAAA;AACA,MAAA,SAAA,CAAA,QAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA;;AACA,YAAA,GAAA,CAAA,IAAA,KAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,GAAA,EAAA;;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,IAAA,CAAA,MAAA;;AACA,UAAA,MAAA,CAAA,UAAA,GAAA,GAAA,CAAA,MAAA,CAAA,IAAA;AACA,UAAA,MAAA,CAAA,SAAA,GAAA,GAAA,CAAA,MAAA,CAAA,KAAA;AACA;AACA,OARA;AASA,KAjCA;AAkCA,IAAA,UAlCA,sBAkCA,KAlCA,EAkCA;AACA,WAAA,QAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AACA;AApCA,GAbA;AAmDA,EAAA,OAnDA,qBAmDA;AACA,SAAA,kBAAA;AACA;AArDA,CAAA","sourcesContent":["<template>\n  <div>\n    <Upload\n            multiple\n            ref=\"upload\"\n            type=\"drag\"\n            accept=\".jpg, .jpeg, .png, .gif, .bmp\"\n            :max-size=\"5000\"\n            :before-upload=\"handleUpload\"\n            action=\"#\"\n    >\n      <div style=\"padding: 20px 0\">\n        <Icon type=\"ios-cloud-upload\" size=\"52\" style=\"color: #3399ff\"></Icon>\n        <p>点击或者拖拽到此次上传图片</p>\n      </div>\n    </Upload>\n    <div>\n      <ul class=\"file-list\" v-for=\"(file,index) in fileList\" :key=\"index\">\n        <li>文件名: <span style=\"font-size:15px;\">{{ file.name }} </span> <Button @click=\"deleteFile(index)\">删除</Button></li>\n      </ul>\n    </div>\n    <Row>\n      <Col v-for=\"(item, i) in types\" :key=\"i\" style=\"float: left;margin: 10px\">\n        <Button type=\"primary\"  @click=\"upload(item.type)\">上传{{item.name}}图片</Button>\n      </Col>\n    </Row>\n\n    <h2 v-show=\"succesList.length>0\">成功信息</h2>\n    <ul class=\"file-list\" v-for=\"(item,index) in succesList\" :key=\"index\">\n      <li><span style=\"font-size:15px;\">{{ item }}</span></li>\n    </ul>\n    <h2 v-show=\"errorList.length>0\">错误信息</h2>\n    <ul class=\"file-list\" v-for=\"(item,index) in errorList\" :key=\"index\">\n      <li><span style=\"font-size:15px;\">{{ item }}</span></li>\n    </ul>\n\n\n  </div>\n</template>\n\n<script>\n    import uploadPicInput from \"../../my-components/rbac/upload-pic-input\";\n    import {getUploadImgConfig,uploadImg} from \"@/api/index\";\n    export default {\n        name: \"uploadImg\",\n        components: {\n            uploadPicInput\n        },\n        data() {\n            return {\n                fileList: [],\n                errorList: [],\n                succesList: [],\n                types:[],\n            }\n        },\n        methods: {\n            getUploadImgConfig(){\n                getUploadImgConfig().then(res=>{\n                    this.types = [];\n                    res.result.forEach(obj=>{\n                        this.types.push({type:obj.split(\",\")[0],name:obj.split(\",\")[1]})\n                    })\n                })\n            },\n            handleUpload (file) {\n                this.fileList.push(file);\n                return false;\n            },\n            upload (type) {\n                console.log('>>>>', this.fileList)\n                if (this.fileList.length == 0) {\n                    this.$Message.error('未选择文件！');\n                    return;\n                }\n                let formData = new FormData();\n                for(var i=0; i< this.fileList.length; i++){\n                    formData.append(\"file\",this.fileList[i]);\n                }\n                formData.append(\"type\",type);\n                uploadImg(formData).then(res=>{\n                    debugger\n                    if (res.code === 200) {\n                        this.fileList = [];\n                        this.$Message.info('上传成功');\n                        this.succesList = res.result.succ;\n                        this.errorList = res.result.error;\n                    }\n                })\n            },\n            deleteFile(index) {\n                this.fileList.splice(index,1);\n            },\n        },\n        mounted() {\n            this.getUploadImgConfig();\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n"],"sourceRoot":"src/views/game/upload-img"}]}