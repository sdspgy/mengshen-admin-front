{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/my-components/tree-table/Table/TableBody.js","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/my-components/tree-table/Table/TableBody.js","mtime":1574132205000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Checkbox from '../Checkbox/Checkbox'; // eslint-disable-line\n// import Radio from '../Radio/Radio'; // eslint-disable-line\n\nimport { mixins } from './utils';\nimport { Radio } from 'iview'; // eslint-disable-line\n\n/* eslint-disable no-underscore-dangle */\n\nexport default {\n  name: 'TreeTable__body',\n  mixins: [mixins],\n  components: {\n    Radio: Radio\n  },\n  data: function data() {\n    return {\n      radioSelectedIndex: -1\n    };\n  },\n  computed: {\n    table: function table() {\n      return this.$parent;\n    }\n  },\n  methods: {\n    toggleStatus: function toggleStatus(type, row, rowIndex, value) {\n      this.validateType(type, ['Expanded', 'Checked', 'Hide', 'Fold'], 'toggleStatus', false);\n      var target = this.table.bodyData[rowIndex];\n      this.table.bodyData.splice(rowIndex, 1, _objectSpread({}, target, _defineProperty({}, \"_is\".concat(type), typeof value === 'undefined' ? !row[\"_is\".concat(type)] : value)));\n    },\n    getChildrenIndex: function getChildrenIndex(parentLevel, parentIndex) {\n      var careFold = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n      var data = this.table.bodyData;\n      var childrenIndex = [];\n\n      for (var i = parentIndex + 1; i < data.length; i++) {\n        if (data[i]._level <= parentLevel) break;\n\n        if (data[i]._level - 1 === parentLevel) {\n          childrenIndex.push(i);\n        }\n      }\n\n      var len = childrenIndex.length; // important!!!\n\n      if (len > 0) {\n        for (var _i = 0; _i < len; _i++) {\n          var childData = data[childrenIndex[_i]];\n\n          if (childData._childrenLen && (!careFold || careFold && !childData._isFold)) {\n            childrenIndex = childrenIndex.concat(this.getChildrenIndex(childData._level, childrenIndex[_i], careFold));\n          }\n        }\n      }\n\n      return childrenIndex;\n    },\n    handleEvent: function handleEvent($event, type, data, others) {\n      var certainType = this.validateType(type, ['cell', 'row', 'checkbox', 'icon', 'radio'], 'handleEvent');\n      var eventType = $event ? $event.type : '';\n      var row = data.row,\n          rowIndex = data.rowIndex,\n          column = data.column,\n          columnIndex = data.columnIndex;\n      var latestData = this.table.bodyData; // Checkbox\n\n      if (certainType.checkbox) {\n        var isChecked = others.isChecked;\n        this.toggleStatus('Checked', row, rowIndex, isChecked);\n\n        if (row._childrenLen > 0) {\n          var childrenIndex = this.getChildrenIndex(row._level, rowIndex, false);\n\n          for (var i = 0; i < childrenIndex.length; i++) {\n            this.toggleStatus('Checked', latestData[childrenIndex[i]], childrenIndex[i], isChecked);\n          }\n        }\n\n        return this.table.$emit('checkbox-click', latestData[rowIndex], column, columnIndex, $event);\n      } // Radio\n\n\n      if (certainType.radio) {\n        this.radioSelectedIndex = rowIndex;\n        return this.table.$emit('radio-click', {\n          row: row,\n          rowIndex: rowIndex,\n          column: column,\n          columnIndex: columnIndex,\n          $event: $event\n        });\n      } // Tree's icon\n\n\n      if (certainType.icon) {\n        $event.stopPropagation();\n        this.toggleStatus('Fold', row, rowIndex);\n\n        var _childrenIndex = this.getChildrenIndex(row._level, rowIndex);\n\n        for (var _i2 = 0; _i2 < _childrenIndex.length; _i2++) {\n          this.toggleStatus('Hide', latestData[_childrenIndex[_i2]], _childrenIndex[_i2]);\n        }\n\n        return this.table.$emit('tree-icon-click', latestData[rowIndex], column, columnIndex, $event);\n      }\n\n      if (certainType.cell && eventType === 'click') {\n        // 点击扩展单元格\n        if (this.isExpandCell(this.table, columnIndex)) {\n          this.toggleStatus('Expanded', row, rowIndex);\n          return this.table.$emit('expand-cell-click', latestData[rowIndex], column, columnIndex, $event);\n        }\n      } // 行：Hover\n\n\n      if (certainType.row && (eventType === 'mouseenter' || eventType === 'mouseleave')) {\n        var hover = others.hover;\n        var target = latestData[rowIndex];\n        latestData.splice(rowIndex, 1, _objectSpread({}, target, {\n          _isHover: hover\n        }));\n      }\n\n      if (certainType.row && others && others.clickRow && certainType.radio) {\n        this.radioSelectedIndex = rowIndex;\n        return this.table.$emit('radio-click', {\n          row: row,\n          rowIndex: rowIndex,\n          column: column,\n          columnIndex: columnIndex,\n          $event: $event\n        });\n      }\n\n      if (certainType.cell) {\n        return this.table.$emit(\"\".concat(type, \"-\").concat(eventType), latestData[rowIndex], rowIndex, column, columnIndex, $event);\n      }\n\n      return this.table.$emit(\"\".concat(type, \"-\").concat(eventType), latestData[rowIndex], rowIndex, $event);\n    }\n  },\n  render: function render() {\n    var _this2 = this;\n\n    var h = arguments[0];\n\n    // key\n    // function getKey(row, rowIndex) {\n    //   const rowKey = this.table.rowKey;\n    //   if (rowKey) {\n    //     return rowKey.call(null, row, rowIndex);\n    //   }\n    //   return rowIndex;\n    // }\n    // style\n    function getStyle(type, row, rowIndex, column, columnIndex) {\n      var certainType = this.validateType(type, ['cell', 'row'], 'getStyle');\n      var style = this.table[\"\".concat(type, \"Style\")];\n\n      if (typeof style === 'function') {\n        if (certainType.row) {\n          return style.call(null, row, rowIndex);\n        }\n\n        if (certainType.cell) {\n          return style.call(null, row, rowIndex, column, columnIndex);\n        }\n      }\n\n      return style;\n    } // className\n\n\n    function getClassName(type, row, rowIndex, column, columnIndex) {\n      var certainType = this.validateType(type, ['cell', 'row', 'inner'], 'getClassName');\n      var classList = [];\n\n      if (column && column.key == \"_normalIndex\") {\n        classList.push(\"\".concat(this.prefixCls, \"--center-cell\"));\n      } // console.log(certainType.inner)\n\n\n      if (certainType.row || certainType.cell) {\n        var className = this.table[\"\".concat(type, \"ClassName\")];\n\n        if (typeof className === 'string') {\n          classList.push(className);\n        } else if (typeof className === 'function') {\n          if (certainType.row) {\n            classList.push(className.call(null, row, rowIndex) || '');\n          }\n\n          if (certainType.cell) {\n            classList.push(className.call(null, row, rowIndex, column, columnIndex) || '');\n          }\n        }\n\n        if (certainType.row) {\n          classList.push(\"\".concat(this.prefixCls, \"__body-row\"));\n\n          if (this.table.stripe && rowIndex % 2 !== 0) {\n            classList.push(\"\".concat(this.prefixCls, \"--stripe-row\"));\n          }\n\n          if (this.table.showRowHover && row._isHover) {\n            classList.push(\"\".concat(this.prefixCls, \"--row-hover\"));\n          }\n        }\n\n        if (certainType.cell) {\n          classList.push(\"\".concat(this.prefixCls, \"__body-cell\"));\n\n          if (this.table.border) {\n            classList.push(\"\".concat(this.prefixCls, \"--border-cell\"));\n          }\n\n          var align = column.align;\n\n          if (['center', 'right'].indexOf(align) > -1) {\n            classList.push(\"\".concat(this.prefixCls, \"--\").concat(align, \"-cell\"));\n          }\n        }\n      }\n\n      if (certainType.inner) {\n        classList.push(\"\".concat(this.prefixCls, \"__cell-inner\"));\n\n        if (this.isExpandCell(this.table, columnIndex)) {\n          classList.push(\"\".concat(this.prefixCls, \"--expand-inner\"));\n\n          if (row._isExpanded) {\n            classList.push(\"\".concat(this.prefixCls, \"--expanded-inner\"));\n          }\n        }\n      }\n\n      return classList.join(' ');\n    } // 根据type渲染单元格Cell\n\n\n    function renderCell(row, rowIndex, column, columnIndex) {\n      var _this = this;\n\n      // ExpandType\n      if (this.isExpandCell(this.table, columnIndex)) {\n        return h(\"i\", {\n          \"class\": 'zk-icon zk-icon-angle-right'\n        });\n      } // SelectionType's Checkbox\n\n\n      if (this.isSelectionCell(this.table, columnIndex)) {\n        var res = null;\n\n        if (this.table.selectType === 'checkbox') {\n          var allCheck;\n          var childrenIndex;\n          var hasChildren = row._childrenLen > 0;\n\n          if (hasChildren) {\n            childrenIndex = this.getChildrenIndex(row._level, rowIndex, false);\n            allCheck = true;\n\n            for (var i = 0; i < childrenIndex.length; i++) {\n              if (!this.table.bodyData[childrenIndex[i]]._isChecked) {\n                allCheck = false;\n                break;\n              }\n            }\n          } else {\n            allCheck = row._isChecked;\n          }\n\n          var indeterminate = false;\n\n          if (hasChildren && !allCheck) {\n            for (var _i3 = 0; _i3 < childrenIndex.length; _i3++) {\n              if (this.table.bodyData[childrenIndex[_i3]]._isChecked) {\n                indeterminate = true;\n                break;\n              }\n            }\n          }\n\n          res = h(Checkbox, {\n            \"attrs\": {\n              \"indeterminate\": indeterminate,\n              \"value\": allCheck\n            },\n            \"on\": {\n              \"on-change\": function onChange(isChecked) {\n                return _this.handleEvent(null, 'checkbox', {\n                  row: row,\n                  rowIndex: rowIndex,\n                  column: column,\n                  columnIndex: columnIndex\n                }, {\n                  isChecked: isChecked\n                });\n              }\n            }\n          });\n        } else {\n          res = h(Radio, {\n            \"attrs\": {\n              \"value\": this.radioSelectedIndex === rowIndex\n            },\n            \"on\": {\n              \"on-change\": function onChange() {\n                return _this.handleEvent(null, 'radio', {\n                  row: row,\n                  rowIndex: rowIndex,\n                  column: column,\n                  columnIndex: columnIndex\n                });\n              }\n            }\n          });\n        }\n\n        return res;\n      } // Tree's firstProp\n\n\n      if (this.table.treeType && this.table.firstProp === column.key) {\n        return h(\"span\", {\n          \"class\": \"\".concat(this.prefixCls, \"--level-\").concat(row._level, \"-cell\"),\n          \"style\": {\n            marginLeft: \"\".concat((row._level - 1) * 24, \"px\"),\n            paddingLeft: row._childrenLen === 0 ? '20px' : ''\n          }\n        }, [row._childrenLen > 0 && h(\"i\", {\n          \"class\": \"\".concat(this.prefixCls, \"--tree-icon zk-icon zk-icon-\").concat(row._isFold ? 'plus' : 'minus', \"-square-o\"),\n          \"on\": {\n            \"click\": function click($event) {\n              return _this.handleEvent($event, 'icon', {\n                row: row,\n                rowIndex: rowIndex,\n                column: column,\n                columnIndex: columnIndex\n              }, {\n                isFold: row._isFold\n              });\n            }\n          }\n        }), row[column.key] ? row[column.key] : '']);\n      } // TreeType children's index\n\n\n      if (this.table.showIndex && this.table.treeType && column.key === '_normalIndex' && row._level > 1) {\n        return '';\n      }\n\n      if (column.type === undefined || column.type === 'custom') {\n        return row[column.key];\n      } else if (column.type === 'template') {\n        return this.table.$scopedSlots[column.template] ? this.table.$scopedSlots[column.template]({\n          row: row,\n          rowIndex: rowIndex,\n          column: column,\n          columnIndex: columnIndex\n        }) : '';\n      }\n\n      return '';\n    } // Template\n\n\n    return h(\"table\", {\n      \"attrs\": {\n        \"cellspacing\": \"0\",\n        \"cellpadding\": \"0\",\n        \"border\": \"0\"\n      },\n      \"class\": \"\".concat(this.prefixCls, \"__body\")\n    }, [h(\"colgroup\", [this.table.tableColumns.map(function (column) {\n      return h(\"col\", {\n        \"attrs\": {\n          \"width\": column.computedWidth || column.minWidth || column.width\n        }\n      });\n    })]), h(\"tbody\", [this.table.bodyData.length > 0 ? this.table.bodyData.map(function (row, rowIndex) {\n      return [h(\"tr\", {\n        \"directives\": [{\n          name: \"show\",\n          value: !row._isHide\n        }],\n        \"key\": \"table_row_\".concat(rowIndex),\n        \"style\": getStyle.call(_this2, 'row', row, rowIndex),\n        \"class\": getClassName.call(_this2, 'row', row, rowIndex),\n        \"on\": {\n          \"click\": function click($event) {\n            return _this2.handleEvent($event, 'row', {\n              row: row,\n              rowIndex: rowIndex\n            }, {\n              clickRow: true\n            });\n          },\n          \"dblclick\": function dblclick($event) {\n            return _this2.handleEvent($event, 'row', {\n              row: row,\n              rowIndex: rowIndex\n            });\n          },\n          \"contextmenu\": function contextmenu($event) {\n            return _this2.handleEvent($event, 'row', {\n              row: row,\n              rowIndex: rowIndex\n            });\n          },\n          \"mouseenter\": function mouseenter($event) {\n            return _this2.handleEvent($event, 'row', {\n              row: row,\n              rowIndex: rowIndex\n            }, {\n              hover: true\n            });\n          },\n          \"mouseleave\": function mouseleave($event) {\n            return _this2.handleEvent($event, 'row', {\n              row: row,\n              rowIndex: rowIndex\n            }, {\n              hover: false\n            });\n          }\n        }\n      }, [_this2.table.tableColumns.map(function (column, columnIndex) {\n        return h(\"td\", {\n          \"style\": getStyle.call(_this2, 'cell', row, rowIndex, column, columnIndex),\n          \"class\": getClassName.call(_this2, 'cell', row, rowIndex, column, columnIndex),\n          \"on\": {\n            \"click\": function click($event) {\n              return _this2.handleEvent($event, 'cell', {\n                row: row,\n                rowIndex: rowIndex,\n                column: column,\n                columnIndex: columnIndex\n              });\n            },\n            \"dblclick\": function dblclick($event) {\n              return _this2.handleEvent($event, 'cell', {\n                row: row,\n                rowIndex: rowIndex,\n                column: column,\n                columnIndex: columnIndex\n              });\n            },\n            \"contextmenu\": function contextmenu($event) {\n              return _this2.handleEvent($event, 'cell', {\n                row: row,\n                rowIndex: rowIndex,\n                column: column,\n                columnIndex: columnIndex\n              });\n            },\n            \"mouseenter\": function mouseenter($event) {\n              return _this2.handleEvent($event, 'cell', {\n                row: row,\n                rowIndex: rowIndex,\n                column: column,\n                columnIndex: columnIndex\n              });\n            },\n            \"mouseleave\": function mouseleave($event) {\n              return _this2.handleEvent($event, 'cell', {\n                row: row,\n                rowIndex: rowIndex,\n                column: column,\n                columnIndex: columnIndex\n              });\n            }\n          }\n        }, [h(\"div\", {\n          \"class\": getClassName.call(_this2, 'inner', row, rowIndex, column, columnIndex)\n        }, [renderCell.call(_this2, row, rowIndex, column, columnIndex)])]);\n      })]), _this2.table.expandType && row._isExpanded && h(\"tr\", {\n        \"key\": rowIndex,\n        \"class\": \"\".concat(_this2.prefixCls, \"__body-row \").concat(_this2.prefixCls, \"--expand-row\")\n      }, [h(\"td\", {\n        \"class\": \"\".concat(_this2.prefixCls, \"--expand-content\"),\n        \"attrs\": {\n          \"colspan\": _this2.table.tableColumns.length\n        }\n      }, [_this2.table.$scopedSlots.expand ? _this2.table.$scopedSlots.expand({\n        row: row,\n        rowIndex: rowIndex\n      }) : ''])])];\n    }) : h(\"tr\", {\n      \"class\": \"\".concat(this.prefixCls, \"--empty-row\")\n    }, [h(\"td\", {\n      \"class\": \"\".concat(this.prefixCls, \"__body-cell \").concat(this.prefixCls, \"--empty-content\"),\n      \"attrs\": {\n        \"colspan\": this.table.tableColumns.length\n      }\n    }, [this.table.emptyText])])])]);\n  }\n};",{"version":3,"sources":["/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/my-components/tree-table/Table/TableBody.js"],"names":["Checkbox","mixins","Radio","name","components","data","radioSelectedIndex","computed","table","$parent","methods","toggleStatus","type","row","rowIndex","value","validateType","target","bodyData","splice","getChildrenIndex","parentLevel","parentIndex","careFold","childrenIndex","i","length","_level","push","len","childData","_childrenLen","_isFold","concat","handleEvent","$event","others","certainType","eventType","column","columnIndex","latestData","checkbox","isChecked","$emit","radio","icon","stopPropagation","cell","isExpandCell","hover","_isHover","clickRow","render","getStyle","style","call","getClassName","classList","key","prefixCls","className","stripe","showRowHover","border","align","indexOf","inner","_isExpanded","join","renderCell","isSelectionCell","res","selectType","allCheck","hasChildren","_isChecked","indeterminate","treeType","firstProp","marginLeft","paddingLeft","isFold","showIndex","undefined","$scopedSlots","template","tableColumns","map","computedWidth","minWidth","width","_isHide","expandType","expand","emptyText"],"mappings":"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","sourcesContent":["import Checkbox from '../Checkbox/Checkbox'; // eslint-disable-line\n// import Radio from '../Radio/Radio'; // eslint-disable-line\nimport { mixins } from './utils';\nimport { Radio } from 'iview'; // eslint-disable-line\n\n/* eslint-disable no-underscore-dangle */\nexport default {\n  name: 'TreeTable__body',\n  mixins: [mixins],\n  components: { Radio },\n  data() {\n    return {\n      radioSelectedIndex: -1,\n    };\n  },\n  computed: {\n    table() {\n      return this.$parent;\n    },\n  },\n  methods: {\n    toggleStatus(type, row, rowIndex, value) {\n      this.validateType(type, ['Expanded', 'Checked', 'Hide', 'Fold'], 'toggleStatus', false);\n      const target = this.table.bodyData[rowIndex];\n      this.table.bodyData.splice(rowIndex, 1, {\n        ...target,\n        [`_is${type}`]: typeof value === 'undefined' ? !row[`_is${type}`] : value,\n      });\n    },\n    getChildrenIndex(parentLevel, parentIndex, careFold = true) {\n      const data = this.table.bodyData;\n      let childrenIndex = [];\n      for (let i = parentIndex + 1; i < data.length; i++) {\n        if (data[i]._level <= parentLevel) break;\n        if (data[i]._level - 1 === parentLevel) {\n          childrenIndex.push(i);\n        }\n      }\n      const len = childrenIndex.length; // important!!!\n      if (len > 0) {\n        for (let i = 0; i < len; i++) {\n          const childData = data[childrenIndex[i]];\n          if (\n            childData._childrenLen &&\n            (!careFold || (careFold && !childData._isFold))\n          ) {\n            childrenIndex = childrenIndex.concat(\n              this.getChildrenIndex(childData._level, childrenIndex[i], careFold));\n          }\n        }\n      }\n      return childrenIndex;\n    },\n    handleEvent($event, type, data, others) {\n      const certainType = this.validateType(type, ['cell', 'row', 'checkbox', 'icon', 'radio'], 'handleEvent');\n      const eventType = $event ? $event.type : '';\n      const { row, rowIndex, column, columnIndex } = data;\n      const latestData = this.table.bodyData;\n      // Checkbox\n      if (certainType.checkbox) {\n        const { isChecked } = others;\n        this.toggleStatus('Checked', row, rowIndex, isChecked);\n        if (row._childrenLen > 0) {\n          const childrenIndex = this.getChildrenIndex(row._level, rowIndex, false);\n          for (let i = 0; i < childrenIndex.length; i++) {\n            this.toggleStatus('Checked', latestData[childrenIndex[i]], childrenIndex[i], isChecked);\n          }\n        }\n        return this.table.$emit('checkbox-click', latestData[rowIndex], column, columnIndex, $event);\n      }\n      // Radio\n      if (certainType.radio) {\n        this.radioSelectedIndex = rowIndex;\n        return this.table.$emit('radio-click', { row, rowIndex, column, columnIndex, $event });\n      }\n      // Tree's icon\n      if (certainType.icon) {\n        $event.stopPropagation();\n        this.toggleStatus('Fold', row, rowIndex);\n        const childrenIndex = this.getChildrenIndex(row._level, rowIndex);\n        for (let i = 0; i < childrenIndex.length; i++) {\n          this.toggleStatus('Hide', latestData[childrenIndex[i]], childrenIndex[i]);\n        }\n        return this.table.$emit('tree-icon-click', latestData[rowIndex], column, columnIndex, $event);\n      }\n      if (certainType.cell && eventType === 'click') {\n        // 点击扩展单元格\n        if (this.isExpandCell(this.table, columnIndex)) {\n          this.toggleStatus('Expanded', row, rowIndex);\n          return this.table.$emit('expand-cell-click', latestData[rowIndex], column, columnIndex, $event);\n        }\n      }\n      // 行：Hover\n      if (certainType.row && (eventType === 'mouseenter' || eventType === 'mouseleave')) {\n        const { hover } = others;\n        const target = latestData[rowIndex];\n        latestData.splice(rowIndex, 1, {\n          ...target,\n          _isHover: hover,\n        });\n      }\n      if (certainType.row && others && others.clickRow && certainType.radio) {\n        this.radioSelectedIndex = rowIndex;\n        return this.table.$emit('radio-click', { row, rowIndex, column, columnIndex, $event });\n      }\n      if (certainType.cell) {\n        return this.table.$emit(`${type}-${eventType}`, latestData[rowIndex], rowIndex, column, columnIndex, $event);\n      }\n      return this.table.$emit(`${type}-${eventType}`, latestData[rowIndex], rowIndex, $event);\n    },\n  },\n  render() {\n    // key\n    // function getKey(row, rowIndex) {\n    //   const rowKey = this.table.rowKey;\n    //   if (rowKey) {\n    //     return rowKey.call(null, row, rowIndex);\n    //   }\n    //   return rowIndex;\n    // }\n\n    // style\n    function getStyle(type, row, rowIndex, column, columnIndex) {\n      const certainType = this.validateType(type, ['cell', 'row'], 'getStyle');\n      const style = this.table[`${type}Style`];\n      if (typeof style === 'function') {\n        if (certainType.row) {\n          return style.call(null, row, rowIndex);\n        }\n        if (certainType.cell) {\n          return style.call(null, row, rowIndex, column, columnIndex);\n        }\n      }\n      return style;\n    }\n\n    // className\n    function getClassName(type, row, rowIndex, column, columnIndex) {\n      const certainType = this.validateType(type, ['cell', 'row', 'inner'], 'getClassName');\n      const classList = [];\n      if (column && column.key == \"_normalIndex\") {\n        classList.push(`${this.prefixCls}--center-cell`);\n      }\n      // console.log(certainType.inner)\n      if (certainType.row || certainType.cell) {\n        const className = this.table[`${type}ClassName`];\n        if (typeof className === 'string') {\n          classList.push(className);\n        } else if (typeof className === 'function') {\n          if (certainType.row) {\n            classList.push(className.call(null, row, rowIndex) || '');\n          }\n          if (certainType.cell) {\n            classList.push(className.call(null, row, rowIndex, column, columnIndex) || '');\n          }\n        }\n        if (certainType.row) {\n          classList.push(`${this.prefixCls}__body-row`);\n          if (this.table.stripe && rowIndex % 2 !== 0) {\n            classList.push(`${this.prefixCls}--stripe-row`);\n          }\n          if (this.table.showRowHover && row._isHover) {\n            classList.push(`${this.prefixCls}--row-hover`);\n          }\n        }\n        if (certainType.cell) {\n          classList.push(`${this.prefixCls}__body-cell`);\n          if (this.table.border) {\n            classList.push(`${this.prefixCls}--border-cell`);\n          }\n          const align = column.align;\n          if (['center', 'right'].indexOf(align) > -1) {\n            classList.push(`${this.prefixCls}--${align}-cell`);\n          }\n        }\n      }\n      if (certainType.inner) {\n        classList.push(`${this.prefixCls}__cell-inner`);\n        if (this.isExpandCell(this.table, columnIndex)) {\n          classList.push(`${this.prefixCls}--expand-inner`);\n          if (row._isExpanded) {\n            classList.push(`${this.prefixCls}--expanded-inner`);\n          }\n        }\n      }\n      return classList.join(' ');\n    }\n\n    // 根据type渲染单元格Cell\n    function renderCell(row, rowIndex, column, columnIndex) {\n      // ExpandType\n      if (this.isExpandCell(this.table, columnIndex)) {\n        return <i class='zk-icon zk-icon-angle-right'></i>;\n      }\n      // SelectionType's Checkbox\n      if (this.isSelectionCell(this.table, columnIndex)) {\n        let res = null;\n        if (this.table.selectType === 'checkbox') {\n          let allCheck;\n          let childrenIndex;\n          const hasChildren = row._childrenLen > 0;\n          if (hasChildren) {\n            childrenIndex = this.getChildrenIndex(row._level, rowIndex, false);\n            allCheck = true;\n            for (let i = 0; i < childrenIndex.length; i++) {\n              if (!this.table.bodyData[childrenIndex[i]]._isChecked) {\n                allCheck = false;\n                break;\n              }\n            }\n          } else {\n            allCheck = row._isChecked;\n          }\n          let indeterminate = false;\n          if (hasChildren && !allCheck) {\n            for (let i = 0; i < childrenIndex.length; i++) {\n              if (this.table.bodyData[childrenIndex[i]]._isChecked) {\n                indeterminate = true;\n                break;\n              }\n            }\n          }\n          res = <Checkbox\n            indeterminate={indeterminate}\n            value={allCheck}\n            onOn-change={isChecked => this.handleEvent(null, 'checkbox', { row, rowIndex, column, columnIndex }, { isChecked })}>\n          </Checkbox>;\n        } else {\n          res = <Radio value={this.radioSelectedIndex === rowIndex} on-on-change={() => this.handleEvent(null, 'radio', { row, rowIndex, column, columnIndex })}></Radio>;\n        }\n        return res;\n      }\n\n      // Tree's firstProp\n      if (this.table.treeType && this.table.firstProp === column.key) {\n        return <span\n          class={`${this.prefixCls}--level-${row._level}-cell`}\n          style={{\n            marginLeft: `${(row._level - 1) * 24}px`,\n            paddingLeft: row._childrenLen === 0 ? '20px' : '',\n          }}>\n          {row._childrenLen > 0 &&\n            <i\n              class={`${this.prefixCls}--tree-icon zk-icon zk-icon-${row._isFold ? 'plus' : 'minus'}-square-o`}\n              on-click={$event => this.handleEvent($event, 'icon', { row, rowIndex, column, columnIndex }, { isFold: row._isFold })}></i>\n          }\n          {row[column.key] ? row[column.key] : ''}\n        </span>;\n      }\n      // TreeType children's index\n      if (this.table.showIndex && this.table.treeType && column.key === '_normalIndex' && row._level > 1) {\n        return '';\n      }\n      if (column.type === undefined || column.type === 'custom') {\n        return row[column.key];\n      } else if (column.type === 'template') {\n        return this.table.$scopedSlots[column.template]\n          ? this.table.$scopedSlots[column.template]({ row, rowIndex, column, columnIndex })\n          : '';\n      }\n      return '';\n    }\n\n    // Template\n    return (\n      <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" class={`${this.prefixCls}__body`}>\n        <colgroup>\n          {this.table.tableColumns.map(column =>\n            <col width={column.computedWidth || column.minWidth || column.width}></col>)\n          }\n        </colgroup>\n        <tbody>\n          {this.table.bodyData.length > 0\n            ? this.table.bodyData.map((row, rowIndex) =>\n              [\n                <tr\n                  v-show={!row._isHide}\n                  key={`table_row_${rowIndex}`}\n                  style={getStyle.call(this, 'row', row, rowIndex)}\n                  class={getClassName.call(this, 'row', row, rowIndex)}\n                  on-click={$event => this.handleEvent($event, 'row', { row, rowIndex }, { clickRow: true })}\n                  on-dblclick={$event => this.handleEvent($event, 'row', { row, rowIndex })}\n                  on-contextmenu={$event => this.handleEvent($event, 'row', { row, rowIndex })}\n                  on-mouseenter={$event => this.handleEvent($event, 'row', { row, rowIndex }, { hover: true })}\n                  on-mouseleave={$event => this.handleEvent($event, 'row', { row, rowIndex }, { hover: false })}>\n                  {this.table.tableColumns.map((column, columnIndex) =>\n                    <td\n                      style={getStyle.call(this, 'cell', row, rowIndex, column, columnIndex)}\n                      class={getClassName.call(this, 'cell', row, rowIndex, column, columnIndex)}\n                      on-click={$event => this.handleEvent($event, 'cell', { row, rowIndex, column, columnIndex })}\n                      on-dblclick={$event => this.handleEvent($event, 'cell', { row, rowIndex, column, columnIndex })}\n                      on-contextmenu={$event => this.handleEvent($event, 'cell', { row, rowIndex, column, columnIndex })}\n                      on-mouseenter={$event => this.handleEvent($event, 'cell', { row, rowIndex, column, columnIndex })}\n                      on-mouseleave={$event => this.handleEvent($event, 'cell', { row, rowIndex, column, columnIndex })}>\n                      <div class={getClassName.call(this, 'inner', row, rowIndex, column, columnIndex)}>\n                        {renderCell.call(this, row, rowIndex, column, columnIndex)}\n                      </div>\n                    </td>)\n                  }\n                </tr>,\n                this.table.expandType && row._isExpanded &&\n                <tr\n                  key={rowIndex}\n                  class={`${this.prefixCls}__body-row ${this.prefixCls}--expand-row`}>\n                  <td\n                    class={`${this.prefixCls}--expand-content`}\n                    colspan={this.table.tableColumns.length}>\n                    {this.table.$scopedSlots.expand\n                      ? this.table.$scopedSlots.expand({ row, rowIndex })\n                      : ''\n                    }\n                  </td>\n                </tr>,\n              ])\n            : <tr\n              class={`${this.prefixCls}--empty-row`}>\n              <td\n                class={`${this.prefixCls}__body-cell ${this.prefixCls}--empty-content`}\n                colspan={this.table.tableColumns.length}>\n                {this.table.emptyText}\n              </td>\n            </tr>\n          }\n        </tbody>\n      </table>\n    );\n  },\n};\n"]}]}