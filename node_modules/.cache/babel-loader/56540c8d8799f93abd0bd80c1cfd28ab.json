{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/thread-loader/dist/cjs.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/upload-json/uploadJson.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/upload-json/uploadJson.vue","mtime":1574132205000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { uploadJson, loadRemoteConfigs, getListByEnable, getJsonByName as _getJsonByName } from \"@/api/index\";\nexport default {\n  name: \"uploadJson\",\n  data: function data() {\n    var _this = this;\n\n    return {\n      fileList: [],\n      errorList: [],\n      succesList: [],\n      serverList: [],\n      isShow: true,\n      loading: false,\n      fileName: '',\n      jsonStr: '',\n      jsonStrFormat: '',\n      dialogFormVisible: false,\n      columns: [{\n        type: \"index\",\n        width: 60,\n        align: \"center\"\n      }, {\n        title: \"服务器名称\",\n        key: \"name\",\n        align: \"center\",\n        width: 150\n      }, {\n        title: \"服务器地址\",\n        key: \"address\",\n        align: \"center\",\n        width: 150\n      }, {\n        title: \"端口\",\n        key: \"port\",\n        align: \"center\",\n        width: 100\n      }, {\n        title: \"请求url\",\n        key: \"requestUrl\",\n        align: \"center\",\n        width: 200\n      }, {\n        title: \"加载状态\",\n        key: \"success\",\n        align: \"center\",\n        width: 100,\n        render: function render(h, params) {\n          if (_this.isShow) {\n            return h(\"div\", params.row.success);\n          } else {\n            return '';\n          }\n        }\n      }, {\n        title: \"加载远程配置返回信息\",\n        key: \"msg\",\n        align: \"center\",\n        width: 300\n      }]\n    };\n  },\n  methods: {\n    init: function init() {\n      this.getServerList();\n    },\n    handleUpload: function handleUpload(file) {\n      this.fileList.push(file);\n      return false;\n    },\n    upload: function upload() {\n      var _this2 = this;\n\n      console.log('>>>>', this.fileList);\n\n      if (this.fileList.length == 0) {\n        this.$Message.error('未选择文件！');\n        return;\n      }\n\n      var formData = new FormData();\n\n      for (var i = 0; i < this.fileList.length; i++) {\n        formData.append(\"file\", this.fileList[i]);\n      }\n\n      uploadJson(formData).then(function (res) {\n        if (res.status === 200) {\n          _this2.fileList = [];\n\n          _this2.$Message.success('上传成功');\n\n          _this2.succesList = res.data.succ;\n          _this2.errorList = res.data.error;\n        } else {\n          _this2.$Message.error(res.data);\n        }\n      });\n    },\n    deleteFile: function deleteFile(index) {\n      this.fileList.splice(index, 1);\n    },\n    getServerList: function getServerList() {\n      var _this3 = this;\n\n      if (!this.$route.meta.permTypes.includes('other')) {\n        return;\n      }\n\n      getListByEnable().then(function (res) {\n        if (res.success) {\n          _this3.isShow = false;\n          _this3.serverList = res.result;\n        }\n      });\n    },\n    loadRemoteConfig: function loadRemoteConfig() {\n      var _this4 = this;\n\n      this.loading = true;\n      loadRemoteConfigs().then(function (res) {\n        _this4.loading = false;\n        _this4.serverList = res.result;\n      });\n    },\n    openDialog: function openDialog() {\n      this.getJsonByName();\n    },\n    hideDialog: function hideDialog() {\n      this.dialogFormVisible = false;\n    },\n    getJsonByName: function getJsonByName() {\n      var _this5 = this;\n\n      this.jsonStr = '';\n\n      _getJsonByName({\n        fileName: this.fileName\n      }).then(function (res) {\n        if (res.status === 200) {\n          if (res.data.error) {\n            _this5.hideDialog();\n\n            _this5.$Message.error(res.data.error);\n          } else {\n            _this5.dialogFormVisible = true;\n            _this5.jsonStr = res.data.jsonStr;\n          }\n        }\n      });\n    },\n    clickCopyPre: function clickCopyPre() {\n      var div = document.getElementById('copyPre');\n\n      if (document.body.createTextRange) {\n        var range = document.body.createTextRange();\n        range.moveToElementText(div);\n        range.select();\n      } else if (window.getSelection) {\n        var selection = window.getSelection();\n        var range = document.createRange();\n        range.selectNodeContents(div);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      } else {\n        console.warn(\"none\");\n      }\n\n      document.execCommand(\"Copy\"); // 执行浏览器复制命令\n\n      this.$Message.success(\"\\u590D\\u5236\\u6210\\u529F\");\n    }\n  },\n  mounted: function mounted() {\n    this.init();\n  }\n};",null]}