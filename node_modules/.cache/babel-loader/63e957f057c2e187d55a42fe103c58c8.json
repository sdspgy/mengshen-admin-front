{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/my-components/rbac/user-choose.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/my-components/rbac/user-choose.vue","mtime":1574132205000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getUserListData } from \"@/api/index\";\nexport default {\n  name: \"userChoose\",\n  props: {\n    text: {\n      type: String,\n      default: \"选择用户\"\n    },\n    icon: {\n      type: String,\n      default: \"md-person-add\"\n    }\n  },\n  data: function data() {\n    var _this = this;\n\n    return {\n      height: 500,\n      userLoading: true,\n      userModalVisible: false,\n      selectUsers: [],\n      searchUserForm: {\n        username: \"\",\n        type: \"\",\n        status: \"\",\n        pageNumber: 1,\n        // 当前页数\n        pageSize: 10,\n        // 页面大小\n        sort: \"createTime\",\n        // 默认排序字段\n        order: \"desc\" // 默认排序方式\n\n      },\n      userColumns: [{\n        type: \"index\",\n        width: 60,\n        align: \"center\"\n      }, {\n        title: \"用户名\",\n        key: \"username\",\n        width: 145,\n        sortable: true\n      }, {\n        title: \"头像\",\n        key: \"avatar\",\n        width: 80,\n        align: \"center\",\n        render: function render(h, params) {\n          return h(\"Avatar\", {\n            props: {\n              src: params.row.avatar\n            }\n          });\n        }\n      }, {\n        title: \"手机\",\n        key: \"mobile\",\n        width: 115,\n        sortable: true\n      }, {\n        title: \"邮箱\",\n        key: \"email\",\n        width: 180,\n        sortable: true\n      }, {\n        title: \"性别\",\n        key: \"sex\",\n        width: 70,\n        align: \"center\"\n      }, {\n        title: \"用户类型\",\n        key: \"type\",\n        align: \"center\",\n        width: 100,\n        render: function render(h, params) {\n          var re = \"\";\n\n          if (params.row.type == 1) {\n            re = \"管理员\";\n          } else if (params.row.type == 0) {\n            re = \"普通用户\";\n          }\n\n          return h(\"div\", re);\n        }\n      }, {\n        title: \"状态\",\n        key: \"status\",\n        align: \"center\",\n        width: 120,\n        render: function render(h, params) {\n          if (params.row.status == 0) {\n            return h(\"div\", [h(\"Badge\", {\n              props: {\n                status: \"success\",\n                text: \"正常启用\"\n              }\n            })]);\n          } else if (params.row.status == -1) {\n            return h(\"div\", [h(\"Badge\", {\n              props: {\n                status: \"error\",\n                text: \"禁用\"\n              }\n            })]);\n          }\n        }\n      }, {\n        title: \"创建时间\",\n        key: \"createTime\",\n        sortable: true,\n        sortType: \"desc\",\n        width: 150\n      }, {\n        title: \"操作\",\n        key: \"action\",\n        width: 130,\n        align: \"center\",\n        fixed: \"right\",\n        render: function render(h, params) {\n          return h(\"div\", [h(\"Button\", {\n            props: {\n              type: \"info\",\n              size: \"small\"\n            },\n            on: {\n              click: function click() {\n                _this.chooseUser(params.row);\n              }\n            }\n          }, \"添加该用户\")]);\n        }\n      }],\n      userData: [],\n      totalUser: 0\n    };\n  },\n  methods: {\n    changeUserPage: function changeUserPage(v) {\n      this.searchUserForm.pageNumber = v;\n      this.getUserDataList();\n    },\n    changeUserPageSize: function changeUserPageSize(v) {\n      this.searchUserForm.pageSize = v;\n      this.getUserDataList();\n    },\n    getUserDataList: function getUserDataList() {\n      var _this2 = this;\n\n      this.userLoading = true;\n      getUserListData(this.searchUserForm).then(function (res) {\n        _this2.userLoading = false;\n\n        if (res.success) {\n          _this2.data = res.result.records;\n          _this2.total = res.result.total;\n\n          if (res.result.content || res.result.totalElements) {\n            _this2.data = res.result.content;\n            _this2.total = res.result.totalElements;\n          }\n        }\n      });\n    },\n    handleSearchUser: function handleSearchUser() {\n      this.searchUserForm.pageNumber = 1;\n      this.searchUserForm.pageSize = 9;\n      this.getUserDataList();\n    },\n    handleResetUser: function handleResetUser() {\n      this.$refs.searchUserForm.resetFields();\n      this.searchUserForm.pageNumber = 1;\n      this.searchUserForm.pageSize = 9;\n      this.$refs.dep.clearSelect(); // 重新加载数据\n\n      this.getUserDataList();\n    },\n    setData: function setData(v) {\n      this.selectUsers = v;\n      this.$emit(\"on-change\", this.selectUsers);\n    },\n    chooseUser: function chooseUser(v) {\n      // 去重\n      var that = this;\n      var flag = true;\n      this.selectUsers.forEach(function (e) {\n        if (v.id == e.id) {\n          that.$Message.warning(\"已经添加过啦，请勿重复选择\");\n          flag = false;\n        }\n      });\n\n      if (flag) {\n        var u = {\n          id: v.id,\n          username: v.username\n        };\n        this.selectUsers.push(u);\n        this.$emit(\"on-change\", this.selectUsers);\n        this.$Message.success(\"\\u6DFB\\u52A0\\u7528\\u6237 \".concat(v.username, \" \\u6210\\u529F\"));\n      }\n    },\n    clearSelectData: function clearSelectData() {\n      this.selectUsers = [];\n      this.$emit(\"on-change\", this.selectUsers);\n    },\n    handleCancelUser: function handleCancelUser(e, id) {\n      // 删除所选用户\n      var newArray = [];\n      this.selectUsers.forEach(function (e) {\n        if (id != e.id) {\n          newArray.push(e);\n        }\n      });\n      this.selectUsers = newArray;\n      this.$emit(\"on-change\", this.selectUsers);\n      this.$Message.success(\"删除所选用户成功\");\n    }\n  },\n  created: function created() {\n    // 计算高度\n    this.height = Number(document.documentElement.clientHeight - 230);\n    this.getUserDataList();\n  }\n};",{"version":3,"sources":["user-choose.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <Button @click=\"userModalVisible=true\" :icon=\"icon\">{{text}}</Button>\n    <span @click=\"clearSelectData\" class=\"clear\">清空已选</span>\n    <Collapse simple class=\"collapse\">\n      <Panel name=\"1\">\n        已选择\n        <span class=\"select-count\">{{selectUsers.length}}</span> 人\n        <p slot=\"content\">\n          <Tag\n            v-for=\"(item, i) in selectUsers\"\n            :key=\"i\"\n            :name=\"item.id\"\n            color=\"default\"\n            closable\n            @on-close=\"handleCancelUser\"\n          >{{item.username}}</Tag>\n        </p>\n      </Panel>\n    </Collapse>\n    <Drawer title=\"选择用户\" closable v-model=\"userModalVisible\" width=\"800\" draggable>\n      <Form\n        ref=\"searchUserForm\"\n        :model=\"searchUserForm\"\n        inline\n        :label-width=\"55\"\n        class=\"search-form\"\n      >\n        <Form-item label=\"用户名\" prop=\"username\">\n          <Input\n            type=\"text\"\n            v-model=\"searchUserForm.username\"\n            clearable\n            placeholder=\"请输入用户名\"\n            style=\"width: 200px\"\n          />\n        </Form-item>\n        <Form-item style=\"margin-left:-35px;\" class=\"br\">\n          <Button @click=\"handleSearchUser\" type=\"primary\" icon=\"ios-search\">搜索</Button>\n          <Button @click=\"handleResetUser\">重置</Button>\n        </Form-item>\n      </Form>\n      <Table :loading=\"userLoading\" border :columns=\"userColumns\" :data=\"userData\" :height=\"height\" ref=\"userTable\"></Table>\n      <Row type=\"flex\" justify=\"end\" class=\"code-row-bg page\" style=\"margin: 10px 0;\">\n        <Page\n          :current=\"searchUserForm.pageNumber\"\n          :total=\"totalUser\"\n          :page-size=\"searchUserForm.pageSize\"\n          @on-change=\"changeUserPage\"\n          @on-page-size-change=\"changeUserPageSize\"\n          :page-size-opts=\"[10,20,50]\"\n          size=\"small\"\n          show-total\n          show-elevator\n          show-sizer\n        ></Page>\n      </Row>\n      <div class=\"my-drawer-footer\">\n        已选择\n        <span class=\"select-count\">{{selectUsers.length}}</span> 人\n        <Button @click=\"clearSelectData\" style=\"margin-left:10px\">清空已选</Button>\n        <Button @click=\"userModalVisible=false\" type=\"primary\" style=\"margin-left:10px\">关闭</Button>\n      </div>\n    </Drawer>\n  </div>\n</template>\n\n<script>\nimport { getUserListData } from \"@/api/index\";\nexport default {\n  name: \"userChoose\",\n  props: {\n    text: {\n      type: String,\n      default: \"选择用户\"\n    },\n    icon: {\n      type: String,\n      default: \"md-person-add\"\n    }\n  },\n  data() {\n    return {\n      height: 500,\n      userLoading: true,\n      userModalVisible: false,\n      selectUsers: [],\n      searchUserForm: {\n        username: \"\",\n        type: \"\",\n        status: \"\",\n        pageNumber: 1, // 当前页数\n        pageSize: 10, // 页面大小\n        sort: \"createTime\", // 默认排序字段\n        order: \"desc\" // 默认排序方式\n      },\n      userColumns: [\n        {\n          type: \"index\",\n          width: 60,\n          align: \"center\"\n        },\n        {\n          title: \"用户名\",\n          key: \"username\",\n          width: 145,\n          sortable: true\n        },\n        {\n          title: \"头像\",\n          key: \"avatar\",\n          width: 80,\n          align: \"center\",\n          render: (h, params) => {\n            return h(\"Avatar\", {\n              props: {\n                src: params.row.avatar\n              }\n            });\n          }\n        },\n        {\n          title: \"手机\",\n          key: \"mobile\",\n          width: 115,\n          sortable: true\n        },\n        {\n          title: \"邮箱\",\n          key: \"email\",\n          width: 180,\n          sortable: true\n        },\n        {\n          title: \"性别\",\n          key: \"sex\",\n          width: 70,\n          align: \"center\"\n        },\n        {\n          title: \"用户类型\",\n          key: \"type\",\n          align: \"center\",\n          width: 100,\n          render: (h, params) => {\n            let re = \"\";\n            if (params.row.type == 1) {\n              re = \"管理员\";\n            } else if (params.row.type == 0) {\n              re = \"普通用户\";\n            }\n            return h(\"div\", re);\n          }\n        },\n        {\n          title: \"状态\",\n          key: \"status\",\n          align: \"center\",\n          width: 120,\n          render: (h, params) => {\n            if (params.row.status == 0) {\n              return h(\"div\", [\n                h(\n                  \"Badge\",\n                  {\n                    props: {\n                      status: \"success\",\n                      text: \"正常启用\"\n                    }\n                  }\n                )\n              ]);\n            } else if (params.row.status == -1) {\n              return h(\"div\", [\n                h(\n                  \"Badge\",\n                  {\n                    props: {\n                      status: \"error\",\n                      text: \"禁用\"\n                    }\n                  }\n                )\n              ]);\n            }\n          }\n        },\n        {\n          title: \"创建时间\",\n          key: \"createTime\",\n          sortable: true,\n          sortType: \"desc\",\n          width: 150\n        },\n        {\n          title: \"操作\",\n          key: \"action\",\n          width: 130,\n          align: \"center\",\n          fixed: \"right\",\n          render: (h, params) => {\n            return h(\"div\", [\n              h(\n                \"Button\",\n                {\n                  props: {\n                    type: \"info\",\n                    size: \"small\"\n                  },\n                  on: {\n                    click: () => {\n                      this.chooseUser(params.row);\n                    }\n                  }\n                },\n                \"添加该用户\"\n              )\n            ]);\n          }\n        }\n      ],\n      userData: [],\n      totalUser: 0\n    };\n  },\n  methods: {\n    changeUserPage(v) {\n      this.searchUserForm.pageNumber = v;\n      this.getUserDataList();\n    },\n    changeUserPageSize(v) {\n      this.searchUserForm.pageSize = v;\n      this.getUserDataList();\n    },\n    getUserDataList() {\n      this.userLoading = true;\n      getUserListData(this.searchUserForm).then(res => {\n        this.userLoading = false;\n        if (res.success) {\n            this.data = res.result.records;\n            this.total = res.result.total\n            if (res.result.content || res.result.totalElements){\n                this.data =  res.result.content;\n                this.total = res.result.totalElements;\n            }\n        }\n      });\n    },\n    handleSearchUser() {\n      this.searchUserForm.pageNumber = 1;\n      this.searchUserForm.pageSize = 9;\n      this.getUserDataList();\n    },\n    handleResetUser() {\n      this.$refs.searchUserForm.resetFields();\n      this.searchUserForm.pageNumber = 1;\n      this.searchUserForm.pageSize = 9;\n      this.$refs.dep.clearSelect();\n      // 重新加载数据\n      this.getUserDataList();\n    },\n    setData(v) {\n      this.selectUsers = v;\n      this.$emit(\"on-change\", this.selectUsers);\n    },\n    chooseUser(v) {\n      // 去重\n      let that = this;\n      let flag = true;\n      this.selectUsers.forEach(e => {\n        if (v.id == e.id) {\n          that.$Message.warning(\"已经添加过啦，请勿重复选择\");\n          flag = false;\n        }\n      });\n      if (flag) {\n        let u = {\n          id: v.id,\n          username: v.username\n        };\n        this.selectUsers.push(u);\n        this.$emit(\"on-change\", this.selectUsers);\n        this.$Message.success(`添加用户 ${v.username} 成功`);\n      }\n    },\n    clearSelectData() {\n      this.selectUsers = [];\n      this.$emit(\"on-change\", this.selectUsers);\n    },\n    handleCancelUser(e, id) {\n      // 删除所选用户\n      let newArray = [];\n      this.selectUsers.forEach(e => {\n        if (id != e.id) {\n          newArray.push(e);\n        }\n      });\n      this.selectUsers = newArray;\n      this.$emit(\"on-change\", this.selectUsers);\n      this.$Message.success(\"删除所选用户成功\");\n    }\n  },\n  created() {\n    // 计算高度\n    this.height = Number(document.documentElement.clientHeight - 230);\n    this.getUserDataList();\n  }\n};\n</script>\n\n<style lang=\"less\">\n.clear {\n  font-size: 12px;\n  margin-left: 15px;\n  color: #40a9ff;\n  cursor: pointer;\n}\n.collapse {\n  font-size: 12px;\n  margin-top: 15px;\n  width: 500px;\n}\n.my-drawer-footer {\n  z-index: 10;\n  width: 100%;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  border-top: 1px solid #e8e8e8;\n  padding: 10px 16px;\n  text-align: right;\n  background: #fff;\n}\n.select-count {\n  font-size: 13px;\n  font-weight: 600;\n  color: #40a9ff;\n}\n</style>\n\n"],"sourceRoot":"src/views/my-components/rbac"}]}