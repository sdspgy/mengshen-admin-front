{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/thread-loader/dist/cjs.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/notice/notice.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/notice/notice.vue","mtime":1574132205000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getNoticeListData, addNotice as _addNotice, deleteNotice as _deleteNotice, editNotice as _editNotice } from \"@/api/index\";\nimport util from \"../../../libs/util\";\nexport default {\n  name: \"notice\",\n  data: function data() {\n    var _this = this;\n\n    return {\n      loading: false,\n      page: {\n        per_page: 10,\n        cur_page: 1,\n        total: 0\n      },\n      formTypeStrMaxlength: 6,\n      formTitleMaxlength: 20,\n      notices: [],\n      columns: [{\n        type: \"index\",\n        width: 60,\n        align: \"center\"\n      }, {\n        title: \"公告ID\",\n        key: \"id\",\n        width: 80\n      }, {\n        title: \"发布时间\",\n        key: \"publishTime\",\n        width: 110,\n        align: \"center\",\n        render: function render(h, params) {\n          return h(\"div\", util.Time2DefaultFormat(params.row.publishTime));\n        }\n      }, {\n        title: \"开始时间\",\n        key: \"startTime\",\n        width: 110,\n        align: \"center\",\n        render: function render(h, params) {\n          return h(\"div\", util.Time2DefaultFormat(params.row.startTime));\n        }\n      }, {\n        title: \"结束时间\",\n        key: \"endTime\",\n        width: 110,\n        align: \"center\",\n        render: function render(h, params) {\n          return h(\"div\", util.Time2DefaultFormat(params.row.endTime));\n        }\n      }, {\n        title: \"跳转\",\n        key: \"frontSkipPos\",\n        width: 80,\n        align: \"center\"\n      }, {\n        title: \"跳转图片\",\n        key: \"skipImg\",\n        width: 110,\n        align: \"center\"\n      }, {\n        title: \"标题\",\n        key: \"title\",\n        width: 80,\n        align: \"center\"\n      }, {\n        title: \"公告类型\",\n        key: \"typeStr\",\n        width: 100,\n        align: \"center\"\n      }, {\n        title: \"优先级\",\n        key: \"priority\",\n        width: 100,\n        align: \"center\"\n      }, {\n        title: \"内容\",\n        key: \"content\",\n        width: 200,\n        align: \"center\"\n      }, {\n        title: \"操作\",\n        key: \"action\",\n        width: 200,\n        align: \"center\",\n        render: function render(h, params) {\n          return h(\"div\", [h(\"Button\", {\n            props: {\n              type: \"info\",\n              size: \"small\"\n            },\n            on: {\n              click: function click() {\n                _this.openEditDialog(params.row);\n              }\n            }\n          }, \"编辑\"), h(\"Button\", {\n            props: {\n              type: \"error\",\n              size: \"small\"\n            },\n            on: {\n              click: function click() {\n                _this.deleteNotice(params.row.id);\n              }\n            }\n          }, \"删除\")]);\n        }\n      }],\n      dialogFormVisible: false,\n      dialogFormTitle: '',\n      isEdit: false,\n      form: {\n        id: -1,\n        title: '',\n        typeStr: '',\n        priority: '',\n        titleImg: '',\n        adImg: '',\n        duration: [],\n        content: '',\n        frontSkipPos: '',\n        skipImg: ''\n      },\n      disabledDate: {\n        disabledDate: function disabledDate(date) {\n          return date.getTime() < new Date(new Date().toLocaleDateString()).getTime();\n        }\n      }\n    };\n  },\n  methods: {\n    init: function init() {\n      this.getNotices();\n    },\n    getNotices: function getNotices() {\n      var _this2 = this;\n\n      getNoticeListData(this.page).then(function (res) {\n        _this2.notices = res.data.notices;\n        _this2.page.total = res.data.total;\n      });\n    },\n    openAddDialog: function openAddDialog() {\n      this.clearFrom();\n      this.dialogFormTitle = '添加游戏公告';\n      this.isEdit = false;\n      this.dialogFormVisible = true;\n    },\n    hideAddDialog: function hideAddDialog() {\n      this.clearFrom();\n      this.dialogFormVisible = false;\n      this.getNotices();\n    },\n    openEditDialog: function openEditDialog(scopeRow) {\n      this.clearFrom();\n      this.dialogFormTitle = '修改游戏公告';\n      this.isEdit = true;\n      this.form.id = scopeRow.id;\n      this.dialogFormVisible = true;\n      this.form.title = scopeRow.title;\n      this.form.typeStr = scopeRow.typeStr;\n      this.form.priority = scopeRow.priority;\n      this.form.titleImg = scopeRow.titleImg;\n      this.form.adImg = scopeRow.adImg;\n      this.form.duration.push(new Date(scopeRow.startTime));\n      this.form.duration.push(new Date(scopeRow.endTime));\n      this.form.content = scopeRow.content;\n      this.form.frontSkipPos = scopeRow.frontSkipPos;\n      this.form.skipImg = scopeRow.skipImg;\n    },\n    clearFrom: function clearFrom() {\n      this.form.id = -1;\n      this.form.title = '';\n      this.form.typeStr = '';\n      this.form.priority = '';\n      this.form.titleImg = '';\n      this.form.adImg = '';\n      this.form.duration = [];\n      this.form.content = '';\n      this.form.frontSkipPos = '';\n      this.form.skipImg = '';\n    },\n    checkFrom: function checkFrom() {\n      var _this3 = this;\n\n      if (this.form.duration.length !== 2) {\n        this.$Message.error('请选择时间');\n        return false;\n      }\n\n      if (!this.form.title || !this.form.typeStr || !this.form.priority || !this.form.content || !this.form.frontSkipPos) {\n        this.$Message.error('参数异常');\n        return false;\n      }\n\n      if (this.form.title.length > 20 || this.form.typeStr.length > 6) {\n        this.$Message.error('长度过长');\n        return false;\n      }\n\n      this.form.duration.forEach(function (item, index) {\n        _this3.form.duration[index] = item.getTime();\n      });\n      return true;\n    },\n    addNotice: function addNotice() {\n      var _this4 = this;\n\n      if (!this.checkFrom()) {\n        return;\n      }\n\n      _addNotice(this.form).then(function (res) {\n        _this4.hideAddDialog();\n\n        if (res.status === 200) {\n          _this4.$Message.success('添加成功');\n        }\n      });\n    },\n    editNotice: function editNotice() {\n      var _this5 = this;\n\n      _editNotice(this.form).then(function (res) {\n        _this5.hideAddDialog();\n\n        if (res.status === 200) {\n          _this5.$Message.success('修改成功');\n        }\n      });\n    },\n    deleteNotice: function deleteNotice(id) {\n      var _this6 = this;\n\n      _deleteNotice({\n        id: id\n      }).then(function (res) {\n        if (res.status === 200) {\n          _this6.$Message.success('删除成功');\n        }\n\n        _this6.getNotices();\n      });\n    },\n    changePage: function changePage(v) {\n      this.page.cur_page = v;\n      this.getNotices();\n    },\n    changePageSize: function changePageSize(v) {\n      this.page.per_page = v;\n      this.getNotices();\n    }\n  },\n  mounted: function mounted() {\n    this.init();\n  }\n};",null]}