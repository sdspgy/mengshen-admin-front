{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/own-space/own-space.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/own-space/own-space.vue","mtime":1574132205000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { userInfoEdit } from \"@/api/index\";\nimport uploadPicThumb from \"@/views/my-components/rbac/upload-pic-thumb\";\nimport checkPassword from \"@/views/my-components/rbac/check-password\";\nimport Cookies from \"js-cookie\";\nexport default {\n  components: {\n    uploadPicThumb: uploadPicThumb,\n    checkPassword: checkPassword\n  },\n  name: \"ownspace_index\",\n  data: function data() {\n    return {\n      area: 86,\n      userForm: {\n        id: \"\",\n        avatar: \"\",\n        username: \"\",\n        sex: \"\",\n        mobile: \"\",\n        email: \"\",\n        status: \"\",\n        type: \"\",\n        typeTxt: \"\",\n        address: \"\",\n        addressArray: []\n      },\n      codeError: \"\",\n      initPhone: \"\",\n      initEmail: \"\",\n      saveLoading: false,\n      sending: false,\n      jumping: false,\n      currMenu: \"基本信息\",\n      dictSex: this.$store.state.dict.sex\n    };\n  },\n  methods: {\n    init: function init() {\n      var v = JSON.parse(Cookies.get(\"userInfo\")); // 转换null为\"\"\n\n      for (var attr in v) {\n        if (v[attr] == null) {\n          v[attr] = \"\";\n        }\n      }\n\n      var str = JSON.stringify(v);\n      var userInfo = JSON.parse(str);\n      userInfo.addressArray = [];\n      this.userForm = userInfo;\n      this.$refs.uploadThumb.setData(userInfo.avatar);\n\n      if (userInfo.address) {\n        this.userForm.address = userInfo.address;\n        this.userForm.addressArray = JSON.parse(userInfo.address);\n      }\n\n      if (this.userForm.type == 0) {\n        this.userForm.typeTxt = \"普通用户\";\n      } else if (this.userForm.type == 1) {\n        this.userForm.typeTxt = \"管理员\";\n      }\n    },\n    changePass: function changePass() {\n      this.$router.push({\n        name: \"change_pass\"\n      });\n    },\n    changeMenu: function changeMenu(v) {\n      this.currMenu = v;\n    },\n    saveEdit: function saveEdit() {\n      var _this = this;\n\n      this.saveLoading = true;\n      var params = this.userForm;\n      delete params.roles;\n      userInfoEdit(params).then(function (res) {\n        _this.saveLoading = false;\n\n        if (res.success) {\n          _this.$Message.success(\"保存成功\"); // 更新用户信息\n\n\n          Cookies.set(\"userInfo\", _this.userForm); // 更新头像\n\n          _this.$store.commit(\"setAvatarPath\", _this.userForm.avatar);\n        }\n      });\n    },\n    changeAddress: function changeAddress() {\n      this.userForm.address = JSON.stringify(this.userForm.addressArray);\n    }\n  },\n  mounted: function mounted() {\n    this.init();\n  }\n};",{"version":3,"sources":["own-space.vue"],"names":[],"mappings":"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","sourcesContent":["<style lang=\"less\" scoped>\n@import \"./own-space.less\";\n</style>\n\n<template>\n  <div class=\"own-space\">\n    <Card class=\"own-space-new\">\n      <div class=\"own-wrap\">\n        <div style=\"width:240px\">\n          <Menu active-name=\"基本信息\" theme=\"light\" @on-select=\"changeMenu\">\n            <MenuItem name=\"基本信息\">基本信息</MenuItem>\n            <MenuItem name=\"安全设置\">安全设置</MenuItem>\n          </Menu>\n        </div>\n        <div style=\"padding: 8px 40px;width:100%\">\n          <div class=\"title\">{{currMenu}}</div>\n          <div>\n            <div v-show=\"currMenu=='基本信息'\">\n              <Form ref=\"userForm\" :model=\"userForm\" :label-width=\"90\" label-position=\"left\">\n                <FormItem label=\"用户头像：\">\n                  <upload-pic-thumb\n                    @on-change=\"userForm.avatar=$event\"\n                    :multiple=\"false\"\n                    ref=\"uploadThumb\"\n                  ></upload-pic-thumb>\n                </FormItem>\n                <FormItem label=\"昵称：\" prop=\"nickName\">\n                  <Input v-model=\"userForm.nickName\" style=\"width: 250px\" />\n                </FormItem>\n                <FormItem label=\"电话：\" prop=\"mobile\">\n                  <Input v-model=\"userForm.mobile\" style=\"width: 250px\" />\n                </FormItem>\n                <FormItem label=\"邮箱：\" prop=\"email\">\n                  <Input v-model=\"userForm.email\" style=\"width: 250px\" />\n                </FormItem>\n                <FormItem label=\"性别：\">\n                  <RadioGroup v-model=\"userForm.sex\">\n                    <Radio v-for=\"(item, i) in dictSex\" :key=\"i\" :label=\"item.value\">{{item.title}}</Radio>\n                  </RadioGroup>\n                </FormItem>\n                <FormItem label=\"个人简介：\" prop=\"description\">\n                  <Input\n                    v-model=\"userForm.description\"\n                    type=\"textarea\"\n                    style=\"width: 250px\"\n                    :autosize=\"{minRows: 3,maxRows: 5}\"\n                    placeholder=\"个人简介\"\n                  ></Input>\n                </FormItem>\n                <FormItem label=\"国家/地区：\">\n                  <Select v-model=\"area\" style=\"width: 250px\">\n                    <Option :value=\"86\">中国</Option>\n                  </Select>\n                </FormItem>\n                <FormItem label=\"所在省市：\">\n                  <al-cascader\n                    v-model=\"userForm.addressArray\"\n                    @on-change=\"changeAddress\"\n                    data-type=\"code\"\n                    level=\"2\"\n                    style=\"width:250px\"\n                  />\n                </FormItem>\n                <FormItem label=\"街道地址：\" prop=\"street\">\n                  <Input v-model=\"userForm.street\" style=\"width: 250px\" />\n                </FormItem>\n                <FormItem label=\"用户类型：\">\n                  <span>{{ userForm.typeTxt }}</span>\n                </FormItem>\n                <FormItem label=\"注册时间：\">\n                  <span>{{ userForm.createTime }}</span>\n                </FormItem>\n                <FormItem>\n                  <Button\n                    type=\"primary\"\n                    style=\"width: 100px;margin-right:5px\"\n                    :loading=\"saveLoading\"\n                    @click=\"saveEdit\"\n                  >保存</Button>\n                </FormItem>\n              </Form>\n            </div>\n            <div v-show=\"currMenu=='安全设置'\" class=\"safe\">\n              <div class=\"item\">\n                <div>\n                  <div class=\"title\">账户密码</div>\n                  <div v-if=\"userForm.passStrength\" class=\"desc\">\n                    当前密码强度：\n                    <span\n                      v-if=\"userForm.passStrength=='弱'\"\n                      class=\"red\"\n                    >{{userForm.passStrength}}</span>\n                    <span v-if=\"userForm.passStrength=='中'\" class=\"middle\">{{userForm.passStrength}}</span>\n                    <span v-if=\"userForm.passStrength=='强'\" class=\"green\">{{userForm.passStrength}}</span>\n                  </div>\n                </div>\n                <div>\n                  <a @click=\"changePass\">修改</a>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Card>\n  </div>\n</template>\n\n<script>\nimport {\n  userInfoEdit,\n} from \"@/api/index\";\nimport uploadPicThumb from \"@/views/my-components/rbac/upload-pic-thumb\";\nimport checkPassword from \"@/views/my-components/rbac/check-password\";\nimport Cookies from \"js-cookie\";\nexport default {\n  components: {\n    uploadPicThumb,\n    checkPassword\n  },\n  name: \"ownspace_index\",\n  data() {\n    return {\n      area: 86,\n      userForm: {\n        id: \"\",\n        avatar: \"\",\n        username: \"\",\n        sex: \"\",\n        mobile: \"\",\n        email: \"\",\n        status: \"\",\n        type: \"\",\n        typeTxt: \"\",\n        address: \"\",\n        addressArray: []\n      },\n      codeError: \"\",\n      initPhone: \"\",\n      initEmail: \"\",\n      saveLoading: false,\n      sending: false,\n      jumping: false,\n      currMenu: \"基本信息\",\n      dictSex: this.$store.state.dict.sex\n    };\n  },\n  methods: {\n    init() {\n      let v = JSON.parse(Cookies.get(\"userInfo\"));\n      // 转换null为\"\"\n      for (let attr in v) {\n        if (v[attr] == null) {\n          v[attr] = \"\";\n        }\n      }\n      let str = JSON.stringify(v);\n      let userInfo = JSON.parse(str);\n      userInfo.addressArray = [];\n      this.userForm = userInfo;\n      this.$refs.uploadThumb.setData(userInfo.avatar);\n      if (userInfo.address) {\n        this.userForm.address = userInfo.address;\n        this.userForm.addressArray = JSON.parse(userInfo.address);\n      }\n      if (this.userForm.type == 0) {\n        this.userForm.typeTxt = \"普通用户\";\n      } else if (this.userForm.type == 1) {\n        this.userForm.typeTxt = \"管理员\";\n      }\n    },\n    changePass() {\n      this.$router.push({\n        name: \"change_pass\"\n      });\n    },\n    changeMenu(v) {\n      this.currMenu = v;\n    },\n    saveEdit() {\n      this.saveLoading = true;\n      let params = this.userForm;\n      delete params.roles;\n      userInfoEdit(params).then(res => {\n        this.saveLoading = false;\n        if (res.success) {\n          this.$Message.success(\"保存成功\");\n          // 更新用户信息\n          Cookies.set(\"userInfo\", this.userForm);\n          // 更新头像\n          this.$store.commit(\"setAvatarPath\", this.userForm.avatar);\n        }\n      });\n    },\n    changeAddress() {\n      this.userForm.address = JSON.stringify(this.userForm.addressArray);\n    },\n  },\n  mounted() {\n    this.init();\n  }\n};\n</script>\n"],"sourceRoot":"src/views/own-space"}]}