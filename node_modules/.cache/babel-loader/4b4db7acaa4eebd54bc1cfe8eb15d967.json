{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/thread-loader/dist/cjs.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/libs/axios.js","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/libs/axios.js","mtime":1575864330358},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from 'axios';\nimport { getStore, setStore } from './storage';\nimport { router } from '../router/index';\nimport { Message } from 'iview';\nimport Cookies from 'js-cookie';\n/** 统一请求路径前缀**/\n\nexport var basePath = '/baobao-admin'; // 超时设定\n\naxios.defaults.timeout = 15000;\naxios.interceptors.request.use(function (config) {\n  return config;\n}, function (err) {\n  Message.error('请求超时');\n  return Promise.resolve(err);\n}); // http response 拦截器\n\naxios.interceptors.response.use(function (response) {\n  if (response.data instanceof Blob) {\n    return response;\n  }\n\n  var data = response.data; // 根据返回的code值来做不同的处理(和后端约定)\n\n  switch (data.code) {\n    case 401:\n      // 未登录 清除已登录状态\n      Cookies.set('userInfo', '');\n      setStore('accessToken', '');\n      router.push('/login');\n      break;\n\n    case 403:\n      // 没有权限\n      if (data.message !== null) {\n        Message.error(data.message);\n      } else {\n        Message.error(\"未知错误\");\n      }\n\n      break;\n\n    case 500:\n      // 错误\n      if (data.message !== null) {\n        Message.error(data.message);\n      } else {\n        Message.error(\"未知错误\");\n      }\n\n      break;\n\n    case 505:\n      //未设置操作服务器\n      router.push('/baobao/sys/serverManage');\n      break;\n\n    default:\n      return data;\n  }\n\n  return data;\n}, function (err) {\n  // 返回状态码不为200时候的错误处理\n  Message.error(err.toString());\n  return Promise.resolve(err);\n});\nexport var getRequest = function getRequest(url, params) {\n  var accessToken = getStore('accessToken');\n  return axios({\n    method: 'get',\n    url: \"\".concat(basePath).concat(url),\n    params: params,\n    headers: {\n      'accessToken': accessToken\n    }\n  });\n};\nexport var postRequest = function postRequest(url, params) {\n  var accessToken = getStore(\"accessToken\");\n  return axios({\n    method: 'post',\n    url: \"\".concat(basePath).concat(url),\n    data: params,\n    transformRequest: [function (data) {\n      var ret = '';\n\n      for (var it in data) {\n        ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\n      }\n\n      return ret;\n    }],\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n      'accessToken': accessToken\n    }\n  });\n};\nexport var postReq = function postReq(url, params) {\n  var accessToken = getStore(\"accessToken\");\n  return axios({\n    method: 'get',\n    url: \"\".concat(basePath).concat(url),\n    data: params,\n    transformRequest: [function (data) {\n      var ret = '';\n\n      for (var it in data) {\n        ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\n      }\n\n      return ret;\n    }],\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n      'accessToken': accessToken\n    }\n  });\n};\nexport var putRequest = function putRequest(url, params) {\n  var accessToken = getStore(\"accessToken\");\n  return axios({\n    method: 'put',\n    url: \"\".concat(basePath).concat(url),\n    data: params,\n    transformRequest: [function (data) {\n      var ret = '';\n\n      for (var it in data) {\n        ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\n      }\n\n      return ret;\n    }],\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n      'accessToken': accessToken\n    }\n  });\n};\nexport var deleteRequest = function deleteRequest(url, params) {\n  var accessToken = 'accessToken';\n  return axios({\n    method: 'delete',\n    url: \"\".concat(basePath).concat(url),\n    params: params,\n    headers: {\n      'accessToken': accessToken\n    }\n  });\n};\nexport var uploadFileRequest = function uploadFileRequest(url, params) {\n  var accessToken = getStore('accessToken');\n  return axios({\n    method: 'post',\n    url: \"\".concat(basePath).concat(url),\n    params: params,\n    headers: {\n      'accessToken': accessToken\n    }\n  });\n};\n/** 游戏*/\n\nexport var getRequestWithGame = function getRequestWithGame(url, params) {\n  var accessToken = getStore('accessToken');\n  return axios({\n    method: 'get',\n    url: \"\".concat(basePath).concat(url),\n    params: params,\n    headers: {\n      'accessToken': accessToken\n    }\n  });\n};\nexport var postRequestWithGame = function postRequestWithGame(url, params) {\n  var accessToken = getStore(\"accessToken\");\n  return axios({\n    method: 'post',\n    url: \"\".concat(basePath).concat(url),\n    data: params,\n    transformRequest: [function (data) {\n      var ret = '';\n\n      for (var it in data) {\n        ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\n      }\n\n      return ret;\n    }],\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n      'accessToken': accessToken\n    }\n  });\n};\nexport var postRequestWithJson = function postRequestWithJson(url, params) {\n  var accessToken = getStore(\"accessToken\");\n  return axios({\n    method: 'post',\n    url: \"\".concat(basePath).concat(url),\n    data: params,\n    transformRequest: [function (data, headers) {\n      if (headers['Content-type'] === 'multipart/form-data') {\n        return data;\n      } else {\n        return JSON.stringify(data);\n      }\n    }],\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8',\n      'accessToken': accessToken\n    }\n  });\n};\nexport var postRequestWithUpload = function postRequestWithUpload(url, params) {\n  var accessToken = getStore(\"accessToken\");\n  return axios({\n    method: 'post',\n    url: \"\".concat(basePath).concat(url),\n    data: params,\n    transformRequest: [function (data, headers) {\n      return data;\n    }],\n    headers: {\n      'Content-Type': 'multipart/form-data',\n      'accessToken': accessToken\n    }\n  });\n};\nexport var getRequestWithBlob = function getRequestWithBlob(url, params) {\n  var ret = '';\n\n  for (var it in params) {\n    ret += encodeURIComponent(it) + '=' + encodeURIComponent(params[it]) + '&';\n  }\n\n  var accessToken = getStore(\"accessToken\");\n  return axios({\n    method: 'get',\n    url: \"\".concat(basePath).concat(url, \"?\").concat(ret),\n    responseType: 'blob',\n    timeout: 500000,\n    headers: {\n      'accessToken': accessToken\n    }\n  });\n};",null]}