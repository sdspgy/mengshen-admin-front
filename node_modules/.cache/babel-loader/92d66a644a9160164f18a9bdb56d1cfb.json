{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/my-components/rbac/upload-pic-input.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/my-components/rbac/upload-pic-input.vue","mtime":1574132205000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { uploadFile } from \"@/api/index\";\nexport default {\n  name: \"uploadPicInput\",\n  props: {\n    value: String,\n    size: String,\n    placeholder: {\n      type: String,\n      default: \"可输入图片链接\"\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    readonly: {\n      type: Boolean,\n      default: false\n    },\n    maxlength: Number,\n    icon: {\n      type: String,\n      default: \"ios-cloud-upload-outline\"\n    }\n  },\n  data: function data() {\n    return {\n      accessToken: {},\n      currentValue: this.value,\n      loading: false,\n      viewImage: false,\n      uploadFileUrl: uploadFile\n    };\n  },\n  methods: {\n    init: function init() {\n      this.accessToken = {\n        accessToken: this.getStore(\"accessToken\")\n      };\n    },\n    handleFormatError: function handleFormatError(file) {\n      this.loading = false;\n      this.$Notice.warning({\n        title: \"不支持的文件格式\",\n        desc: \"所选文件‘ \" + file.name + \" ’格式不正确, 请选择 .jpg .jpeg .png .gif .bmp格式文件\"\n      });\n    },\n    handleMaxSize: function handleMaxSize(file) {\n      this.loading = false;\n      this.$Notice.warning({\n        title: \"文件大小过大\",\n        desc: \"所选文件‘ \" + file.name + \" ’大小过大, 不得超过 5M.\"\n      });\n    },\n    beforeUpload: function beforeUpload() {\n      this.loading = true;\n      return true;\n    },\n    handleSuccess: function handleSuccess(res, file) {\n      this.loading = false;\n\n      if (res.success) {\n        file.url = res.result;\n        this.currentValue = res.result;\n        this.$emit(\"input\", this.currentValue);\n        this.$emit(\"on-change\", this.currentValue);\n      } else {\n        this.$Message.error(res.message);\n      }\n    },\n    handleError: function handleError(error, file, fileList) {\n      this.loading = false;\n      this.$Message.error(error.toString());\n    },\n    handleChange: function handleChange(v) {\n      this.$emit(\"input\", this.currentValue);\n      this.$emit(\"on-change\", this.currentValue);\n    },\n    setCurrentValue: function setCurrentValue(value) {\n      if (value === this.currentValue) {\n        return;\n      }\n\n      this.currentValue = value;\n      this.$emit(\"on-change\", this.currentValue);\n    }\n  },\n  watch: {\n    value: function value(val) {\n      this.setCurrentValue(val);\n    }\n  },\n  created: function created() {\n    this.init();\n  }\n};",{"version":3,"sources":["upload-pic-input.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div style=\"display: flex;\">\n    <Upload\n            :action=\"uploadFileUrl\"\n            :headers=\"accessToken\"\n            :on-success=\"handleSuccess\"\n            :on-error=\"handleError\"\n            :format=\"['jpg','jpeg','png','gif','bmp']\"\n            accept=\".jpg, .jpeg, .png, .gif, .bmp\"\n            :max-size=\"5120\"\n            :on-format-error=\"handleFormatError\"\n            :on-exceeded-size=\"handleMaxSize\"\n            :before-upload=\"beforeUpload\"\n            :show-upload-list=\"false\"\n            ref=\"up\"\n            class=\"upload\">\n      <Button :loading=\"loading\" :size=\"size\" :disabled=\"disabled\" :icon=\"icon\">上传图片</Button>\n    </Upload>\n    <Poptip trigger=\"hover\" title=\"图片预览\" placement=\"right-start\" width=\"350\">\n      <Input\n        v-model=\"currentValue\"\n        @on-change=\"handleChange\"\n        :placeholder=\"placeholder\"\n        :size=\"size\"\n        :disabled=\"disabled\"\n        :readonly=\"readonly\"\n        :maxlength=\"maxlength\"\n        clearable\n      />\n      <div slot=\"content\">\n        <img :src=\"currentValue\" alt=\"无效的图片链接\" style=\"width: 100%;margin: auto;display: block;\">\n        <a @click=\"viewImage=true\" style=\"margin-top:5px;text-align:right;display:block\">查看大图</a>\n      </div>\n    </Poptip>\n\n\n    <Modal title=\"图片预览\" v-model=\"viewImage\" :styles=\"{top: '30px'}\" draggable>\n      <img :src=\"currentValue\" alt=\"无效的图片链接\" style=\"width: 100%;margin: 0 auto;display: block;\">\n      <div slot=\"footer\">\n        <Button @click=\"viewImage=false\">关闭</Button>\n      </div>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport { uploadFile } from \"@/api/index\";\nexport default {\n  name: \"uploadPicInput\",\n  props: {\n    value: String,\n    size: String,\n    placeholder: {\n      type: String,\n      default: \"可输入图片链接\"\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    readonly: {\n      type: Boolean,\n      default: false\n    },\n    maxlength: Number,\n    icon: {\n      type: String,\n      default: \"ios-cloud-upload-outline\"\n    }\n  },\n  data() {\n    return {\n      accessToken: {},\n      currentValue: this.value,\n      loading: false,\n      viewImage: false,\n      uploadFileUrl: uploadFile\n    };\n  },\n  methods: {\n    init() {\n      this.accessToken = {\n        accessToken: this.getStore(\"accessToken\")\n      };\n    },\n    handleFormatError(file) {\n      this.loading = false;\n      this.$Notice.warning({\n        title: \"不支持的文件格式\",\n        desc:\n          \"所选文件‘ \" +\n          file.name +\n          \" ’格式不正确, 请选择 .jpg .jpeg .png .gif .bmp格式文件\"\n      });\n    },\n    handleMaxSize(file) {\n      this.loading = false;\n      this.$Notice.warning({\n        title: \"文件大小过大\",\n        desc: \"所选文件‘ \" + file.name + \" ’大小过大, 不得超过 5M.\"\n      });\n    },\n    beforeUpload() {\n      this.loading = true;\n      return true;\n    },\n    handleSuccess(res, file) {\n      this.loading = false;\n      if (res.success) {\n        file.url = res.result;\n        this.currentValue = res.result;\n        this.$emit(\"input\", this.currentValue);\n        this.$emit(\"on-change\", this.currentValue);\n      } else {\n        this.$Message.error(res.message);\n      }\n    },\n    handleError(error, file, fileList) {\n      this.loading = false;\n      this.$Message.error(error.toString());\n    },\n    handleChange(v) {\n      this.$emit(\"input\", this.currentValue);\n      this.$emit(\"on-change\", this.currentValue);\n    },\n    setCurrentValue(value) {\n      if (value === this.currentValue) {\n        return;\n      }\n      this.currentValue = value;\n      this.$emit(\"on-change\", this.currentValue);\n    }\n  },\n  watch: {\n    value(val) {\n      this.setCurrentValue(val);\n    }\n  },\n  created() {\n    this.init();\n  }\n};\n</script>\n\n<style lang=\"less\">\n.upload {\n  display: inline-block;\n  margin-left: 10px;\n}\n</style>\n\n"],"sourceRoot":"src/views/my-components/rbac"}]}