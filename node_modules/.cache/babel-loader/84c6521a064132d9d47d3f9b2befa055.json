{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/thread-loader/dist/cjs.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/own-space/own-space.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/own-space/own-space.vue","mtime":1574132205000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { userInfoEdit } from \"@/api/index\";\nimport uploadPicThumb from \"@/views/my-components/rbac/upload-pic-thumb\";\nimport checkPassword from \"@/views/my-components/rbac/check-password\";\nimport Cookies from \"js-cookie\";\nexport default {\n  components: {\n    uploadPicThumb: uploadPicThumb,\n    checkPassword: checkPassword\n  },\n  name: \"ownspace_index\",\n  data: function data() {\n    return {\n      area: 86,\n      userForm: {\n        id: \"\",\n        avatar: \"\",\n        username: \"\",\n        sex: \"\",\n        mobile: \"\",\n        email: \"\",\n        status: \"\",\n        type: \"\",\n        typeTxt: \"\",\n        address: \"\",\n        addressArray: []\n      },\n      codeError: \"\",\n      initPhone: \"\",\n      initEmail: \"\",\n      saveLoading: false,\n      sending: false,\n      jumping: false,\n      currMenu: \"基本信息\",\n      dictSex: this.$store.state.dict.sex\n    };\n  },\n  methods: {\n    init: function init() {\n      var v = JSON.parse(Cookies.get(\"userInfo\")); // 转换null为\"\"\n\n      for (var attr in v) {\n        if (v[attr] == null) {\n          v[attr] = \"\";\n        }\n      }\n\n      var str = JSON.stringify(v);\n      var userInfo = JSON.parse(str);\n      userInfo.addressArray = [];\n      this.userForm = userInfo;\n      this.$refs.uploadThumb.setData(userInfo.avatar);\n\n      if (userInfo.address) {\n        this.userForm.address = userInfo.address;\n        this.userForm.addressArray = JSON.parse(userInfo.address);\n      }\n\n      if (this.userForm.type == 0) {\n        this.userForm.typeTxt = \"普通用户\";\n      } else if (this.userForm.type == 1) {\n        this.userForm.typeTxt = \"管理员\";\n      }\n    },\n    changePass: function changePass() {\n      this.$router.push({\n        name: \"change_pass\"\n      });\n    },\n    changeMenu: function changeMenu(v) {\n      this.currMenu = v;\n    },\n    saveEdit: function saveEdit() {\n      var _this = this;\n\n      this.saveLoading = true;\n      var params = this.userForm;\n      delete params.roles;\n      userInfoEdit(params).then(function (res) {\n        _this.saveLoading = false;\n\n        if (res.success) {\n          _this.$Message.success(\"保存成功\"); // 更新用户信息\n\n\n          Cookies.set(\"userInfo\", _this.userForm); // 更新头像\n\n          _this.$store.commit(\"setAvatarPath\", _this.userForm.avatar);\n        }\n      });\n    },\n    changeAddress: function changeAddress() {\n      this.userForm.address = JSON.stringify(this.userForm.addressArray);\n    }\n  },\n  mounted: function mounted() {\n    this.init();\n  }\n};",null]}