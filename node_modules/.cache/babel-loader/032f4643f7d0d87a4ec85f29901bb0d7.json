{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/cdkey/cdkey.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/cdkey/cdkey.vue","mtime":1574132205000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getOperation as _getOperation, getItemList as _getItemList, addcdkey as _addcdkey, getCDkeys, getUseUsers, exportExcel, deleteCDkey as _deleteCDkey } from \"@/api/index\";\nimport util from \"../../../libs/util\";\nexport default {\n  name: 'cdkey',\n  mounted: function mounted() {\n    this.getItemList();\n    this.getOperation();\n  },\n  data: function data() {\n    var _this = this;\n\n    return {\n      columnsWithOperation: [{\n        type: \"index\",\n        width: 60,\n        align: \"center\"\n      }, {\n        title: \"生成时间\",\n        key: \"createTime\",\n        width: 180,\n        align: \"center\",\n        render: function render(h, params) {\n          return h(\"div\", util.Time2DefaultFormat(params.row.createTime));\n        }\n      }, {\n        title: \"开始时间\",\n        key: \"startTime\",\n        width: 180,\n        align: \"center\",\n        render: function render(h, params) {\n          return h(\"div\", util.Time2DefaultFormat(params.row.startTime));\n        }\n      }, {\n        title: \"结束时间\",\n        key: \"endTime\",\n        width: 180,\n        align: \"center\",\n        render: function render(h, params) {\n          return h(\"div\", util.Time2DefaultFormat(params.row.endTime));\n        }\n      }, {\n        title: \"道具内容\",\n        key: \"rewards\",\n        width: 200,\n        align: \"center\",\n        render: function render(h, params) {\n          return h(\"div\", _this.formatReward(params.row.rewards));\n        }\n      }, {\n        title: \"生成数量\",\n        key: \"createNum\",\n        width: 120,\n        align: \"center\",\n        render: function render(h, params) {\n          var discardNum = \"\";\n\n          if (params.row.discardNum && params.row.discardNum > 0) {\n            discardNum = \"(-\".concat(params.row.discardNum, \")\");\n          }\n\n          return h(\"div\", params.row.createNum + discardNum);\n        }\n      }, {\n        title: \"可使用次数\",\n        key: \"totalNum\",\n        width: 120,\n        align: \"center\"\n      }, {\n        title: \"渠道\",\n        key: \"channel\",\n        width: 120,\n        align: \"center\"\n      }, {\n        title: \"操作\",\n        key: \"action\",\n        width: 100,\n        align: \"center\",\n        render: function render(h, params) {\n          return h(\"div\", [h(\"Button\", {\n            props: {\n              type: \"primary\",\n              size: \"small\"\n            },\n            on: {\n              click: function click() {\n                _this.openCDkeyDialog(params.row);\n              }\n            }\n          }, \"查看\")]);\n        }\n      }],\n      columnsWithRewards: [{\n        type: \"index\",\n        width: 60,\n        align: \"center\"\n      }, {\n        title: \"道具ID\",\n        key: \"id\",\n        width: 120,\n        align: \"center\"\n      }, {\n        title: \"道具名称\",\n        key: \"id\",\n        width: 120,\n        align: \"center\",\n        render: function render(h, params) {\n          return h(\"div\", _this.formatItem(params.row.id));\n        }\n      }, {\n        title: \"道具数量\",\n        key: \"num\",\n        width: 120,\n        align: \"center\"\n      }, {\n        title: \"操作\",\n        key: \"action\",\n        width: 100,\n        align: \"center\",\n        render: function render(h, params) {\n          return h(\"div\", [h(\"Button\", {\n            props: {\n              type: \"error\",\n              size: \"small\"\n            },\n            on: {\n              click: function click() {\n                _this.delReward(params.index);\n              }\n            }\n          }, \"删除\")]);\n        }\n      }],\n      columnsWithCDkey: [{\n        type: \"index\",\n        width: 60,\n        align: \"center\"\n      }, {\n        title: \"兑换码ID\",\n        key: \"key\",\n        width: 110,\n        align: \"center\"\n      }, {\n        title: \"领取状态\",\n        key: \"useNum\",\n        width: 120,\n        align: \"center\",\n        render: function render(h, params) {\n          return h(\"div\", params.row.useNum > 0 ? '已领取' : '未领取');\n        }\n      }, {\n        title: \"领取时间\",\n        key: \"fistUseTime\",\n        width: 120,\n        align: \"center\",\n        render: function render(h, params) {\n          return h(\"div\", params.row.fistUseTime ? util.Time2DefaultFormat(params.row.fistUseTime) : '未领取');\n        }\n      }, {\n        title: \"用户ID\",\n        key: \"fistUsrUserId\",\n        width: 120,\n        align: \"center\"\n      }, {\n        title: \"已使用次数\",\n        key: \"useNum\",\n        width: 110,\n        align: \"center\"\n      }, {\n        title: \"操作\",\n        key: \"action\",\n        width: 200,\n        align: \"center\",\n        render: function render(h, params) {\n          var deleteButton = '';\n\n          if (_this.$route.meta.permTypes.includes('delete')) {\n            deleteButton = h(\"Button\", {\n              props: {\n                type: \"error\",\n                size: \"small\"\n              },\n              on: {\n                click: function click() {\n                  _this.deleteCDkey(params.row);\n                }\n              }\n            }, \"删除\");\n          }\n\n          return h(\"div\", [h(\"Button\", {\n            props: {\n              type: \"primary\",\n              size: \"small\"\n            },\n            on: {\n              click: function click() {\n                _this.openSeeUserDialog(params.row.key);\n              }\n            }\n          }, \"使用详情\"), deleteButton]);\n        }\n      }],\n      columnsWithUsers: [{\n        type: \"index\",\n        width: 60,\n        align: \"center\"\n      }, {\n        title: \"兑换码\",\n        key: \"key\",\n        width: 110,\n        align: \"center\"\n      }, {\n        title: \"用户ID\",\n        key: \"userId\",\n        width: 110,\n        align: \"center\"\n      }, {\n        title: \"领取时间\",\n        key: \"useTime\",\n        width: 110,\n        align: \"center\",\n        render: function render(h, params) {\n          return h(\"div\", util.Time2DefaultFormat(params.row.useTime));\n        }\n      }],\n\n      /** 添加礼包对话框显示 */\n      dialogFormVisible: false,\n\n      /** 礼包查看操作对话框显示 */\n      dialogSeeVisible: false,\n\n      /** 查看所有用户数据 */\n      dialogSeeUserVisible: false,\n      dialogExportExcelVisible: false,\n      downloadDataLimit: 50000,\n      formLabelWidth: '120px',\n      page: {\n        operation: {\n          per_page: 10,\n          cur_page: 1,\n          total: 0,\n          channel: ''\n        },\n        cdkey: {\n          pagesize: 10,\n          currentpage: 1,\n          total: 0,\n          currentOperation: {}\n        },\n        user: {\n          pagesize: 10,\n          currentpage: 1,\n          total: 0,\n          key: ''\n        }\n      },\n\n      /** 根据筛选条件后所有礼包数据 */\n      operations: [],\n\n      /** 查看礼包，当前礼包内的所有cdkey数据 */\n      cdkeys: [],\n\n      /** 查看cdkey下所有使用用户 */\n      users: [],\n\n      /** 提交到后端的添加数据 */\n      isDIY: false,\n      form: {\n        diyCdk: '',\n        formTime: [],\n        rewards: [],\n        createNum: '',\n        totalNum: '',\n        channel: ''\n      },\n\n      /** 道具下拉框，需要请求后端获取道具数据 */\n      itemType: 0,\n      itemList: [],\n      itemLists: [],\n      itemData: {\n        itemList: {},\n        decoShopList: {},\n        staffList: {},\n        goodList: {}\n      },\n      itemTypes: [{\n        type: 0,\n        label: '货币'\n      }, {\n        type: 1,\n        label: '道具'\n      }, {\n        type: 2,\n        label: '家具'\n      }, {\n        type: 3,\n        label: '员工'\n      }, {\n        type: 4,\n        label: '货物'\n      }],\n      addItemId: '',\n      addItemNum: '',\n\n      /** 时间选择禁止选择当天前的日期 */\n      expireTimeOption: {\n        disabledDate: function disabledDate(date) {\n          return date.getTime() < new Date(new Date().toLocaleDateString()).getTime();\n        }\n      }\n    };\n  },\n  methods: {\n    getItemList: function getItemList() {\n      var _this2 = this;\n\n      _getItemList().then(function (res) {\n        if (res.status === 200) {\n          _this2.itemData.decoShopList = res.data.decoShopList;\n          _this2.itemData.itemList = res.data.itemList;\n          _this2.itemData.staffList = res.data.staffList;\n          _this2.itemData.goodList = res.data.goodList;\n          /** 显示奖励时用 */\n\n          _this2.itemLists = [{\n            id: -1,\n            name: '经验'\n          }, {\n            id: -2,\n            name: '黄金'\n          }, {\n            id: -3,\n            name: '钻石'\n          }];\n          res.data.decoShopList.forEach(function (obj) {\n            _this2.itemLists.push({\n              id: obj.id,\n              name: obj.name\n            });\n          });\n          res.data.itemList.forEach(function (obj) {\n            _this2.itemLists.push({\n              id: obj.id,\n              name: obj.name\n            });\n          });\n          res.data.staffList.forEach(function (obj) {\n            _this2.itemLists.push({\n              id: obj.id,\n              name: obj.name\n            });\n          });\n          res.data.goodList.forEach(function (obj) {\n            _this2.itemLists.push({\n              id: obj.id,\n              name: obj.name\n            });\n          });\n        }\n      });\n    },\n    changeItemType: function changeItemType() {\n      this.itemList = [];\n      this.clearAddItem();\n\n      switch (this.itemType) {\n        case 0:\n          this.itemList.push({\n            id: -1,\n            name: '经验'\n          });\n          this.itemList.push({\n            id: -2,\n            name: '黄金'\n          });\n          this.itemList.push({\n            id: -3,\n            name: '钻石'\n          });\n          return;\n\n        case 1:\n          this.itemList = this.itemData.itemList;\n          return;\n\n        case 2:\n          this.itemList = this.itemData.decoShopList;\n          return;\n\n        case 3:\n          this.itemList = this.itemData.staffList;\n          return;\n\n        case 4:\n          this.itemList = this.itemData.goodList;\n      }\n    },\n    queryOperation: function queryOperation() {\n      this.page.operation.currentpage = 1;\n      this.getOperation();\n    },\n    getOperation: function getOperation() {\n      var _this3 = this;\n\n      _getOperation(this.page.operation).then(function (res) {\n        if (res.status === 200) {\n          _this3.operations = res.data.operations;\n          _this3.page.operation.total = res.data.total;\n        }\n      });\n    },\n    handleSizeChange: function handleSizeChange(value) {\n      this.page.operation.per_page = value;\n      this.getOperation();\n    },\n    handleCurrentChange: function handleCurrentChange(value) {\n      this.page.operation.cur_page = value;\n      this.getOperation();\n    },\n    handleCDkeySizeChange: function handleCDkeySizeChange(value) {\n      this.page.cdkey.pagesize = value;\n      this.getCDkey();\n    },\n    handleCDkeyCurrentChange: function handleCDkeyCurrentChange(value) {\n      this.page.cdkey.currentpage = value;\n      this.getCDkey();\n    },\n    handleUserSizeChange: function handleUserSizeChange(value) {\n      this.page.user.pagesize = value;\n      this.getUseUser();\n    },\n    handleUserCurrentChange: function handleUserCurrentChange(value) {\n      this.page.user.currentpage = value;\n      this.getUseUser();\n    },\n    openDialog: function openDialog() {\n      if (this.itemList.length <= 0) {\n        this.getItemList();\n      }\n\n      this.itemType = 0;\n      this.changeItemType();\n      this.form = {\n        diyCdk: '',\n        rewards: [],\n        createNum: '',\n        totalUseNum: '',\n        channel: '',\n        rewardStr: ''\n      };\n      this.dialogFormVisible = true;\n      this.isDIY = false;\n    },\n    openDialogWithDIY: function openDialogWithDIY() {\n      this.openDialog();\n      this.isDIY = true;\n    },\n    hideDialog: function hideDialog() {\n      this.dialogFormVisible = false;\n    },\n    addcdkey: function addcdkey() {\n      var _this4 = this;\n\n      if (!this.form.formTime) {\n        this.$Message.error('请选择时间');\n        return;\n      }\n\n      if (!this.form.rewards || this.form.rewards.length === 0) {\n        this.$Message.error('请添加道具');\n        return;\n      }\n\n      if (!this.form.channel) {\n        this.$Message.error('请输入渠道');\n        return;\n      }\n\n      if (!this.form.createNum) {\n        this.form.createNum = 1;\n      }\n\n      if (!this.form.totalNum) {\n        this.form.totalNum = 1;\n      }\n\n      if (this.isDIY && !this.form.diyCdk) {\n        this.$Message.error('请输入自定义兑换码');\n        return;\n      }\n\n      this.form.formTime.forEach(function (item, index) {\n        _this4.form.formTime[index] = item.getTime();\n      });\n      this.form.rewards.forEach(function (item, index) {\n        _this4.form.rewards[index] = item.id + ',' + item.num;\n      });\n      this.form.rewardStr = this.form.rewards.join(';');\n      this.form.isDiy = this.isDIY;\n      this.hideDialog();\n\n      _addcdkey(this.form).then(function (res) {\n        if (res.status === 200) {\n          if (res.data.error) {\n            _this4.$Message.error(res.data.error);\n\n            return;\n          }\n\n          if (res.data.insertFail) {\n            _this4.$Message.error('兑换码' + res.data.insertFail.slice(0, -1) + '已存在');\n          }\n\n          if (res.data.success > 0) {\n            _this4.$Message.success('成功生成' + res.data.success + '条CDkey');\n          }\n\n          _this4.getOperation();\n        }\n      });\n    },\n    addReward: function addReward() {\n      if (!this.addItemNum || !this.addItemId || this.addItemNum <= 0) {\n        this.$Message.error('请正确添加');\n        return;\n      }\n\n      this.form.rewards.push({\n        id: this.addItemId,\n        num: this.addItemNum\n      });\n      /** 合并相同id >> 暂时可以不用 */\n\n      var newArr = [];\n      this.form.rewards.forEach(function (el) {\n        var result = newArr.findIndex(function (ol) {\n          return el.id === ol.id;\n        });\n\n        if (result !== -1) {\n          newArr[result].num = newArr[result].num + el.num;\n        } else {\n          newArr.push(el);\n        }\n      });\n      this.form.rewards = newArr; // this.form.rewards.forEach(obj => {\n      //   const result = this.itemData.staffList.findIndex(ol => {\n      //     return obj.id === ol.id\n      //   })\n      //   if (result !== -1 && obj.num > 1) {\n      //     this.$message({\n      //       type: 'warning',\n      //       message: `员工${obj.id}的数量超过上限，已重置`\n      //     });\n      //     obj.num = 1;\n      //   }\n      // })\n\n      /** 合并相同id >> end */\n\n      this.clearAddItem();\n    },\n    clearAddItem: function clearAddItem() {\n      this.addItemId = '';\n      this.addItemNum = '';\n    },\n    clearRewards: function clearRewards() {\n      this.form.rewards = [];\n    },\n    delReward: function delReward(index) {\n      this.form.rewards.splice(index, 1);\n    },\n    openCDkeyDialog: function openCDkeyDialog(scopeRow) {\n      this.page.cdkey.currentOperation = scopeRow;\n      this.page.cdkey.currentpage = 1;\n      this.getCDkey();\n      this.dialogSeeVisible = true;\n    },\n    getCDkey: function getCDkey() {\n      var _this5 = this;\n\n      getCDkeys({\n        per_page: this.page.cdkey.pagesize,\n        cur_page: this.page.cdkey.currentpage,\n        operationId: this.page.cdkey.currentOperation.operationId\n      }).then(function (res) {\n        if (res.status === 200) {\n          _this5.page.cdkey.total = res.data.total;\n          _this5.cdkeys = res.data.cdkeys;\n        }\n      });\n    },\n    hideCDkeyDialog: function hideCDkeyDialog() {\n      this.dialogSeeVisible = false;\n      this.getOperation();\n    },\n    openSeeUserDialog: function openSeeUserDialog(key) {\n      this.page.user.key = key;\n      this.page.user.currentpage = 1;\n      this.getUseUser();\n      this.dialogSeeUserVisible = true;\n    },\n    deleteCDkey: function deleteCDkey(row) {\n      var _this6 = this;\n\n      if (row.useNum > 0) {\n        this.$Message.error('该条cdkey已被使用');\n        return;\n      }\n\n      this.$Modal.confirm({\n        title: \"确认删除\",\n        content: \"您确认要删除 \" + row.key + \" ?\",\n        loading: true,\n        onOk: function onOk() {\n          _deleteCDkey({\n            key: row.key\n          }).then(function (res) {\n            _this6.$Modal.remove();\n\n            if (res.status === 200) {\n              if (res.data.error) {\n                _this6.$Message.error(res.data.error);\n              } else {\n                _this6.$Message.success('成功删除' + res.data.success + '条CDkey');\n              }\n\n              _this6.getCDkey();\n            }\n          });\n        }\n      });\n    },\n    getUseUser: function getUseUser() {\n      var _this7 = this;\n\n      getUseUsers({\n        per_page: this.page.user.pagesize,\n        cur_page: this.page.user.currentpage,\n        key: this.page.user.key\n      }).then(function (res) {\n        if (res.status === 200) {\n          _this7.page.user.total = res.data.total;\n          _this7.users = res.data.users;\n        }\n      });\n    },\n    exportExcel: function exportExcel() {\n      if (this.page.cdkey.total > this.downloadDataLimit) {\n        this.dialogExportExcelVisible = true;\n        return;\n      }\n\n      this.getExportExcel(0, this.page.cdkey.total);\n    },\n    exportExcelInBatches: function exportExcelInBatches(n) {\n      this.getExportExcel((n - 1) * this.downloadDataLimit, this.downloadDataLimit);\n    },\n    getExportExcel: function getExportExcel(startIndex, pageSize) {\n      exportExcel({\n        operationId: this.page.cdkey.currentOperation.operationId,\n        startIndex: startIndex,\n        pageSize: pageSize\n      }).then(function (res) {\n        var url = window.URL.createObjectURL(new Blob([res.data]));\n        var link = document.createElement('a');\n        link.style.display = 'none';\n        link.href = url;\n        var fileName = res.headers['content-disposition'].split('filename=');\n        fileName[1] = util.Time2DefaultFormat(new Date().getTime()) + \".xlsx\";\n        link.setAttribute('download', fileName[1]);\n        document.body.appendChild(link);\n        link.click();\n      });\n    },\n    hideSeeUserDialog: function hideSeeUserDialog() {\n      this.dialogSeeUserVisible = false;\n    },\n    formatReward: function formatReward(rewardStr) {\n      var _this8 = this;\n\n      var rowElement = rewardStr.split(';');\n      var array = [];\n      rowElement.forEach(function (obj) {\n        var result = _this8.itemLists.findIndex(function (ol) {\n          return parseInt(obj.split(',')[0]) === ol.id;\n        });\n\n        if (result !== -1) {\n          array.push(_this8.itemLists[result].name + '*' + obj.split(',')[1]);\n        } else {\n          array.push(obj.split(',')[0] + '*' + obj.split(',')[1]);\n        }\n      });\n      return array.join(', ');\n    },\n    formatItem: function formatItem(id) {\n      var name = '';\n      this.itemLists.forEach(function (o) {\n        if (o.id === id) {\n          name = o.name;\n        }\n      });\n      return name;\n    }\n  }\n};",{"version":3,"sources":["cdkey.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgJA,SAAA,YAAA,IAAA,aAAA,EAAA,WAAA,IAAA,YAAA,EAAA,QAAA,IAAA,SAAA,EAAA,SAAA,EAAA,WAAA,EAAA,WAAA,EAAA,WAAA,IAAA,YAAA,QAAA,aAAA;AACA,OAAA,IAAA,MAAA,oBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,OAFA,qBAEA;AACA,SAAA,WAAA;AACA,SAAA,YAAA;AACA,GALA;AAMA,EAAA,IANA,kBAMA;AAAA;;AACA,WAAA;AACA,MAAA,oBAAA,EAAA,CACA;AAAA,QAAA,IAAA,EAAA,OAAA;AAAA,QAAA,KAAA,EAAA,EAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OADA,EAEA;AACA,QAAA,KAAA,EAAA,MADA;AACA,QAAA,GAAA,EAAA,YADA;AACA,QAAA,KAAA,EAAA,GADA;AACA,QAAA,KAAA,EAAA,QADA;AACA,QAAA,MAAA,EAAA,gBAAA,CAAA,EAAA,MAAA,EAAA;AACA,iBAAA,CAAA,CAAA,KAAA,EAAA,IAAA,CAAA,kBAAA,CAAA,MAAA,CAAA,GAAA,CAAA,UAAA,CAAA,CAAA;AACA;AAHA,OAFA,EAOA;AACA,QAAA,KAAA,EAAA,MADA;AACA,QAAA,GAAA,EAAA,WADA;AACA,QAAA,KAAA,EAAA,GADA;AACA,QAAA,KAAA,EAAA,QADA;AACA,QAAA,MAAA,EAAA,gBAAA,CAAA,EAAA,MAAA,EAAA;AACA,iBAAA,CAAA,CAAA,KAAA,EAAA,IAAA,CAAA,kBAAA,CAAA,MAAA,CAAA,GAAA,CAAA,SAAA,CAAA,CAAA;AACA;AAHA,OAPA,EAYA;AACA,QAAA,KAAA,EAAA,MADA;AACA,QAAA,GAAA,EAAA,SADA;AACA,QAAA,KAAA,EAAA,GADA;AACA,QAAA,KAAA,EAAA,QADA;AACA,QAAA,MAAA,EAAA,gBAAA,CAAA,EAAA,MAAA,EAAA;AACA,iBAAA,CAAA,CAAA,KAAA,EAAA,IAAA,CAAA,kBAAA,CAAA,MAAA,CAAA,GAAA,CAAA,OAAA,CAAA,CAAA;AACA;AAHA,OAZA,EAiBA;AACA,QAAA,KAAA,EAAA,MADA;AACA,QAAA,GAAA,EAAA,SADA;AACA,QAAA,KAAA,EAAA,GADA;AACA,QAAA,KAAA,EAAA,QADA;AACA,QAAA,MAAA,EAAA,gBAAA,CAAA,EAAA,MAAA,EAAA;AACA,iBAAA,CAAA,CAAA,KAAA,EAAA,KAAA,CAAA,YAAA,CAAA,MAAA,CAAA,GAAA,CAAA,OAAA,CAAA,CAAA;AACA;AAHA,OAjBA,EAsBA;AAAA,QAAA,KAAA,EAAA,MAAA;AAAA,QAAA,GAAA,EAAA,WAAA;AAAA,QAAA,KAAA,EAAA,GAAA;AAAA,QAAA,KAAA,EAAA,QAAA;AAAA,QAAA,MAAA,EAAA,gBAAA,CAAA,EAAA,MAAA,EAAA;AACA,cAAA,UAAA,GAAA,EAAA;;AACA,cAAA,MAAA,CAAA,GAAA,CAAA,UAAA,IAAA,MAAA,CAAA,GAAA,CAAA,UAAA,GAAA,CAAA,EAAA;AACA,YAAA,UAAA,eAAA,MAAA,CAAA,GAAA,CAAA,UAAA,MAAA;AACA;;AACA,iBAAA,CAAA,CAAA,KAAA,EAAA,MAAA,CAAA,GAAA,CAAA,SAAA,GAAA,UAAA,CAAA;AACA;AANA,OAtBA,EA6BA;AAAA,QAAA,KAAA,EAAA,OAAA;AAAA,QAAA,GAAA,EAAA,UAAA;AAAA,QAAA,KAAA,EAAA,GAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OA7BA,EA8BA;AAAA,QAAA,KAAA,EAAA,IAAA;AAAA,QAAA,GAAA,EAAA,SAAA;AAAA,QAAA,KAAA,EAAA,GAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OA9BA,EA+BA;AACA,QAAA,KAAA,EAAA,IADA;AACA,QAAA,GAAA,EAAA,QADA;AACA,QAAA,KAAA,EAAA,GADA;AACA,QAAA,KAAA,EAAA,QADA;AACA,QAAA,MAAA,EAAA,gBAAA,CAAA,EAAA,MAAA,EAAA;AACA,iBAAA,CAAA,CAAA,KAAA,EAAA,CAAA,CAAA,CAAA,QAAA,EAAA;AACA,YAAA,KAAA,EAAA;AAAA,cAAA,IAAA,EAAA,SAAA;AAAA,cAAA,IAAA,EAAA;AAAA,aADA;AACA,YAAA,EAAA,EAAA;AACA,cAAA,KAAA,EAAA,iBAAA;AACA,gBAAA,KAAA,CAAA,eAAA,CAAA,MAAA,CAAA,GAAA;AACA;AAHA;AADA,WAAA,EAMA,IANA,CAAA,CAAA,CAAA;AAOA;AATA,OA/BA,CADA;AA2CA,MAAA,kBAAA,EAAA,CACA;AAAA,QAAA,IAAA,EAAA,OAAA;AAAA,QAAA,KAAA,EAAA,EAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OADA,EAEA;AAAA,QAAA,KAAA,EAAA,MAAA;AAAA,QAAA,GAAA,EAAA,IAAA;AAAA,QAAA,KAAA,EAAA,GAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAFA,EAGA;AACA,QAAA,KAAA,EAAA,MADA;AACA,QAAA,GAAA,EAAA,IADA;AACA,QAAA,KAAA,EAAA,GADA;AACA,QAAA,KAAA,EAAA,QADA;AACA,QAAA,MAAA,EAAA,gBAAA,CAAA,EAAA,MAAA,EAAA;AACA,iBAAA,CAAA,CAAA,KAAA,EAAA,KAAA,CAAA,UAAA,CAAA,MAAA,CAAA,GAAA,CAAA,EAAA,CAAA,CAAA;AACA;AAHA,OAHA,EAQA;AAAA,QAAA,KAAA,EAAA,MAAA;AAAA,QAAA,GAAA,EAAA,KAAA;AAAA,QAAA,KAAA,EAAA,GAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OARA,EASA;AACA,QAAA,KAAA,EAAA,IADA;AACA,QAAA,GAAA,EAAA,QADA;AACA,QAAA,KAAA,EAAA,GADA;AACA,QAAA,KAAA,EAAA,QADA;AACA,QAAA,MAAA,EAAA,gBAAA,CAAA,EAAA,MAAA,EAAA;AACA,iBAAA,CAAA,CAAA,KAAA,EAAA,CAAA,CAAA,CAAA,QAAA,EAAA;AACA,YAAA,KAAA,EAAA;AAAA,cAAA,IAAA,EAAA,OAAA;AAAA,cAAA,IAAA,EAAA;AAAA,aADA;AACA,YAAA,EAAA,EAAA;AACA,cAAA,KAAA,EAAA,iBAAA;AACA,gBAAA,KAAA,CAAA,SAAA,CAAA,MAAA,CAAA,KAAA;AACA;AAHA;AADA,WAAA,EAMA,IANA,CAAA,CAAA,CAAA;AAOA;AATA,OATA,CA3CA;AAgEA,MAAA,gBAAA,EAAA,CACA;AAAA,QAAA,IAAA,EAAA,OAAA;AAAA,QAAA,KAAA,EAAA,EAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OADA,EAEA;AAAA,QAAA,KAAA,EAAA,OAAA;AAAA,QAAA,GAAA,EAAA,KAAA;AAAA,QAAA,KAAA,EAAA,GAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAFA,EAGA;AACA,QAAA,KAAA,EAAA,MADA;AACA,QAAA,GAAA,EAAA,QADA;AACA,QAAA,KAAA,EAAA,GADA;AACA,QAAA,KAAA,EAAA,QADA;AACA,QAAA,MAAA,EAAA,gBAAA,CAAA,EAAA,MAAA,EAAA;AACA,iBAAA,CAAA,CAAA,KAAA,EAAA,MAAA,CAAA,GAAA,CAAA,MAAA,GAAA,CAAA,GAAA,KAAA,GAAA,KAAA,CAAA;AACA;AAHA,OAHA,EAQA;AACA,QAAA,KAAA,EAAA,MADA;AACA,QAAA,GAAA,EAAA,aADA;AACA,QAAA,KAAA,EAAA,GADA;AACA,QAAA,KAAA,EAAA,QADA;AACA,QAAA,MAAA,EAAA,gBAAA,CAAA,EAAA,MAAA,EAAA;AACA,iBAAA,CAAA,CAAA,KAAA,EAAA,MAAA,CAAA,GAAA,CAAA,WAAA,GAAA,IAAA,CAAA,kBAAA,CAAA,MAAA,CAAA,GAAA,CAAA,WAAA,CAAA,GAAA,KAAA,CAAA;AACA;AAHA,OARA,EAaA;AAAA,QAAA,KAAA,EAAA,MAAA;AAAA,QAAA,GAAA,EAAA,eAAA;AAAA,QAAA,KAAA,EAAA,GAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAbA,EAcA;AAAA,QAAA,KAAA,EAAA,OAAA;AAAA,QAAA,GAAA,EAAA,QAAA;AAAA,QAAA,KAAA,EAAA,GAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAdA,EAeA;AACA,QAAA,KAAA,EAAA,IADA;AACA,QAAA,GAAA,EAAA,QADA;AACA,QAAA,KAAA,EAAA,GADA;AACA,QAAA,KAAA,EAAA,QADA;AACA,QAAA,MAAA,EAAA,gBAAA,CAAA,EAAA,MAAA,EAAA;AACA,cAAA,YAAA,GAAA,EAAA;;AACA,cAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA,SAAA,CAAA,QAAA,CAAA,QAAA,CAAA,EAAA;AACA,YAAA,YAAA,GAAA,CAAA,CAAA,QAAA,EAAA;AACA,cAAA,KAAA,EAAA;AAAA,gBAAA,IAAA,EAAA,OAAA;AAAA,gBAAA,IAAA,EAAA;AAAA,eADA;AACA,cAAA,EAAA,EAAA;AACA,gBAAA,KAAA,EAAA,iBAAA;AACA,kBAAA,KAAA,CAAA,WAAA,CAAA,MAAA,CAAA,GAAA;AACA;AAHA;AADA,aAAA,EAMA,IANA,CAAA;AAOA;;AACA,iBAAA,CAAA,CAAA,KAAA,EAAA,CACA,CAAA,CAAA,QAAA,EAAA;AACA,YAAA,KAAA,EAAA;AAAA,cAAA,IAAA,EAAA,SAAA;AAAA,cAAA,IAAA,EAAA;AAAA,aADA;AACA,YAAA,EAAA,EAAA;AACA,cAAA,KAAA,EAAA,iBAAA;AACA,gBAAA,KAAA,CAAA,iBAAA,CAAA,MAAA,CAAA,GAAA,CAAA,GAAA;AACA;AAHA;AADA,WAAA,EAMA,MANA,CADA,EAQA,YARA,CAAA,CAAA;AAUA;AAtBA,OAfA,CAhEA;AAuGA,MAAA,gBAAA,EAAA,CACA;AAAA,QAAA,IAAA,EAAA,OAAA;AAAA,QAAA,KAAA,EAAA,EAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OADA,EAEA;AAAA,QAAA,KAAA,EAAA,KAAA;AAAA,QAAA,GAAA,EAAA,KAAA;AAAA,QAAA,KAAA,EAAA,GAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAFA,EAGA;AAAA,QAAA,KAAA,EAAA,MAAA;AAAA,QAAA,GAAA,EAAA,QAAA;AAAA,QAAA,KAAA,EAAA,GAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAHA,EAIA;AACA,QAAA,KAAA,EAAA,MADA;AACA,QAAA,GAAA,EAAA,SADA;AACA,QAAA,KAAA,EAAA,GADA;AACA,QAAA,KAAA,EAAA,QADA;AACA,QAAA,MAAA,EAAA,gBAAA,CAAA,EAAA,MAAA,EAAA;AACA,iBAAA,CAAA,CAAA,KAAA,EAAA,IAAA,CAAA,kBAAA,CAAA,MAAA,CAAA,GAAA,CAAA,OAAA,CAAA,CAAA;AACA;AAHA,OAJA,CAvGA;;AAiHA;AACA,MAAA,iBAAA,EAAA,KAlHA;;AAmHA;AACA,MAAA,gBAAA,EAAA,KApHA;;AAqHA;AACA,MAAA,oBAAA,EAAA,KAtHA;AAuHA,MAAA,wBAAA,EAAA,KAvHA;AAwHA,MAAA,iBAAA,EAAA,KAxHA;AAyHA,MAAA,cAAA,EAAA,OAzHA;AA0HA,MAAA,IAAA,EAAA;AACA,QAAA,SAAA,EAAA;AACA,UAAA,QAAA,EAAA,EADA;AAEA,UAAA,QAAA,EAAA,CAFA;AAGA,UAAA,KAAA,EAAA,CAHA;AAIA,UAAA,OAAA,EAAA;AAJA,SADA;AAOA,QAAA,KAAA,EAAA;AACA,UAAA,QAAA,EAAA,EADA;AAEA,UAAA,WAAA,EAAA,CAFA;AAGA,UAAA,KAAA,EAAA,CAHA;AAIA,UAAA,gBAAA,EAAA;AAJA,SAPA;AAaA,QAAA,IAAA,EAAA;AACA,UAAA,QAAA,EAAA,EADA;AAEA,UAAA,WAAA,EAAA,CAFA;AAGA,UAAA,KAAA,EAAA,CAHA;AAIA,UAAA,GAAA,EAAA;AAJA;AAbA,OA1HA;;AA8IA;AACA,MAAA,UAAA,EAAA,EA/IA;;AAgJA;AACA,MAAA,MAAA,EAAA,EAjJA;;AAkJA;AACA,MAAA,KAAA,EAAA,EAnJA;;AAoJA;AACA,MAAA,KAAA,EAAA,KArJA;AAsJA,MAAA,IAAA,EAAA;AACA,QAAA,MAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA,EAFA;AAGA,QAAA,OAAA,EAAA,EAHA;AAIA,QAAA,SAAA,EAAA,EAJA;AAKA,QAAA,QAAA,EAAA,EALA;AAMA,QAAA,OAAA,EAAA;AANA,OAtJA;;AA8JA;AACA,MAAA,QAAA,EAAA,CA/JA;AAgKA,MAAA,QAAA,EAAA,EAhKA;AAiKA,MAAA,SAAA,EAAA,EAjKA;AAkKA,MAAA,QAAA,EAAA;AACA,QAAA,QAAA,EAAA,EADA;AAEA,QAAA,YAAA,EAAA,EAFA;AAGA,QAAA,SAAA,EAAA,EAHA;AAIA,QAAA,QAAA,EAAA;AAJA,OAlKA;AAwKA,MAAA,SAAA,EAAA,CAAA;AAAA,QAAA,IAAA,EAAA,CAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAAA,EAAA;AAAA,QAAA,IAAA,EAAA,CAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAAA,EAAA;AAAA,QAAA,IAAA,EAAA,CAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAAA,EAAA;AACA,QAAA,IAAA,EAAA,CADA;AAEA,QAAA,KAAA,EAAA;AAFA,OAAA,EAGA;AAAA,QAAA,IAAA,EAAA,CAAA;AAAA,QAAA,KAAA,EAAA;AAAA,OAHA,CAxKA;AA4KA,MAAA,SAAA,EAAA,EA5KA;AA6KA,MAAA,UAAA,EAAA,EA7KA;;AA8KA;AACA,MAAA,gBAAA,EAAA;AACA,QAAA,YADA,wBACA,IADA,EACA;AACA,iBAAA,IAAA,CAAA,OAAA,KAAA,IAAA,IAAA,CAAA,IAAA,IAAA,GAAA,kBAAA,EAAA,EAAA,OAAA,EAAA;AACA;AAHA;AA/KA,KAAA;AAqLA,GA5LA;AA6LA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA;AAAA;;AACA,MAAA,YAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,YAAA,GAAA,GAAA,CAAA,IAAA,CAAA,YAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,QAAA,GAAA,GAAA,CAAA,IAAA,CAAA,QAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,SAAA,GAAA,GAAA,CAAA,IAAA,CAAA,SAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,QAAA,GAAA,GAAA,CAAA,IAAA,CAAA,QAAA;AAEA;;AACA,UAAA,MAAA,CAAA,SAAA,GAAA,CAAA;AAAA,YAAA,EAAA,EAAA,CAAA,CAAA;AAAA,YAAA,IAAA,EAAA;AAAA,WAAA,EAAA;AAAA,YAAA,EAAA,EAAA,CAAA,CAAA;AAAA,YAAA,IAAA,EAAA;AAAA,WAAA,EAAA;AAAA,YAAA,EAAA,EAAA,CAAA,CAAA;AAAA,YAAA,IAAA,EAAA;AAAA,WAAA,CAAA;AACA,UAAA,GAAA,CAAA,IAAA,CAAA,YAAA,CAAA,OAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,MAAA,CAAA,SAAA,CAAA,IAAA,CAAA;AAAA,cAAA,EAAA,EAAA,GAAA,CAAA,EAAA;AAAA,cAAA,IAAA,EAAA,GAAA,CAAA;AAAA,aAAA;AACA,WAFA;AAGA,UAAA,GAAA,CAAA,IAAA,CAAA,QAAA,CAAA,OAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,MAAA,CAAA,SAAA,CAAA,IAAA,CAAA;AAAA,cAAA,EAAA,EAAA,GAAA,CAAA,EAAA;AAAA,cAAA,IAAA,EAAA,GAAA,CAAA;AAAA,aAAA;AACA,WAFA;AAGA,UAAA,GAAA,CAAA,IAAA,CAAA,SAAA,CAAA,OAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,MAAA,CAAA,SAAA,CAAA,IAAA,CAAA;AAAA,cAAA,EAAA,EAAA,GAAA,CAAA,EAAA;AAAA,cAAA,IAAA,EAAA,GAAA,CAAA;AAAA,aAAA;AACA,WAFA;AAGA,UAAA,GAAA,CAAA,IAAA,CAAA,QAAA,CAAA,OAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,MAAA,CAAA,SAAA,CAAA,IAAA,CAAA;AAAA,cAAA,EAAA,EAAA,GAAA,CAAA,EAAA;AAAA,cAAA,IAAA,EAAA,GAAA,CAAA;AAAA,aAAA;AACA,WAFA;AAGA;AACA,OAtBA;AAuBA,KAzBA;AA0BA,IAAA,cA1BA,4BA0BA;AACA,WAAA,QAAA,GAAA,EAAA;AACA,WAAA,YAAA;;AACA,cAAA,KAAA,QAAA;AACA,aAAA,CAAA;AACA,eAAA,QAAA,CAAA,IAAA,CAAA;AAAA,YAAA,EAAA,EAAA,CAAA,CAAA;AAAA,YAAA,IAAA,EAAA;AAAA,WAAA;AACA,eAAA,QAAA,CAAA,IAAA,CAAA;AAAA,YAAA,EAAA,EAAA,CAAA,CAAA;AAAA,YAAA,IAAA,EAAA;AAAA,WAAA;AACA,eAAA,QAAA,CAAA,IAAA,CAAA;AAAA,YAAA,EAAA,EAAA,CAAA,CAAA;AAAA,YAAA,IAAA,EAAA;AAAA,WAAA;AACA;;AACA,aAAA,CAAA;AACA,eAAA,QAAA,GAAA,KAAA,QAAA,CAAA,QAAA;AACA;;AACA,aAAA,CAAA;AACA,eAAA,QAAA,GAAA,KAAA,QAAA,CAAA,YAAA;AACA;;AACA,aAAA,CAAA;AACA,eAAA,QAAA,GAAA,KAAA,QAAA,CAAA,SAAA;AACA;;AACA,aAAA,CAAA;AACA,eAAA,QAAA,GAAA,KAAA,QAAA,CAAA,QAAA;AAhBA;AAkBA,KA/CA;AAgDA,IAAA,cAhDA,4BAgDA;AACA,WAAA,IAAA,CAAA,SAAA,CAAA,WAAA,GAAA,CAAA;AACA,WAAA,YAAA;AACA,KAnDA;AAoDA,IAAA,YApDA,0BAoDA;AAAA;;AACA,MAAA,aAAA,CAAA,KAAA,IAAA,CAAA,SAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,UAAA,GAAA,GAAA,CAAA,IAAA,CAAA,UAAA;AACA,UAAA,MAAA,CAAA,IAAA,CAAA,SAAA,CAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAAA,KAAA;AACA;AACA,OALA;AAMA,KA3DA;AA4DA,IAAA,gBA5DA,4BA4DA,KA5DA,EA4DA;AACA,WAAA,IAAA,CAAA,SAAA,CAAA,QAAA,GAAA,KAAA;AACA,WAAA,YAAA;AACA,KA/DA;AAgEA,IAAA,mBAhEA,+BAgEA,KAhEA,EAgEA;AACA,WAAA,IAAA,CAAA,SAAA,CAAA,QAAA,GAAA,KAAA;AACA,WAAA,YAAA;AACA,KAnEA;AAoEA,IAAA,qBApEA,iCAoEA,KApEA,EAoEA;AACA,WAAA,IAAA,CAAA,KAAA,CAAA,QAAA,GAAA,KAAA;AACA,WAAA,QAAA;AACA,KAvEA;AAwEA,IAAA,wBAxEA,oCAwEA,KAxEA,EAwEA;AACA,WAAA,IAAA,CAAA,KAAA,CAAA,WAAA,GAAA,KAAA;AACA,WAAA,QAAA;AACA,KA3EA;AA4EA,IAAA,oBA5EA,gCA4EA,KA5EA,EA4EA;AACA,WAAA,IAAA,CAAA,IAAA,CAAA,QAAA,GAAA,KAAA;AACA,WAAA,UAAA;AACA,KA/EA;AAgFA,IAAA,uBAhFA,mCAgFA,KAhFA,EAgFA;AACA,WAAA,IAAA,CAAA,IAAA,CAAA,WAAA,GAAA,KAAA;AACA,WAAA,UAAA;AACA,KAnFA;AAoFA,IAAA,UApFA,wBAoFA;AACA,UAAA,KAAA,QAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,aAAA,WAAA;AACA;;AACA,WAAA,QAAA,GAAA,CAAA;AACA,WAAA,cAAA;AACA,WAAA,IAAA,GAAA;AACA,QAAA,MAAA,EAAA,EADA;AAEA,QAAA,OAAA,EAAA,EAFA;AAGA,QAAA,SAAA,EAAA,EAHA;AAIA,QAAA,WAAA,EAAA,EAJA;AAKA,QAAA,OAAA,EAAA,EALA;AAMA,QAAA,SAAA,EAAA;AANA,OAAA;AAQA,WAAA,iBAAA,GAAA,IAAA;AACA,WAAA,KAAA,GAAA,KAAA;AACA,KApGA;AAqGA,IAAA,iBArGA,+BAqGA;AACA,WAAA,UAAA;AACA,WAAA,KAAA,GAAA,IAAA;AACA,KAxGA;AAyGA,IAAA,UAzGA,wBAyGA;AACA,WAAA,iBAAA,GAAA,KAAA;AACA,KA3GA;AA4GA,IAAA,QA5GA,sBA4GA;AAAA;;AACA,UAAA,CAAA,KAAA,IAAA,CAAA,QAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,OAAA;AACA;AACA;;AACA,UAAA,CAAA,KAAA,IAAA,CAAA,OAAA,IAAA,KAAA,IAAA,CAAA,OAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,OAAA;AACA;AACA;;AACA,UAAA,CAAA,KAAA,IAAA,CAAA,OAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,OAAA;AACA;AACA;;AACA,UAAA,CAAA,KAAA,IAAA,CAAA,SAAA,EAAA;AACA,aAAA,IAAA,CAAA,SAAA,GAAA,CAAA;AACA;;AACA,UAAA,CAAA,KAAA,IAAA,CAAA,QAAA,EAAA;AACA,aAAA,IAAA,CAAA,QAAA,GAAA,CAAA;AACA;;AACA,UAAA,KAAA,KAAA,IAAA,CAAA,KAAA,IAAA,CAAA,MAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,WAAA;AACA;AACA;;AACA,WAAA,IAAA,CAAA,QAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA,KAAA,EAAA;AACA,QAAA,MAAA,CAAA,IAAA,CAAA,QAAA,CAAA,KAAA,IAAA,IAAA,CAAA,OAAA,EAAA;AACA,OAFA;AAGA,WAAA,IAAA,CAAA,OAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA,KAAA,EAAA;AACA,QAAA,MAAA,CAAA,IAAA,CAAA,OAAA,CAAA,KAAA,IAAA,IAAA,CAAA,EAAA,GAAA,GAAA,GAAA,IAAA,CAAA,GAAA;AACA,OAFA;AAGA,WAAA,IAAA,CAAA,SAAA,GAAA,KAAA,IAAA,CAAA,OAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AACA,WAAA,IAAA,CAAA,KAAA,GAAA,KAAA,KAAA;AACA,WAAA,UAAA;;AACA,MAAA,SAAA,CAAA,KAAA,IAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,cAAA,GAAA,CAAA,IAAA,CAAA,KAAA,EAAA;AACA,YAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA,CAAA,IAAA,CAAA,KAAA;;AACA;AACA;;AACA,cAAA,GAAA,CAAA,IAAA,CAAA,UAAA,EAAA;AACA,YAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,QAAA,GAAA,CAAA,IAAA,CAAA,UAAA,CAAA,KAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAAA,GAAA,KAAA;AACA;;AACA,cAAA,GAAA,CAAA,IAAA,CAAA,OAAA,GAAA,CAAA,EAAA;AACA,YAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,SAAA,GAAA,CAAA,IAAA,CAAA,OAAA,GAAA,QAAA;AACA;;AACA,UAAA,MAAA,CAAA,YAAA;AACA;AACA,OAdA;AAeA,KA3JA;AA4JA,IAAA,SA5JA,uBA4JA;AACA,UAAA,CAAA,KAAA,UAAA,IAAA,CAAA,KAAA,SAAA,IAAA,KAAA,UAAA,IAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,OAAA;AACA;AACA;;AACA,WAAA,IAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,EAAA,EAAA,KAAA,SAAA;AAAA,QAAA,GAAA,EAAA,KAAA;AAAA,OAAA;AAEA;;AACA,UAAA,MAAA,GAAA,EAAA;AACA,WAAA,IAAA,CAAA,OAAA,CAAA,OAAA,CAAA,UAAA,EAAA,EAAA;AACA,YAAA,MAAA,GAAA,MAAA,CAAA,SAAA,CAAA,UAAA,EAAA,EAAA;AACA,iBAAA,EAAA,CAAA,EAAA,KAAA,EAAA,CAAA,EAAA;AACA,SAFA,CAAA;;AAGA,YAAA,MAAA,KAAA,CAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,MAAA,CAAA,CAAA,GAAA,GAAA,MAAA,CAAA,MAAA,CAAA,CAAA,GAAA,GAAA,EAAA,CAAA,GAAA;AACA,SAFA,MAEA;AACA,UAAA,MAAA,CAAA,IAAA,CAAA,EAAA;AACA;AACA,OATA;AAUA,WAAA,IAAA,CAAA,OAAA,GAAA,MAAA,CAnBA,CAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;;AAEA,WAAA,YAAA;AACA,KA/LA;AAgMA,IAAA,YAhMA,0BAgMA;AACA,WAAA,SAAA,GAAA,EAAA;AACA,WAAA,UAAA,GAAA,EAAA;AACA,KAnMA;AAoMA,IAAA,YApMA,0BAoMA;AACA,WAAA,IAAA,CAAA,OAAA,GAAA,EAAA;AACA,KAtMA;AAuMA,IAAA,SAvMA,qBAuMA,KAvMA,EAuMA;AACA,WAAA,IAAA,CAAA,OAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA;AACA,KAzMA;AA0MA,IAAA,eA1MA,2BA0MA,QA1MA,EA0MA;AACA,WAAA,IAAA,CAAA,KAAA,CAAA,gBAAA,GAAA,QAAA;AACA,WAAA,IAAA,CAAA,KAAA,CAAA,WAAA,GAAA,CAAA;AACA,WAAA,QAAA;AACA,WAAA,gBAAA,GAAA,IAAA;AACA,KA/MA;AAgNA,IAAA,QAhNA,sBAgNA;AAAA;;AACA,MAAA,SAAA,CAAA;AACA,QAAA,QAAA,EAAA,KAAA,IAAA,CAAA,KAAA,CAAA,QADA;AAEA,QAAA,QAAA,EAAA,KAAA,IAAA,CAAA,KAAA,CAAA,WAFA;AAGA,QAAA,WAAA,EAAA,KAAA,IAAA,CAAA,KAAA,CAAA,gBAAA,CAAA;AAHA,OAAA,CAAA,CAIA,IAJA,CAIA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,IAAA,CAAA,KAAA,CAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAAA,KAAA;AACA,UAAA,MAAA,CAAA,MAAA,GAAA,GAAA,CAAA,IAAA,CAAA,MAAA;AACA;AACA,OATA;AAUA,KA3NA;AA4NA,IAAA,eA5NA,6BA4NA;AACA,WAAA,gBAAA,GAAA,KAAA;AACA,WAAA,YAAA;AACA,KA/NA;AAgOA,IAAA,iBAhOA,6BAgOA,GAhOA,EAgOA;AACA,WAAA,IAAA,CAAA,IAAA,CAAA,GAAA,GAAA,GAAA;AACA,WAAA,IAAA,CAAA,IAAA,CAAA,WAAA,GAAA,CAAA;AACA,WAAA,UAAA;AACA,WAAA,oBAAA,GAAA,IAAA;AACA,KArOA;AAsOA,IAAA,WAtOA,uBAsOA,GAtOA,EAsOA;AAAA;;AACA,UAAA,GAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,aAAA;AACA;AACA;;AACA,WAAA,MAAA,CAAA,OAAA,CAAA;AACA,QAAA,KAAA,EAAA,MADA;AAEA,QAAA,OAAA,EAAA,YAAA,GAAA,CAAA,GAAA,GAAA,IAFA;AAGA,QAAA,OAAA,EAAA,IAHA;AAIA,QAAA,IAAA,EAAA,gBAAA;AACA,UAAA,YAAA,CAAA;AAAA,YAAA,GAAA,EAAA,GAAA,CAAA;AAAA,WAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,MAAA,CAAA,MAAA,CAAA,MAAA;;AACA,gBAAA,GAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,kBAAA,GAAA,CAAA,IAAA,CAAA,KAAA,EAAA;AACA,gBAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,GAAA,CAAA,IAAA,CAAA,KAAA;AACA,eAFA,MAEA;AACA,gBAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,SAAA,GAAA,CAAA,IAAA,CAAA,OAAA,GAAA,QAAA;AACA;;AACA,cAAA,MAAA,CAAA,QAAA;AACA;AACA,WAVA;AAWA;AAhBA,OAAA;AAkBA,KA7PA;AA8PA,IAAA,UA9PA,wBA8PA;AAAA;;AACA,MAAA,WAAA,CAAA;AACA,QAAA,QAAA,EAAA,KAAA,IAAA,CAAA,IAAA,CAAA,QADA;AAEA,QAAA,QAAA,EAAA,KAAA,IAAA,CAAA,IAAA,CAAA,WAFA;AAGA,QAAA,GAAA,EAAA,KAAA,IAAA,CAAA,IAAA,CAAA;AAHA,OAAA,CAAA,CAIA,IAJA,CAIA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAAA,KAAA;AACA,UAAA,MAAA,CAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAAA,KAAA;AACA;AACA,OATA;AAUA,KAzQA;AA0QA,IAAA,WA1QA,yBA0QA;AACA,UAAA,KAAA,IAAA,CAAA,KAAA,CAAA,KAAA,GAAA,KAAA,iBAAA,EAAA;AACA,aAAA,wBAAA,GAAA,IAAA;AACA;AACA;;AACA,WAAA,cAAA,CAAA,CAAA,EAAA,KAAA,IAAA,CAAA,KAAA,CAAA,KAAA;AACA,KAhRA;AAiRA,IAAA,oBAjRA,gCAiRA,CAjRA,EAiRA;AACA,WAAA,cAAA,CAAA,CAAA,CAAA,GAAA,CAAA,IAAA,KAAA,iBAAA,EAAA,KAAA,iBAAA;AACA,KAnRA;AAoRA,IAAA,cApRA,0BAoRA,UApRA,EAoRA,QApRA,EAoRA;AACA,MAAA,WAAA,CAAA;AACA,QAAA,WAAA,EAAA,KAAA,IAAA,CAAA,KAAA,CAAA,gBAAA,CAAA,WADA;AAEA,QAAA,UAAA,EAAA,UAFA;AAGA,QAAA,QAAA,EAAA;AAHA,OAAA,CAAA,CAIA,IAJA,CAIA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,GAAA,MAAA,CAAA,GAAA,CAAA,eAAA,CAAA,IAAA,IAAA,CAAA,CAAA,GAAA,CAAA,IAAA,CAAA,CAAA,CAAA;AACA,YAAA,IAAA,GAAA,QAAA,CAAA,aAAA,CAAA,GAAA,CAAA;AACA,QAAA,IAAA,CAAA,KAAA,CAAA,OAAA,GAAA,MAAA;AACA,QAAA,IAAA,CAAA,IAAA,GAAA,GAAA;AACA,YAAA,QAAA,GAAA,GAAA,CAAA,OAAA,CAAA,qBAAA,EAAA,KAAA,CAAA,WAAA,CAAA;AACA,QAAA,QAAA,CAAA,CAAA,CAAA,GAAA,IAAA,CAAA,kBAAA,CAAA,IAAA,IAAA,GAAA,OAAA,EAAA,IAAA,OAAA;AACA,QAAA,IAAA,CAAA,YAAA,CAAA,UAAA,EAAA,QAAA,CAAA,CAAA,CAAA;AAEA,QAAA,QAAA,CAAA,IAAA,CAAA,WAAA,CAAA,IAAA;AACA,QAAA,IAAA,CAAA,KAAA;AACA,OAfA;AAgBA,KArSA;AAsSA,IAAA,iBAtSA,+BAsSA;AACA,WAAA,oBAAA,GAAA,KAAA;AACA,KAxSA;AAySA,IAAA,YAzSA,wBAySA,SAzSA,EAySA;AAAA;;AACA,UAAA,UAAA,GAAA,SAAA,CAAA,KAAA,CAAA,GAAA,CAAA;AACA,UAAA,KAAA,GAAA,EAAA;AACA,MAAA,UAAA,CAAA,OAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,MAAA,GAAA,MAAA,CAAA,SAAA,CAAA,SAAA,CAAA,UAAA,EAAA,EAAA;AACA,iBAAA,QAAA,CAAA,GAAA,CAAA,KAAA,CAAA,GAAA,EAAA,CAAA,CAAA,CAAA,KAAA,EAAA,CAAA,EAAA;AACA,SAFA,CAAA;;AAGA,YAAA,MAAA,KAAA,CAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,IAAA,CAAA,MAAA,CAAA,SAAA,CAAA,MAAA,EAAA,IAAA,GAAA,GAAA,GAAA,GAAA,CAAA,KAAA,CAAA,GAAA,EAAA,CAAA,CAAA;AACA,SAFA,MAEA;AACA,UAAA,KAAA,CAAA,IAAA,CAAA,GAAA,CAAA,KAAA,CAAA,GAAA,EAAA,CAAA,IAAA,GAAA,GAAA,GAAA,CAAA,KAAA,CAAA,GAAA,EAAA,CAAA,CAAA;AACA;AACA,OATA;AAUA,aAAA,KAAA,CAAA,IAAA,CAAA,IAAA,CAAA;AACA,KAvTA;AAwTA,IAAA,UAxTA,sBAwTA,EAxTA,EAwTA;AACA,UAAA,IAAA,GAAA,EAAA;AACA,WAAA,SAAA,CAAA,OAAA,CAAA,UAAA,CAAA,EAAA;AACA,YAAA,CAAA,CAAA,EAAA,KAAA,EAAA,EAAA;AACA,UAAA,IAAA,GAAA,CAAA,CAAA,IAAA;AACA;AACA,OAJA;AAKA,aAAA,IAAA;AACA;AAhUA;AA7LA,CAAA","sourcesContent":["<template>\n  <div>\n    <Row>\n      <Input v-model=\"page.operation.channel\" placeholder=\"请输入渠道\" style=\"width: 200px\"\n             @keyup.enter.native=\"queryOperation()\"></Input>\n      <Button @click='queryOperation()' type=\"primary\">查询</Button>\n      <Button @click='openDialog()'>添加随机兑换码</Button>\n      <Button @click='openDialogWithDIY()'>添加自定义兑换码</Button>\n\n    </Row>\n    <Row>\n      <Table :columns=\"columnsWithOperation\" :data=\"operations\" ref=\"table\" stripe></Table>\n    </Row>\n    <Row type=\"flex\" justify=\"end\" class=\"page\">\n      <Page\n              :current=\"page.operation.cur_page\"\n              :total=\"page.operation.total\"\n              :page-size=\"page.operation.per_page\"\n              @on-change=\"handleCurrentChange\"\n              @on-page-size-change=\"handleSizeChange\"\n              :page-size-opts=\"[10,20,50]\"\n              size=\"small\"\n              show-total\n              show-elevator\n              show-sizer>\n      </Page>\n    </Row>\n\n    <Modal :title=\"isDIY?'添加自定义兑换码礼包':'添加随机兑换码礼包'\" v-model=\"dialogFormVisible\" :mask-closable=\"false\" width=\"50%\">\n      <Form :model=\"form\" :label-width=\"120\">\n\n        <FormItem label=\"礼包起止时间\">\n          <DatePicker v-model=\"form.formTime\"\n                      type=\"datetimerange\"\n                      format=\"yyyy-MM-dd HH:mm:ss\"\n                      placeholder=\"请选择时间日期\"\n                      style=\"width: 50%;max-width: 350px\"\n                      :options=\"expireTimeOption\">\n          </DatePicker>\n        </FormItem>\n\n        <FormItem label=\"道具列表\">\n          <Select v-model=\"itemType\" @on-change=\"changeItemType\">\n            <Option\n                    v-for=\"item in itemTypes\"\n                    :key=\"item.type\"\n                    :label=\"item.label\"\n                    :value=\"item.type\">\n            </Option>\n          </Select>\n          <Select v-model=\"addItemId\">\n            <Option\n                    v-for=\"item in itemList\"\n                    :key=\"item.id\"\n                    :label=\"item.name\"\n                    :value=\"item.id\">\n            </Option>\n          </Select>\n\n          <Input v-model.number=\"addItemNum\" autocomplete=\"off\" style=\"width: 160px\"\n                 placeholder=\"请输入道具数量\" @keyup.enter.native=\"addReward()\"></Input>\n\n          <Button @click='addReward()'>添加</Button>\n\n          <Button @click='clearRewards()'>清空</Button>\n          <Table :columns=\"columnsWithRewards\" :data=\"form.rewards\" ref=\"table\"></Table>\n\n        </FormItem>\n\n        <FormItem :label=\"isDIY?'自定义兑换码':'兑换码数量'\">\n          <Input v-model=\"form.createNum\" autocomplete=\"off\" placeholder=\"请输入生成兑换码数量，默认为1\" v-if=\"!isDIY\"/>\n          <Input v-model=\"form.diyCdk\" autocomplete=\"off\" placeholder=\"请输入要生成的兑换码，英文半角逗号分隔\" v-if=\"isDIY\"/>\n        </FormItem>\n\n        <FormItem label=\"使用次数\">\n          <Input v-model=\"form.totalNum\" autocomplete=\"off\" placeholder=\"请输入兑换码使用次数，默认为1，无限制使用为-1\"/>\n        </FormItem>\n\n        <FormItem label=\"渠道\">\n          <Input v-model=\"form.channel\" autocomplete=\"off\" placeholder=\"请输入渠道\"/>\n        </FormItem>\n      </Form>\n      <div slot=\"footer\">\n        <Button @click=\"hideDialog()\">取 消</Button>\n        <Button type=\"primary\" @click=\"addcdkey()\">确定添加</Button>\n      </div>\n    </Modal>\n\n    <Modal title=查看兑换码 v-model=\"dialogSeeVisible\" :mask-closable=\"false\" width=\"900px\">\n      <Table :columns=\"columnsWithCDkey\" :data=\"cdkeys\" ref=\"table\" stripe></Table>\n      <Row type=\"flex\" justify=\"end\" class=\"page\">\n        <Page\n                :current=\"page.cdkey.currentpage\"\n                :total=\"page.cdkey.total\"\n                :page-size=\"page.cdkey.pagesize\"\n                @on-change=\"handleCDkeyCurrentChange\"\n                @on-page-size-change=\"handleCDkeySizeChange\"\n                :page-size-opts=\"[10,20,50]\"\n                size=\"small\"\n                show-total\n                show-elevator\n                show-sizer>\n        </Page>\n      </Row>\n      <div slot=\"footer\">\n        <Button @click=\"exportExcel\" type=\"primary\">导出Excel</Button>\n        <Button @click=\"hideCDkeyDialog()\">取 消</Button>\n      </div>\n    </Modal>\n\n    <Modal title=导出Excel v-model=\"dialogExportExcelVisible\" :mask-closable=\"false\" width=\"50%\">\n      <span>因数据量太大将采取分批次下载，请选择下载批次！如若下载失败，请联系技术人员！</span>\n      <br>\n      <Button @click=\"exportExcelInBatches(n)\" tBype=\"primary\" :key=\"n\"\n              v-for=\"n in Math.ceil(page.cdkey.total/downloadDataLimit)\"\n              style=\"width: 200px;margin: 10px\">{{(n - 1) * downloadDataLimit +1}}-{{n * downloadDataLimit }}\n      </Button>\n    </Modal>\n\n    <Modal title=已领取玩家 v-model=\"dialogSeeUserVisible\" :mask-closable=\"false\" width=\"50%\">\n      <Table :columns=\"columnsWithUsers\" :data=\"users\" ref=\"table\" stripe></Table>\n      <Row type=\"flex\" justify=\"end\" class=\"page\">\n        <Page\n                :current=\"page.user.currentpage\"\n                :total=\"page.user.total\"\n                :page-size=\"page.user.pagesize\"\n                @on-change=\"handleUserCurrentChange\"\n                @on-page-size-change=\"handleUserSizeChange\"\n                :page-size-opts=\"[10,20,50]\"\n                size=\"small\"\n                show-total\n                show-elevator\n                show-sizer>\n        </Page>\n      </Row>\n      <div slot=\"footer\">\n        <Button @click=\"hideSeeUserDialog()\">取 消</Button>\n      </div>\n    </Modal>\n\n  </div>\n</template>\n\n<script>\n    import {getOperation, getItemList, addcdkey, getCDkeys, getUseUsers, exportExcel, deleteCDkey} from \"@/api/index\";\n    import util from \"../../../libs/util\";\n\n    export default {\n        name: 'cdkey',\n        mounted() {\n            this.getItemList();\n            this.getOperation();\n        },\n        data() {\n            return {\n                columnsWithOperation: [\n                    {type: \"index\", width: 60, align: \"center\"},\n                    {\n                        title: \"生成时间\", key: \"createTime\", width: 180, align: \"center\", render: (h, params) => {\n                            return h(\"div\", util.Time2DefaultFormat(params.row.createTime))\n                        }\n                    },\n                    {\n                        title: \"开始时间\", key: \"startTime\", width: 180, align: \"center\", render: (h, params) => {\n                            return h(\"div\", util.Time2DefaultFormat(params.row.startTime))\n                        }\n                    },\n                    {\n                        title: \"结束时间\", key: \"endTime\", width: 180, align: \"center\", render: (h, params) => {\n                            return h(\"div\", util.Time2DefaultFormat(params.row.endTime))\n                        }\n                    },\n                    {\n                        title: \"道具内容\", key: \"rewards\", width: 200, align: \"center\", render: (h, params) => {\n                            return h(\"div\", this.formatReward(params.row.rewards))\n                        }\n                    },\n                    {title: \"生成数量\", key: \"createNum\", width: 120, align: \"center\",render: (h, params) => {\n                            let discardNum = \"\";\n                            if (params.row.discardNum && params.row.discardNum>0){\n                                discardNum = `(-${params.row.discardNum})`\n                            }\n                            return h(\"div\", params.row.createNum + discardNum)\n                        }},\n                    {title: \"可使用次数\", key: \"totalNum\", width: 120, align: \"center\"},\n                    {title: \"渠道\", key: \"channel\", width: 120, align: \"center\"},\n                    {\n                        title: \"操作\", key: \"action\", width: 100, align: \"center\", render: (h, params) => {\n                            return h(\"div\", [h(\"Button\", {\n                                props: {type: \"primary\", size: \"small\"}, on: {\n                                    click: () => {\n                                        this.openCDkeyDialog(params.row);\n                                    }\n                                }\n                            }, \"查看\")]);\n                        }\n                    }],\n                columnsWithRewards: [\n                    {type: \"index\", width: 60, align: \"center\"},\n                    {title: \"道具ID\", key: \"id\", width: 120, align: \"center\"},\n                    {\n                        title: \"道具名称\", key: \"id\", width: 120, align: \"center\", render: (h, params) => {\n                            return h(\"div\", this.formatItem(params.row.id))\n                        }\n                    },\n                    {title: \"道具数量\", key: \"num\", width: 120, align: \"center\"},\n                    {\n                        title: \"操作\", key: \"action\", width: 100, align: \"center\", render: (h, params) => {\n                            return h(\"div\", [h(\"Button\", {\n                                props: {type: \"error\", size: \"small\"}, on: {\n                                    click: () => {\n                                        this.delReward(params.index);\n                                    }\n                                }\n                            }, \"删除\")]);\n                        }\n                    }\n                ],\n                columnsWithCDkey: [\n                    {type: \"index\", width: 60, align: \"center\"},\n                    {title: \"兑换码ID\", key: \"key\", width: 110, align: \"center\"},\n                    {\n                        title: \"领取状态\", key: \"useNum\", width: 120, align: \"center\", render: (h, params) => {\n                            return h(\"div\", params.row.useNum > 0 ? '已领取' : '未领取')\n                        }\n                    },\n                    {\n                        title: \"领取时间\", key: \"fistUseTime\", width: 120, align: \"center\", render: (h, params) => {\n                            return h(\"div\", params.row.fistUseTime ? util.Time2DefaultFormat(params.row.fistUseTime) : '未领取')\n                        }\n                    },\n                    {title: \"用户ID\", key: \"fistUsrUserId\", width: 120, align: \"center\"},\n                    {title: \"已使用次数\", key: \"useNum\", width: 110, align: \"center\"},\n                    {\n                        title: \"操作\", key: \"action\", width: 200, align: \"center\", render: (h, params) => {\n                            let deleteButton = ''\n                            if (this.$route.meta.permTypes.includes('delete')) {\n                                deleteButton = h(\"Button\", {\n                                    props: {type: \"error\", size: \"small\"}, on: {\n                                        click: () => {\n                                            this.deleteCDkey(params.row);\n                                        }\n                                    }\n                                }, \"删除\");\n                            }\n                            return h(\"div\", [\n                                h(\"Button\", {\n                                    props: {type: \"primary\", size: \"small\"}, on: {\n                                        click: () => {\n                                            this.openSeeUserDialog(params.row.key);\n                                        }\n                                    }\n                                }, \"使用详情\"),\n                                deleteButton\n                            ]);\n                        }\n                    }],\n                columnsWithUsers: [\n                    {type: \"index\", width: 60, align: \"center\"},\n                    {title: \"兑换码\", key: \"key\", width: 110, align: \"center\"},\n                    {title: \"用户ID\", key: \"userId\", width: 110, align: \"center\"},\n                    {\n                        title: \"领取时间\", key: \"useTime\", width: 110, align: \"center\", render: (h, params) => {\n                            return h(\"div\", util.Time2DefaultFormat(params.row.useTime))\n                        }\n                    },\n                ],\n                /** 添加礼包对话框显示 */\n                dialogFormVisible: false,\n                /** 礼包查看操作对话框显示 */\n                dialogSeeVisible: false,\n                /** 查看所有用户数据 */\n                dialogSeeUserVisible: false,\n                dialogExportExcelVisible: false,\n                downloadDataLimit: 50000,\n                formLabelWidth: '120px',\n                page: {\n                    operation: {\n                        per_page: 10,\n                        cur_page: 1,\n                        total: 0,\n                        channel: ''\n                    },\n                    cdkey: {\n                        pagesize: 10,\n                        currentpage: 1,\n                        total: 0,\n                        currentOperation: {}\n                    },\n                    user: {\n                        pagesize: 10,\n                        currentpage: 1,\n                        total: 0,\n                        key: ''\n                    }\n                },\n                /** 根据筛选条件后所有礼包数据 */\n                operations: [],\n                /** 查看礼包，当前礼包内的所有cdkey数据 */\n                cdkeys: [],\n                /** 查看cdkey下所有使用用户 */\n                users: [],\n                /** 提交到后端的添加数据 */\n                isDIY: false,\n                form: {\n                    diyCdk: '',\n                    formTime: [],\n                    rewards: [],\n                    createNum: '',\n                    totalNum: '',\n                    channel: ''\n                },\n                /** 道具下拉框，需要请求后端获取道具数据 */\n                itemType: 0,\n                itemList: [],\n                itemLists: [],\n                itemData: {\n                    itemList: {},\n                    decoShopList: {},\n                    staffList: {},\n                    goodList: {}\n                },\n                itemTypes: [{type: 0, label: '货币'}, {type: 1, label: '道具'}, {type: 2, label: '家具'}, {\n                    type: 3,\n                    label: '员工'\n                }, {type: 4, label: '货物'}],\n                addItemId: '',\n                addItemNum: '',\n                /** 时间选择禁止选择当天前的日期 */\n                expireTimeOption: {\n                    disabledDate(date) {\n                        return date.getTime() < new Date(new Date().toLocaleDateString()).getTime();\n                    }\n                }\n            }\n        },\n        methods: {\n            getItemList() {\n                getItemList().then(res => {\n                    if (res.status === 200) {\n                        this.itemData.decoShopList = res.data.decoShopList;\n                        this.itemData.itemList = res.data.itemList;\n                        this.itemData.staffList = res.data.staffList;\n                        this.itemData.goodList = res.data.goodList;\n\n                        /** 显示奖励时用 */\n                        this.itemLists = [{id: -1, name: '经验'}, {id: -2, name: '黄金'}, {id: -3, name: '钻石'}];\n                        res.data.decoShopList.forEach((obj) => {\n                            this.itemLists.push({id: obj.id, name: obj.name});\n                        });\n                        res.data.itemList.forEach((obj) => {\n                            this.itemLists.push({id: obj.id, name: obj.name});\n                        });\n                        res.data.staffList.forEach((obj) => {\n                            this.itemLists.push({id: obj.id, name: obj.name});\n                        });\n                        res.data.goodList.forEach((obj) => {\n                            this.itemLists.push({id: obj.id, name: obj.name});\n                        });\n                    }\n                });\n            },\n            changeItemType() {\n                this.itemList = [];\n                this.clearAddItem();\n                switch (this.itemType) {\n                    case 0:\n                        this.itemList.push({id: -1, name: '经验'});\n                        this.itemList.push({id: -2, name: '黄金'});\n                        this.itemList.push({id: -3, name: '钻石'});\n                        return;\n                    case 1:\n                        this.itemList = this.itemData.itemList;\n                        return;\n                    case 2:\n                        this.itemList = this.itemData.decoShopList;\n                        return;\n                    case 3:\n                        this.itemList = this.itemData.staffList;\n                        return;\n                    case 4:\n                        this.itemList = this.itemData.goodList;\n                }\n            },\n            queryOperation() {\n                this.page.operation.currentpage = 1;\n                this.getOperation();\n            },\n            getOperation() {\n                getOperation(this.page.operation).then(res => {\n                    if (res.status === 200) {\n                        this.operations = res.data.operations;\n                        this.page.operation.total = res.data.total;\n                    }\n                });\n            },\n            handleSizeChange(value) {\n                this.page.operation.per_page = value;\n                this.getOperation();\n            },\n            handleCurrentChange(value) {\n                this.page.operation.cur_page = value;\n                this.getOperation();\n            },\n            handleCDkeySizeChange(value) {\n                this.page.cdkey.pagesize = value;\n                this.getCDkey();\n            },\n            handleCDkeyCurrentChange(value) {\n                this.page.cdkey.currentpage = value;\n                this.getCDkey();\n            },\n            handleUserSizeChange(value) {\n                this.page.user.pagesize = value;\n                this.getUseUser();\n            },\n            handleUserCurrentChange(value) {\n                this.page.user.currentpage = value;\n                this.getUseUser();\n            },\n            openDialog() {\n                if (this.itemList.length <= 0) {\n                    this.getItemList();\n                }\n                this.itemType = 0;\n                this.changeItemType();\n                this.form = {\n                    diyCdk: '',\n                    rewards: [],\n                    createNum: '',\n                    totalUseNum: '',\n                    channel: '',\n                    rewardStr: ''\n                };\n                this.dialogFormVisible = true;\n                this.isDIY = false;\n            },\n            openDialogWithDIY() {\n                this.openDialog();\n                this.isDIY = true;\n            },\n            hideDialog() {\n                this.dialogFormVisible = false;\n            },\n            addcdkey() {\n                if (!this.form.formTime) {\n                    this.$Message.error('请选择时间');\n                    return;\n                }\n                if (!this.form.rewards || this.form.rewards.length === 0) {\n                    this.$Message.error('请添加道具');\n                    return;\n                }\n                if (!this.form.channel) {\n                    this.$Message.error('请输入渠道');\n                    return;\n                }\n                if (!this.form.createNum) {\n                    this.form.createNum = 1;\n                }\n                if (!this.form.totalNum) {\n                    this.form.totalNum = 1;\n                }\n                if (this.isDIY && !this.form.diyCdk) {\n                    this.$Message.error('请输入自定义兑换码');\n                    return;\n                }\n                this.form.formTime.forEach((item, index) => {\n                    this.form.formTime[index] = item.getTime();\n                });\n                this.form.rewards.forEach((item, index) => {\n                    this.form.rewards[index] = item.id + ',' + item.num;\n                })\n                this.form.rewardStr = this.form.rewards.join(';')\n                this.form.isDiy = this.isDIY;\n                this.hideDialog();\n                addcdkey(this.form).then(res => {\n                    if (res.status === 200) {\n                        if (res.data.error) {\n                            this.$Message.error(res.data.error);\n                            return\n                        }\n                        if (res.data.insertFail) {\n                            this.$Message.error('兑换码' + res.data.insertFail.slice(0, -1) + '已存在');\n                        }\n                        if (res.data.success > 0) {\n                            this.$Message.success('成功生成' + res.data.success + '条CDkey');\n                        }\n                        this.getOperation();\n                    }\n                });\n            },\n            addReward() {\n                if (!this.addItemNum || !this.addItemId || this.addItemNum <= 0) {\n                    this.$Message.error('请正确添加');\n                    return;\n                }\n                this.form.rewards.push({id: this.addItemId, num: this.addItemNum});\n\n                /** 合并相同id >> 暂时可以不用 */\n                let newArr = []\n                this.form.rewards.forEach(el => {\n                    const result = newArr.findIndex(ol => {\n                        return el.id === ol.id\n                    })\n                    if (result !== -1) {\n                        newArr[result].num = newArr[result].num + el.num\n                    } else {\n                        newArr.push(el)\n                    }\n                })\n                this.form.rewards = newArr;\n                // this.form.rewards.forEach(obj => {\n                //   const result = this.itemData.staffList.findIndex(ol => {\n                //     return obj.id === ol.id\n                //   })\n                //   if (result !== -1 && obj.num > 1) {\n                //     this.$message({\n                //       type: 'warning',\n                //       message: `员工${obj.id}的数量超过上限，已重置`\n                //     });\n                //     obj.num = 1;\n                //   }\n                // })\n                /** 合并相同id >> end */\n\n                this.clearAddItem();\n            },\n            clearAddItem() {\n                this.addItemId = '';\n                this.addItemNum = '';\n            },\n            clearRewards() {\n                this.form.rewards = [];\n            },\n            delReward(index) {\n                this.form.rewards.splice(index, 1);\n            },\n            openCDkeyDialog(scopeRow) {\n                this.page.cdkey.currentOperation = scopeRow;\n                this.page.cdkey.currentpage = 1;\n                this.getCDkey();\n                this.dialogSeeVisible = true;\n            },\n            getCDkey() {\n                getCDkeys({\n                    per_page: this.page.cdkey.pagesize,\n                    cur_page: this.page.cdkey.currentpage,\n                    operationId: this.page.cdkey.currentOperation.operationId\n                }).then(res => {\n                    if (res.status === 200) {\n                        this.page.cdkey.total = res.data.total;\n                        this.cdkeys = res.data.cdkeys;\n                    }\n                });\n            },\n            hideCDkeyDialog() {\n                this.dialogSeeVisible = false;\n                this.getOperation();\n            },\n            openSeeUserDialog(key) {\n                this.page.user.key = key;\n                this.page.user.currentpage = 1;\n                this.getUseUser();\n                this.dialogSeeUserVisible = true;\n            },\n            deleteCDkey(row) {\n                if (row.useNum > 0) {\n                    this.$Message.error('该条cdkey已被使用');\n                    return;\n                }\n                this.$Modal.confirm({\n                    title: \"确认删除\",\n                    content: \"您确认要删除 \" + row.key + \" ?\",\n                    loading: true,\n                    onOk: () => {\n                        deleteCDkey({key: row.key}).then(res => {\n                            this.$Modal.remove();\n                            if (res.status === 200) {\n                                if (res.data.error){\n                                    this.$Message.error(res.data.error);\n                                } else {\n                                    this.$Message.success('成功删除' + res.data.success + '条CDkey');\n                                }\n                                this.getCDkey();\n                            }\n                        })\n                    }\n                });\n            },\n            getUseUser() {\n                getUseUsers({\n                    per_page: this.page.user.pagesize,\n                    cur_page: this.page.user.currentpage,\n                    key: this.page.user.key\n                }).then(res => {\n                    if (res.status === 200) {\n                        this.page.user.total = res.data.total;\n                        this.users = res.data.users;\n                    }\n                });\n            },\n            exportExcel() {\n                if (this.page.cdkey.total > this.downloadDataLimit) {\n                    this.dialogExportExcelVisible = true;\n                    return;\n                }\n                this.getExportExcel(0, this.page.cdkey.total);\n            },\n            exportExcelInBatches(n) {\n                this.getExportExcel((n - 1) * this.downloadDataLimit, this.downloadDataLimit);\n            },\n            getExportExcel(startIndex, pageSize) {\n                exportExcel({\n                    operationId: this.page.cdkey.currentOperation.operationId,\n                    startIndex: startIndex,\n                    pageSize: pageSize\n                }).then(res => {\n                    let url = window.URL.createObjectURL(new Blob([res.data]))\n                    let link = document.createElement('a')\n                    link.style.display = 'none'\n                    link.href = url\n                    let fileName = res.headers['content-disposition'].split('filename=');\n                    fileName[1] = util.Time2DefaultFormat(new Date().getTime()) + \".xlsx\";\n                    link.setAttribute('download', fileName[1]);\n\n                    document.body.appendChild(link)\n                    link.click()\n                });\n            },\n            hideSeeUserDialog() {\n                this.dialogSeeUserVisible = false;\n            },\n            formatReward(rewardStr) {\n                let rowElement = rewardStr.split(';');\n                let array = [];\n                rowElement.forEach((obj) => {\n                    const result = this.itemLists.findIndex(ol => {\n                        return parseInt(obj.split(',')[0]) === ol.id\n                    })\n                    if (result !== -1) {\n                        array.push(this.itemLists[result].name + '*' + obj.split(',')[1]);\n                    } else {\n                        array.push(obj.split(',')[0] + '*' + obj.split(',')[1]);\n                    }\n                })\n                return array.join(', ');\n            },\n            formatItem(id) {\n                let name = '';\n                this.itemLists.forEach((o) => {\n                    if (o.id === id) {\n                        name = o.name;\n                    }\n                })\n                return name;\n            },\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n\n"],"sourceRoot":"src/views/game/cdkey"}]}