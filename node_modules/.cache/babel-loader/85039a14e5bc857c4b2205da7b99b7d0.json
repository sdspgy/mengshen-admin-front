{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/libs/axios.js","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/libs/axios.js","mtime":1576478141594},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from 'axios';\nimport { getStore, setStore } from './storage';\nimport { router } from '../router/index';\nimport { Message } from 'iview';\nimport Cookies from 'js-cookie';\n/** 统一请求路径前缀**/\n\nexport var basePath = '/baobao-admin'; // 超时设定\n\naxios.defaults.timeout = 15000;\naxios.interceptors.request.use(function (config) {\n  return config;\n}, function (err) {\n  Message.error('请求超时');\n  return Promise.resolve(err);\n}); // http response 拦截器\n\naxios.interceptors.response.use(function (response) {\n  if (response.data instanceof Blob) {\n    return response;\n  }\n\n  var data = response.data; // 根据返回的code值来做不同的处理(和后端约定)\n\n  switch (data.code) {\n    case 401:\n      // 未登录 清除已登录状态\n      Cookies.set('userInfo', '');\n      setStore('accessToken', '');\n      router.push('/login');\n      break;\n\n    case 403:\n      // 没有权限\n      if (data.message !== null) {\n        Message.error(data.message);\n      } else {\n        Message.error(\"未知错误\");\n      }\n\n      break;\n\n    case 500:\n      // 错误\n      if (data.message !== null) {\n        Message.error(data.message);\n      } else {\n        Message.error(\"未知错误\");\n      }\n\n      break;\n\n    case 505:\n      //未设置操作服务器\n      router.push('/baobao/sys/serverManage');\n      break;\n\n    default:\n      return data;\n  }\n\n  return data;\n}, function (err) {\n  // 返回状态码不为200时候的错误处理\n  Message.error(err.toString());\n  return Promise.resolve(err);\n});\nexport var getRequest = function getRequest(url, params) {\n  var accessToken = getStore('accessToken');\n  return axios({\n    method: 'get',\n    url: \"\".concat(basePath).concat(url),\n    params: params,\n    headers: {\n      'accessToken': accessToken\n    }\n  });\n};\nexport var postRequest = function postRequest(url, params) {\n  var accessToken = getStore(\"accessToken\");\n  return axios({\n    method: 'post',\n    url: \"\".concat(basePath).concat(url),\n    data: params,\n    transformRequest: [function (data) {\n      var ret = '';\n\n      for (var it in data) {\n        ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\n      }\n\n      return ret;\n    }],\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n      'accessToken': accessToken\n    }\n  });\n};\nexport var postReq = function postReq(url, params) {\n  var accessToken = getStore(\"accessToken\");\n  return axios({\n    method: 'get',\n    url: \"\".concat(basePath).concat(url),\n    data: params,\n    transformRequest: [function (data) {\n      var ret = '';\n\n      for (var it in data) {\n        ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\n      }\n\n      return ret;\n    }],\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n      'accessToken': accessToken\n    }\n  });\n};\nexport var putRequest = function putRequest(url, params) {\n  var accessToken = getStore(\"accessToken\");\n  return axios({\n    method: 'put',\n    url: \"\".concat(basePath).concat(url),\n    data: params,\n    transformRequest: [function (data) {\n      var ret = '';\n\n      for (var it in data) {\n        ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\n      }\n\n      return ret;\n    }],\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n      'accessToken': accessToken\n    }\n  });\n};\nexport var deleteRequest = function deleteRequest(url, params) {\n  var accessToken = getStore('accessToken');\n  return axios({\n    method: 'delete',\n    url: \"\".concat(basePath).concat(url),\n    params: params,\n    headers: {\n      'accessToken': accessToken\n    }\n  });\n};\nexport var uploadFileRequest = function uploadFileRequest(url, params) {\n  var accessToken = getStore('accessToken');\n  return axios({\n    method: 'post',\n    url: \"\".concat(basePath).concat(url),\n    params: params,\n    headers: {\n      'accessToken': accessToken\n    }\n  });\n};\n/** 游戏*/\n\nexport var getRequestWithGame = function getRequestWithGame(url, params) {\n  var accessToken = getStore('accessToken');\n  return axios({\n    method: 'get',\n    url: \"\".concat(basePath).concat(url),\n    params: params,\n    headers: {\n      'accessToken': accessToken\n    }\n  });\n};\nexport var postRequestWithGame = function postRequestWithGame(url, params) {\n  var accessToken = getStore(\"accessToken\");\n  return axios({\n    method: 'post',\n    url: \"\".concat(basePath).concat(url),\n    data: params,\n    transformRequest: [function (data) {\n      var ret = '';\n\n      for (var it in data) {\n        ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\n      }\n\n      return ret;\n    }],\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded',\n      'accessToken': accessToken\n    }\n  });\n};\nexport var postRequestWithJson = function postRequestWithJson(url, params) {\n  var accessToken = getStore(\"accessToken\");\n  return axios({\n    method: 'post',\n    url: \"\".concat(basePath).concat(url),\n    data: params,\n    transformRequest: [function (data, headers) {\n      if (headers['Content-type'] === 'multipart/form-data') {\n        return data;\n      } else {\n        return JSON.stringify(data);\n      }\n    }],\n    headers: {\n      'Content-Type': 'application/json;charset=UTF-8',\n      'accessToken': accessToken\n    }\n  });\n};\nexport var postRequestWithUpload = function postRequestWithUpload(url, params) {\n  var accessToken = getStore(\"accessToken\");\n  return axios({\n    method: 'post',\n    url: \"\".concat(basePath).concat(url),\n    data: params,\n    transformRequest: [function (data, headers) {\n      return data;\n    }],\n    headers: {\n      'Content-Type': 'multipart/form-data',\n      'accessToken': accessToken\n    }\n  });\n};\nexport var getRequestWithBlob = function getRequestWithBlob(url, params) {\n  var ret = '';\n\n  for (var it in params) {\n    ret += encodeURIComponent(it) + '=' + encodeURIComponent(params[it]) + '&';\n  }\n\n  var accessToken = getStore(\"accessToken\");\n  return axios({\n    method: 'get',\n    url: \"\".concat(basePath).concat(url, \"?\").concat(ret),\n    responseType: 'blob',\n    timeout: 500000,\n    headers: {\n      'accessToken': accessToken\n    }\n  });\n};\n/**\n * 小程序专属--------------------------------\n */\n\nexport var basePathMinipro = '/report-from';\nexport var getRequestMinipro = function getRequestMinipro(url, params) {\n  return axios({\n    method: 'get',\n    url: \"\".concat(basePathMinipro).concat(url),\n    params: params\n  });\n};\nexport var postRequestMinipro = function postRequestMinipro(url, params) {\n  return axios({\n    method: 'post',\n    url: \"\".concat(basePathMinipro).concat(url),\n    data: params,\n    transformRequest: [function (data) {\n      var ret = '';\n\n      for (var it in data) {\n        ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\n      }\n\n      return ret;\n    }],\n    headers: {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    }\n  });\n};\nexport var deleteRequestMiniprols = function deleteRequestMiniprols(url, params) {\n  return axios({\n    method: 'delete',\n    url: \"\".concat(basePathMinipro).concat(url),\n    params: params\n  });\n};",{"version":3,"sources":["/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/libs/axios.js"],"names":["axios","getStore","setStore","router","Message","Cookies","basePath","defaults","timeout","interceptors","request","use","config","err","error","Promise","resolve","response","data","Blob","code","set","push","message","toString","getRequest","url","params","accessToken","method","headers","postRequest","transformRequest","ret","it","encodeURIComponent","postReq","putRequest","deleteRequest","uploadFileRequest","getRequestWithGame","postRequestWithGame","postRequestWithJson","JSON","stringify","postRequestWithUpload","getRequestWithBlob","responseType","basePathMinipro","getRequestMinipro","postRequestMinipro","deleteRequestMiniprols"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,QAAR,EAAkBC,QAAlB,QAAiC,WAAjC;AACA,SAAQC,MAAR,QAAqB,iBAArB;AACA,SAAQC,OAAR,QAAsB,OAAtB;AACA,OAAOC,OAAP,MAAoB,WAApB;AAGA;;AACA,OAAO,IAAMC,QAAQ,GAAG,eAAjB,C,CAEP;;AACAN,KAAK,CAACO,QAAN,CAAeC,OAAf,GAAyB,KAAzB;AAEAR,KAAK,CAACS,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAAC,MAAM,EAAI;AACrC,SAAOA,MAAP;AACH,CAFD,EAEG,UAAAC,GAAG,EAAI;AACNT,EAAAA,OAAO,CAACU,KAAR,CAAc,MAAd;AACA,SAAOC,OAAO,CAACC,OAAR,CAAgBH,GAAhB,CAAP;AACH,CALD,E,CAOA;;AACAb,KAAK,CAACS,YAAN,CAAmBQ,QAAnB,CAA4BN,GAA5B,CAAgC,UAAAM,QAAQ,EAAI;AACxC,MAAIA,QAAQ,CAACC,IAAT,YAAyBC,IAA7B,EAAmC;AAC/B,WAAOF,QAAP;AACH;;AACD,MAAMC,IAAI,GAAGD,QAAQ,CAACC,IAAtB,CAJwC,CAKxC;;AACA,UAAQA,IAAI,CAACE,IAAb;AACI,SAAK,GAAL;AACI;AACAf,MAAAA,OAAO,CAACgB,GAAR,CAAY,UAAZ,EAAwB,EAAxB;AACAnB,MAAAA,QAAQ,CAAC,aAAD,EAAgB,EAAhB,CAAR;AACAC,MAAAA,MAAM,CAACmB,IAAP,CAAY,QAAZ;AACA;;AACJ,SAAK,GAAL;AACI;AACA,UAAIJ,IAAI,CAACK,OAAL,KAAiB,IAArB,EAA2B;AACvBnB,QAAAA,OAAO,CAACU,KAAR,CAAcI,IAAI,CAACK,OAAnB;AACH,OAFD,MAEO;AACHnB,QAAAA,OAAO,CAACU,KAAR,CAAc,MAAd;AACH;;AACD;;AACJ,SAAK,GAAL;AACI;AACA,UAAII,IAAI,CAACK,OAAL,KAAiB,IAArB,EAA2B;AACvBnB,QAAAA,OAAO,CAACU,KAAR,CAAcI,IAAI,CAACK,OAAnB;AACH,OAFD,MAEO;AACHnB,QAAAA,OAAO,CAACU,KAAR,CAAc,MAAd;AACH;;AACD;;AACJ,SAAK,GAAL;AACI;AACAX,MAAAA,MAAM,CAACmB,IAAP,CAAY,0BAAZ;AACA;;AACJ;AACI,aAAOJ,IAAP;AA5BR;;AA+BA,SAAOA,IAAP;AACH,CAtCD,EAsCG,UAACL,GAAD,EAAS;AACR;AACAT,EAAAA,OAAO,CAACU,KAAR,CAAcD,GAAG,CAACW,QAAJ,EAAd;AACA,SAAOT,OAAO,CAACC,OAAR,CAAgBH,GAAhB,CAAP;AACH,CA1CD;AA4CA,OAAO,IAAMY,UAAU,GAAG,SAAbA,UAAa,CAACC,GAAD,EAAMC,MAAN,EAAiB;AACvC,MAAIC,WAAW,GAAG3B,QAAQ,CAAC,aAAD,CAA1B;AACA,SAAOD,KAAK,CAAC;AACT6B,IAAAA,MAAM,EAAE,KADC;AAETH,IAAAA,GAAG,YAAKpB,QAAL,SAAgBoB,GAAhB,CAFM;AAGTC,IAAAA,MAAM,EAAEA,MAHC;AAITG,IAAAA,OAAO,EAAE;AACL,qBAAeF;AADV;AAJA,GAAD,CAAZ;AAQH,CAVM;AAYP,OAAO,IAAMG,WAAW,GAAG,SAAdA,WAAc,CAACL,GAAD,EAAMC,MAAN,EAAiB;AACxC,MAAIC,WAAW,GAAG3B,QAAQ,CAAC,aAAD,CAA1B;AACA,SAAOD,KAAK,CAAC;AACT6B,IAAAA,MAAM,EAAE,MADC;AAETH,IAAAA,GAAG,YAAKpB,QAAL,SAAgBoB,GAAhB,CAFM;AAGTR,IAAAA,IAAI,EAAES,MAHG;AAITK,IAAAA,gBAAgB,EAAE,CAAC,UAAUd,IAAV,EAAgB;AAC/B,UAAIe,GAAG,GAAG,EAAV;;AACA,WAAK,IAAIC,EAAT,IAAehB,IAAf,EAAqB;AACjBe,QAAAA,GAAG,IAAIE,kBAAkB,CAACD,EAAD,CAAlB,GAAyB,GAAzB,GAA+BC,kBAAkB,CAACjB,IAAI,CAACgB,EAAD,CAAL,CAAjD,GAA8D,GAArE;AACH;;AACD,aAAOD,GAAP;AACH,KANiB,CAJT;AAWTH,IAAAA,OAAO,EAAE;AACL,sBAAgB,mCADX;AAEL,qBAAeF;AAFV;AAXA,GAAD,CAAZ;AAgBH,CAlBM;AAoBP,OAAO,IAAMQ,OAAO,GAAG,SAAVA,OAAU,CAACV,GAAD,EAAMC,MAAN,EAAiB;AACpC,MAAIC,WAAW,GAAG3B,QAAQ,CAAC,aAAD,CAA1B;AACA,SAAOD,KAAK,CAAC;AACT6B,IAAAA,MAAM,EAAE,KADC;AAETH,IAAAA,GAAG,YAAKpB,QAAL,SAAgBoB,GAAhB,CAFM;AAGTR,IAAAA,IAAI,EAAES,MAHG;AAITK,IAAAA,gBAAgB,EAAE,CAAC,UAAUd,IAAV,EAAgB;AAC/B,UAAIe,GAAG,GAAG,EAAV;;AACA,WAAK,IAAIC,EAAT,IAAehB,IAAf,EAAqB;AACjBe,QAAAA,GAAG,IAAIE,kBAAkB,CAACD,EAAD,CAAlB,GAAyB,GAAzB,GAA+BC,kBAAkB,CAACjB,IAAI,CAACgB,EAAD,CAAL,CAAjD,GAA8D,GAArE;AACH;;AACD,aAAOD,GAAP;AACH,KANiB,CAJT;AAWTH,IAAAA,OAAO,EAAE;AACL,sBAAgB,mCADX;AAEL,qBAAeF;AAFV;AAXA,GAAD,CAAZ;AAgBH,CAlBM;AAqBP,OAAO,IAAMS,UAAU,GAAG,SAAbA,UAAa,CAACX,GAAD,EAAMC,MAAN,EAAiB;AACvC,MAAIC,WAAW,GAAG3B,QAAQ,CAAC,aAAD,CAA1B;AACA,SAAOD,KAAK,CAAC;AACT6B,IAAAA,MAAM,EAAE,KADC;AAETH,IAAAA,GAAG,YAAKpB,QAAL,SAAgBoB,GAAhB,CAFM;AAGTR,IAAAA,IAAI,EAAES,MAHG;AAITK,IAAAA,gBAAgB,EAAE,CAAC,UAAUd,IAAV,EAAgB;AAC/B,UAAIe,GAAG,GAAG,EAAV;;AACA,WAAK,IAAIC,EAAT,IAAehB,IAAf,EAAqB;AACjBe,QAAAA,GAAG,IAAIE,kBAAkB,CAACD,EAAD,CAAlB,GAAyB,GAAzB,GAA+BC,kBAAkB,CAACjB,IAAI,CAACgB,EAAD,CAAL,CAAjD,GAA8D,GAArE;AACH;;AACD,aAAOD,GAAP;AACH,KANiB,CAJT;AAWTH,IAAAA,OAAO,EAAE;AACL,sBAAgB,mCADX;AAEL,qBAAeF;AAFV;AAXA,GAAD,CAAZ;AAgBH,CAlBM;AAoBP,OAAO,IAAMU,aAAa,GAAG,SAAhBA,aAAgB,CAACZ,GAAD,EAAMC,MAAN,EAAiB;AAC1C,MAAIC,WAAW,GAAG3B,QAAQ,CAAC,aAAD,CAA1B;AACA,SAAOD,KAAK,CAAC;AACT6B,IAAAA,MAAM,EAAE,QADC;AAETH,IAAAA,GAAG,YAAKpB,QAAL,SAAgBoB,GAAhB,CAFM;AAGTC,IAAAA,MAAM,EAAEA,MAHC;AAITG,IAAAA,OAAO,EAAE;AACL,qBAAeF;AADV;AAJA,GAAD,CAAZ;AAQH,CAVM;AAYP,OAAO,IAAMW,iBAAiB,GAAG,SAApBA,iBAAoB,CAACb,GAAD,EAAMC,MAAN,EAAiB;AAC9C,MAAIC,WAAW,GAAG3B,QAAQ,CAAC,aAAD,CAA1B;AACA,SAAOD,KAAK,CAAC;AACT6B,IAAAA,MAAM,EAAE,MADC;AAETH,IAAAA,GAAG,YAAKpB,QAAL,SAAgBoB,GAAhB,CAFM;AAGTC,IAAAA,MAAM,EAAEA,MAHC;AAITG,IAAAA,OAAO,EAAE;AACL,qBAAeF;AADV;AAJA,GAAD,CAAZ;AAQH,CAVM;AAaP;;AACA,OAAO,IAAMY,kBAAkB,GAAG,SAArBA,kBAAqB,CAACd,GAAD,EAAMC,MAAN,EAAiB;AAC/C,MAAIC,WAAW,GAAG3B,QAAQ,CAAC,aAAD,CAA1B;AACA,SAAOD,KAAK,CAAC;AACT6B,IAAAA,MAAM,EAAE,KADC;AAETH,IAAAA,GAAG,YAAKpB,QAAL,SAAgBoB,GAAhB,CAFM;AAGTC,IAAAA,MAAM,EAAEA,MAHC;AAITG,IAAAA,OAAO,EAAE;AACL,qBAAeF;AADV;AAJA,GAAD,CAAZ;AAQH,CAVM;AAYP,OAAO,IAAMa,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACf,GAAD,EAAMC,MAAN,EAAiB;AAChD,MAAIC,WAAW,GAAG3B,QAAQ,CAAC,aAAD,CAA1B;AACA,SAAOD,KAAK,CAAC;AACT6B,IAAAA,MAAM,EAAE,MADC;AAETH,IAAAA,GAAG,YAAKpB,QAAL,SAAgBoB,GAAhB,CAFM;AAGTR,IAAAA,IAAI,EAAES,MAHG;AAITK,IAAAA,gBAAgB,EAAE,CAAC,UAAUd,IAAV,EAAgB;AAC/B,UAAIe,GAAG,GAAG,EAAV;;AACA,WAAK,IAAIC,EAAT,IAAehB,IAAf,EAAqB;AACjBe,QAAAA,GAAG,IAAIE,kBAAkB,CAACD,EAAD,CAAlB,GAAyB,GAAzB,GAA+BC,kBAAkB,CAACjB,IAAI,CAACgB,EAAD,CAAL,CAAjD,GAA8D,GAArE;AACH;;AACD,aAAOD,GAAP;AACH,KANiB,CAJT;AAWTH,IAAAA,OAAO,EAAE;AACL,sBAAgB,mCADX;AAEL,qBAAeF;AAFV;AAXA,GAAD,CAAZ;AAgBH,CAlBM;AAqBP,OAAO,IAAMc,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAChB,GAAD,EAAMC,MAAN,EAAiB;AAChD,MAAIC,WAAW,GAAG3B,QAAQ,CAAC,aAAD,CAA1B;AACA,SAAOD,KAAK,CAAC;AACT6B,IAAAA,MAAM,EAAE,MADC;AAETH,IAAAA,GAAG,YAAKpB,QAAL,SAAgBoB,GAAhB,CAFM;AAGTR,IAAAA,IAAI,EAAES,MAHG;AAITK,IAAAA,gBAAgB,EAAE,CAAC,UAAUd,IAAV,EAAgBY,OAAhB,EAAyB;AACxC,UAAIA,OAAO,CAAC,cAAD,CAAP,KAA4B,qBAAhC,EAAuD;AACnD,eAAOZ,IAAP;AACH,OAFD,MAEO;AACH,eAAOyB,IAAI,CAACC,SAAL,CAAe1B,IAAf,CAAP;AACH;AACJ,KANiB,CAJT;AAWTY,IAAAA,OAAO,EAAE;AACL,sBAAgB,gCADX;AAEL,qBAAeF;AAFV;AAXA,GAAD,CAAZ;AAgBH,CAlBM;AAoBP,OAAO,IAAMiB,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACnB,GAAD,EAAMC,MAAN,EAAiB;AAClD,MAAIC,WAAW,GAAG3B,QAAQ,CAAC,aAAD,CAA1B;AACA,SAAOD,KAAK,CAAC;AACT6B,IAAAA,MAAM,EAAE,MADC;AAETH,IAAAA,GAAG,YAAKpB,QAAL,SAAgBoB,GAAhB,CAFM;AAGTR,IAAAA,IAAI,EAAES,MAHG;AAITK,IAAAA,gBAAgB,EAAE,CAAC,UAAUd,IAAV,EAAgBY,OAAhB,EAAyB;AACxC,aAAOZ,IAAP;AACH,KAFiB,CAJT;AAOTY,IAAAA,OAAO,EAAE;AACL,sBAAgB,qBADX;AAEL,qBAAeF;AAFV;AAPA,GAAD,CAAZ;AAYH,CAdM;AAgBP,OAAO,IAAMkB,kBAAkB,GAAG,SAArBA,kBAAqB,CAACpB,GAAD,EAAMC,MAAN,EAAiB;AAC/C,MAAIM,GAAG,GAAG,EAAV;;AACA,OAAK,IAAIC,EAAT,IAAeP,MAAf,EAAuB;AACnBM,IAAAA,GAAG,IAAIE,kBAAkB,CAACD,EAAD,CAAlB,GAAyB,GAAzB,GAA+BC,kBAAkB,CAACR,MAAM,CAACO,EAAD,CAAP,CAAjD,GAAgE,GAAvE;AACH;;AACD,MAAIN,WAAW,GAAG3B,QAAQ,CAAC,aAAD,CAA1B;AACA,SAAOD,KAAK,CAAC;AACT6B,IAAAA,MAAM,EAAE,KADC;AAETH,IAAAA,GAAG,YAAKpB,QAAL,SAAgBoB,GAAhB,cAAuBO,GAAvB,CAFM;AAGTc,IAAAA,YAAY,EAAE,MAHL;AAITvC,IAAAA,OAAO,EAAE,MAJA;AAKTsB,IAAAA,OAAO,EAAE;AACL,qBAAeF;AADV;AALA,GAAD,CAAZ;AASH,CAfM;AAiBP;;;;AAIA,OAAO,IAAMoB,eAAe,GAAG,cAAxB;AAEP,OAAO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACvB,GAAD,EAAMC,MAAN,EAAiB;AAC9C,SAAO3B,KAAK,CAAC;AACT6B,IAAAA,MAAM,EAAE,KADC;AAETH,IAAAA,GAAG,YAAKsB,eAAL,SAAuBtB,GAAvB,CAFM;AAGTC,IAAAA,MAAM,EAAEA;AAHC,GAAD,CAAZ;AAKH,CANM;AAQP,OAAO,IAAMuB,kBAAkB,GAAG,SAArBA,kBAAqB,CAACxB,GAAD,EAAMC,MAAN,EAAiB;AAC/C,SAAO3B,KAAK,CAAC;AACT6B,IAAAA,MAAM,EAAE,MADC;AAETH,IAAAA,GAAG,YAAKsB,eAAL,SAAuBtB,GAAvB,CAFM;AAGTR,IAAAA,IAAI,EAAES,MAHG;AAITK,IAAAA,gBAAgB,EAAE,CAAC,UAAUd,IAAV,EAAgB;AAC/B,UAAIe,GAAG,GAAG,EAAV;;AACA,WAAK,IAAIC,EAAT,IAAehB,IAAf,EAAqB;AACjBe,QAAAA,GAAG,IAAIE,kBAAkB,CAACD,EAAD,CAAlB,GAAyB,GAAzB,GAA+BC,kBAAkB,CAACjB,IAAI,CAACgB,EAAD,CAAL,CAAjD,GAA8D,GAArE;AACH;;AACD,aAAOD,GAAP;AACH,KANiB,CAJT;AAWTH,IAAAA,OAAO,EAAE;AACL,sBAAgB;AADX;AAXA,GAAD,CAAZ;AAeH,CAhBM;AAkBP,OAAO,IAAMqB,sBAAsB,GAC7B,SADOA,sBACP,CAACzB,GAAD,EAAMC,MAAN,EAAiB;AACnB,SAAO3B,KAAK,CAAC;AACT6B,IAAAA,MAAM,EAAE,QADC;AAETH,IAAAA,GAAG,YAAKsB,eAAL,SAAuBtB,GAAvB,CAFM;AAGTC,IAAAA,MAAM,EAAEA;AAHC,GAAD,CAAZ;AAKH,CAPM","sourcesContent":["import axios from 'axios';\nimport {getStore, setStore} from './storage';\nimport {router} from '../router/index';\nimport {Message} from 'iview';\nimport Cookies from 'js-cookie';\n\n\n/** 统一请求路径前缀**/\nexport const basePath = '/baobao-admin';\n\n// 超时设定\naxios.defaults.timeout = 15000;\n\naxios.interceptors.request.use(config => {\n    return config;\n}, err => {\n    Message.error('请求超时');\n    return Promise.resolve(err);\n});\n\n// http response 拦截器\naxios.interceptors.response.use(response => {\n    if (response.data instanceof Blob) {\n        return response;\n    }\n    const data = response.data;\n    // 根据返回的code值来做不同的处理(和后端约定)\n    switch (data.code) {\n        case 401:\n            // 未登录 清除已登录状态\n            Cookies.set('userInfo', '');\n            setStore('accessToken', '');\n            router.push('/login');\n            break;\n        case 403:\n            // 没有权限\n            if (data.message !== null) {\n                Message.error(data.message);\n            } else {\n                Message.error(\"未知错误\");\n            }\n            break;\n        case 500:\n            // 错误\n            if (data.message !== null) {\n                Message.error(data.message);\n            } else {\n                Message.error(\"未知错误\");\n            }\n            break;\n        case 505:\n            //未设置操作服务器\n            router.push('/baobao/sys/serverManage');\n            break;\n        default:\n            return data;\n    }\n\n    return data;\n}, (err) => {\n    // 返回状态码不为200时候的错误处理\n    Message.error(err.toString());\n    return Promise.resolve(err);\n});\n\nexport const getRequest = (url, params) => {\n    let accessToken = getStore('accessToken');\n    return axios({\n        method: 'get',\n        url: `${basePath}${url}`,\n        params: params,\n        headers: {\n            'accessToken': accessToken\n        }\n    });\n};\n\nexport const postRequest = (url, params) => {\n    let accessToken = getStore(\"accessToken\");\n    return axios({\n        method: 'post',\n        url: `${basePath}${url}`,\n        data: params,\n        transformRequest: [function (data) {\n            let ret = '';\n            for (let it in data) {\n                ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\n            }\n            return ret;\n        }],\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            'accessToken': accessToken\n        }\n    });\n};\n\nexport const postReq = (url, params) => {\n    let accessToken = getStore(\"accessToken\");\n    return axios({\n        method: 'get',\n        url: `${basePath}${url}`,\n        data: params,\n        transformRequest: [function (data) {\n            let ret = '';\n            for (let it in data) {\n                ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\n            }\n            return ret;\n        }],\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            'accessToken': accessToken\n        }\n    });\n};\n\n\nexport const putRequest = (url, params) => {\n    let accessToken = getStore(\"accessToken\");\n    return axios({\n        method: 'put',\n        url: `${basePath}${url}`,\n        data: params,\n        transformRequest: [function (data) {\n            let ret = '';\n            for (let it in data) {\n                ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\n            }\n            return ret;\n        }],\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            'accessToken': accessToken\n        }\n    });\n};\n\nexport const deleteRequest = (url, params) => {\n    let accessToken = getStore('accessToken');\n    return axios({\n        method: 'delete',\n        url: `${basePath}${url}`,\n        params: params,\n        headers: {\n            'accessToken': accessToken\n        }\n    });\n};\n\nexport const uploadFileRequest = (url, params) => {\n    let accessToken = getStore('accessToken');\n    return axios({\n        method: 'post',\n        url: `${basePath}${url}`,\n        params: params,\n        headers: {\n            'accessToken': accessToken\n        }\n    });\n};\n\n\n/** 游戏*/\nexport const getRequestWithGame = (url, params) => {\n    let accessToken = getStore('accessToken');\n    return axios({\n        method: 'get',\n        url: `${basePath}${url}`,\n        params: params,\n        headers: {\n            'accessToken': accessToken\n        }\n    });\n};\n\nexport const postRequestWithGame = (url, params) => {\n    let accessToken = getStore(\"accessToken\");\n    return axios({\n        method: 'post',\n        url: `${basePath}${url}`,\n        data: params,\n        transformRequest: [function (data) {\n            let ret = '';\n            for (let it in data) {\n                ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\n            }\n            return ret;\n        }],\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            'accessToken': accessToken\n        }\n    });\n};\n\n\nexport const postRequestWithJson = (url, params) => {\n    let accessToken = getStore(\"accessToken\");\n    return axios({\n        method: 'post',\n        url: `${basePath}${url}`,\n        data: params,\n        transformRequest: [function (data, headers) {\n            if (headers['Content-type'] === 'multipart/form-data') {\n                return data;\n            } else {\n                return JSON.stringify(data);\n            }\n        }],\n        headers: {\n            'Content-Type': 'application/json;charset=UTF-8',\n            'accessToken': accessToken\n        }\n    });\n}\n\nexport const postRequestWithUpload = (url, params) => {\n    let accessToken = getStore(\"accessToken\");\n    return axios({\n        method: 'post',\n        url: `${basePath}${url}`,\n        data: params,\n        transformRequest: [function (data, headers) {\n            return data;\n        }],\n        headers: {\n            'Content-Type': 'multipart/form-data',\n            'accessToken': accessToken\n        }\n    });\n}\n\nexport const getRequestWithBlob = (url, params) => {\n    let ret = '';\n    for (let it in params) {\n        ret += encodeURIComponent(it) + '=' + encodeURIComponent(params[it]) + '&';\n    }\n    let accessToken = getStore(\"accessToken\");\n    return axios({\n        method: 'get',\n        url: `${basePath}${url}?${ret}`,\n        responseType: 'blob',\n        timeout: 500000,\n        headers: {\n            'accessToken': accessToken,\n        }\n    });\n}\n\n/**\n * 小程序专属--------------------------------\n */\n\nexport const basePathMinipro = '/report-from';\n\nexport const getRequestMinipro = (url, params) => {\n    return axios({\n        method: 'get',\n        url: `${basePathMinipro}${url}`,\n        params: params,\n    });\n}\n\nexport const postRequestMinipro = (url, params) => {\n    return axios({\n        method: 'post',\n        url: `${basePathMinipro}${url}`,\n        data: params,\n        transformRequest: [function (data) {\n            let ret = '';\n            for (let it in data) {\n                ret += encodeURIComponent(it) + '=' + encodeURIComponent(data[it]) + '&';\n            }\n            return ret;\n        }],\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n        }\n    });\n}\n\nexport const deleteRequestMiniprols\n    = (url, params) => {\n    return axios({\n        method: 'delete',\n        url: `${basePathMinipro}${url}`,\n        params: params,\n    });\n}\n\n\n"]}]}