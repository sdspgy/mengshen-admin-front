{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/send-mail/sendMail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/send-mail/sendMail.vue","mtime":1574132205000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {sendMail} from \"@/api/index\";\nexport default {\n    name: \"sendMail\",\n    data() {\n        return {\n            form: {\n                userId: '-1',\n                title: '',\n                content: '',\n                type: '1',\n                reward:'',\n            },\n            succ: [],\n            fail: [],\n            disabledInput: true\n        }\n    },\n    methods: {\n        disableUserId(label) {\n            if (label == 1) {\n                this.form.userId = '-1';\n                this.disabledInput = true;\n            } else {\n                this.form.userId = '';\n                this.disabledInput = false;\n            }\n        },\n        onSubmit() {\n            sendMail(this.form).then(res=>{\n                if (res.status === 200){\n                     console.log(res);\n                  \n                    var succCnt = 0;\n                    var failCnt = 0;\n                    if(res.data.succ){\n                        this.succ = res.data.succ;\n                        succCnt = this.succ.length;\n                    }\n\n                    if(res.data.fail){\n                        this.fail = res.data.fail;\n                        failCnt = this.fail.length;\n                    }\n                    this.$Message.success('发送成功'+succCnt+\"个,失败了\"+failCnt+\"个！\");\n                }else if(res.status === -1){\n                    this.$Message.error(res.data);\n                }\n            });\n        }\n    }\n}\n",{"version":3,"sources":["sendMail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"sendMail.vue","sourceRoot":"src/views/game/send-mail","sourcesContent":["<template>\n  <div id=\"sendMail\">\n    <Form ref=\"form\" :model=\"form\" :label-width=\"80\">\n      <FormItem label=\"标题\">\n        <Input v-model=\"form.title\"></Input>\n      </FormItem>\n      <FormItem label=\"内容\">\n        <Input\n                type=\"textarea\"\n                autosize\n                placeholder=\"\"\n                v-model=\"form.content\">\n        </Input>\n      </FormItem>\n      <FormItem label=\"奖励\">\n        <Input v-model=\"form.reward\"></Input>\n      </FormItem>\n      <FormItem>\n        <RadioGroup v-model=\"form.type\" @on-change=\"disableUserId\">\n        <Radio label=\"1\" >全服</Radio>\n        <Radio label=\"2\" >指定玩家（useid集合）</Radio>\n        <Radio label=\"3\" >指定玩家(openid的集合)</Radio>\n        </RadioGroup>\n      </FormItem>\n      <FormItem label=\"玩家ID\">\n        <Input v-model=\"form.userId\" :disabled=\"disabledInput\"/>\n      </FormItem>\n      <FormItem>\n        <Button type=\"primary\" @click=\"onSubmit\">发送邮件</Button>\n      </FormItem>\n    </Form>\n    <h2 v-show=\"succ.length>0\">发送成功的玩家信息</h2>\n    <ul class=\"file-list\" v-for=\"(item,index) in succ\" :key=\"index\">\n      <li><span style=\"font-size:15px;\">{{ item }}</span></li>\n    </ul>\n    <h2 v-show=\"fail.length>0\">发送失败的玩家信息</h2>\n    <ul class=\"file-list\" v-for=\"(item,index) in fail\" :key=\"index\">\n      <li><span style=\"font-size:15px;\">{{ item }}</span></li>\n    </ul>\n  </div>\n\n</template>\n\n<script>\n    import {sendMail} from \"@/api/index\";\n    export default {\n        name: \"sendMail\",\n        data() {\n            return {\n                form: {\n                    userId: '-1',\n                    title: '',\n                    content: '',\n                    type: '1',\n                    reward:'',\n                },\n                succ: [],\n                fail: [],\n                disabledInput: true\n            }\n        },\n        methods: {\n            disableUserId(label) {\n                if (label == 1) {\n                    this.form.userId = '-1';\n                    this.disabledInput = true;\n                } else {\n                    this.form.userId = '';\n                    this.disabledInput = false;\n                }\n            },\n            onSubmit() {\n                sendMail(this.form).then(res=>{\n                    if (res.status === 200){\n                         console.log(res);\n                      \n                        var succCnt = 0;\n                        var failCnt = 0;\n                        if(res.data.succ){\n                            this.succ = res.data.succ;\n                            succCnt = this.succ.length;\n                        }\n\n                        if(res.data.fail){\n                            this.fail = res.data.fail;\n                            failCnt = this.fail.length;\n                        }\n                        this.$Message.success('发送成功'+succCnt+\"个,失败了\"+failCnt+\"个！\");\n                    }else if(res.status === -1){\n                        this.$Message.error(res.data);\n                    }\n                });\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}