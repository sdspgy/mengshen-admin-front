{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/sys/server-manage/serverManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/sys/server-manage/serverManage.vue","mtime":1574132205000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {getServerByPage,addServer,updateServer,disableServer,enableServer,setDefaultServer,getDefaultServer,getServerListByParentId} from \"@/api/index\";\nexport default {\n    name: \"serverManage\",\n    data(){\n        return{\n            currServer: \"\",\n            loading: true,\n            selectList: [],\n            selectCount: 0,\n            dialogFormVisible: false,\n            viewDialogFormVisible: false,\n            dialogFormTitle: '',\n            isEdit: false,\n            columns: [\n                {\n                    type: \"selection\",\n                    width: 60,\n                    align: \"center\"\n                },\n                {\n                    type: \"index\",\n                    width: 60,\n                    align: \"center\"\n                },\n                {\n                    title: \"服务器名称\",\n                    key: \"name\",\n                    align: \"center\",\n                    width: 150,\n                    sortable: true\n                },\n                {\n                    title: \"服务器地址\",\n                    key: \"address\",\n                    align: \"center\",\n                    width: 150,\n                    sortable: true\n                },\n                {\n                    title: \"端口\",\n                    key: \"port\",\n                    align: \"center\",\n                    width: 100,\n                },\n                {\n                    title: \"状态\",\n                    key: \"state\",\n                    align: \"center\",\n                    width: 100,\n                    sortable: true,\n                    render: (h, params) => {\n                        if (params.row.status == 0) {\n                            return h(\"div\", [h(\"Tag\", {props: {color: \"blue\"}}, \"正常\")]);\n                        } else if (params.row.status == -1) {\n                            return h(\"div\", [h(\"Tag\", {props: {color: \"red\"}}, \"弃用\")]);\n                        }\n                    }\n                },\n                {\n                    title: \"创建时间\",\n                    key: \"createTime\",\n                    align: \"center\",\n                    width: 180,\n                    sortable: true,\n                    sortType: \"desc\"\n                },\n                {\n                    title: \"更新时间\",\n                    key: \"updateTime\",\n                    align: \"center\",\n                    width: 180,\n                    sortable: true\n                },\n                {\n                    title: \"操作\",\n                    key: \"action\",\n                    align: \"center\",\n                    width: 300,\n                    render: (h, params) => {\n                        let enableOrDisable = \"\";\n                        let showButton = \"\";\n                        let editButton = h(\"Button\", {props: {type: \"primary\", size: \"small\",disabled:!this.$route.meta.permTypes.includes('edit')}, style: {marginRight: \"5px\"}, on: {click: () => {this.openEditDialog(params.row);}}}, \"编辑\");\n                        if (params.row.status == 0) {\n                            enableOrDisable = h(\"Button\", {props: {size: \"small\",disabled:!this.$route.meta.permTypes.includes('disable')}, style: {marginRight: \"5px\"}, on: {click: () => {this.disable(params.row);}}}, \"禁用\");\n                        } else {\n                            enableOrDisable = h(\"Button\", {props: {type: \"success\", size: \"small\",disabled:!this.$route.meta.permTypes.includes('enable')}, style: {marginRight: \"5px\"}, on: {click: () => {this.enable(params.row);}}}, \"启用\");\n                        };\n                        let setDefaultButton = \"\";\n                        if (params.row.parentId == \"0\") {\n                            showButton = h(\"Button\", {props: {type: \"info\", size: \"small\"}, style: {marginRight: \"5px\"}, on: {click: () => {this.openShowDialog(params.row);}}}, \"查看\");\n                            setDefaultButton = h(\"Button\", {props: {type: \"info\", size: \"small\",disabled:this.currServer.id == params.row.id}, style: {marginRight: \"5px\"}, on: {click: () => {this.setDefault(params.row);}}}, \"设为操作服\");\n                        }\n                        return h(\"div\", [showButton,editButton, enableOrDisable, setDefaultButton]);\n                    }\n                }\n            ],\n            data: [],\n            childrenData: [],\n            serverForm: {\n                name: \"\",\n                address: \"\",\n                port:\"\",\n                parentId: \"0\"\n            },\n            viewServer: {},\n            sortColumn: \"createTime\",\n            sortType: \"desc\",\n            pageNumber: 1,\n            pageSize: 10,\n            total: 0,\n        }\n    },\n    methods:{\n        init(){\n            this.getServerByPage();\n            this.getDefault();\n        },\n        getServerByPage(){\n            let params = {\n                pageNumber: this.pageNumber,\n                pageSize: this.pageSize,\n                sort: this.sortColumn,\n                order: this.sort,\n            };\n            this.loading = true;\n          getServerByPage(params).then(res=>{\n              this.loading = false;\n              if (res.success) {\n                  this.data = res.result.records;\n                  this.total = res.result.total\n                  if (res.result.content || res.result.totalElements){\n                      this.data =  res.result.content;\n                      this.total = res.result.totalElements;\n                  }\n              }\n          })\n        },\n        refresh(){\n            if (this.viewDialogFormVisible){\n                this.getServerListByParentId()\n            } else {\n                this.getServerByPage();\n            }\n        },\n        addServer(){\n            if (!this.checkFormData()) {\n                return;\n            }\n            addServer(this.serverForm).then(res=>{\n                if (res.success) {\n                    this.hideAddDialog();\n                    this.refresh();\n                }\n            })\n        },\n        editServer(){\n            if (!this.checkFormData()) {\n                return;\n            }\n            updateServer(this.serverForm).then(res=>{\n                if (res.success) {\n                    this.hideAddDialog();\n                    this.refresh();\n                }\n            })\n        },\n        checkFormData(){\n            if (!this.serverForm.name){\n                this.$Message.error(\"请输入服务器名称\");\n                return false;\n            }\n            if (!this.serverForm.address){\n                this.$Message.error(\"请输入服务器地址\");\n                return false;\n            }\n            if (!this.serverForm.port){\n                this.serverForm.port = 80;\n            }\n            return true;\n        },\n        clearSelectAll() {\n            this.$refs.table.selectAll(false);\n        },\n        changeSelect(e) {\n            this.selectList = e;\n            this.selectCount = e.length;\n        },\n        changePage(v) {\n            this.pageNumber = v;\n            this.getServerByPage();\n            this.clearSelectAll();\n        },\n        changePageSize(v) {\n            this.pageSize = v;\n            this.getServerByPage();\n        },\n        changeSort(e) {\n            this.sortColumn = e.key;\n            this.sortType = e.order;\n            if (e.order == \"normal\") {\n                this.sortType = \"\";\n            }\n            this.getServerByPage();\n        },\n        openAddDialog() {\n            this.dialogFormTitle = '添加服务器';\n            this.serverForm = {};\n            this.serverForm.parentId = \"0\";\n            this.isEdit = false;\n            this.dialogFormVisible = true;\n        },\n        hideAddDialog() {\n            this.dialogFormVisible = false;\n            this.refresh();\n        },\n        openAddDialogWithChildren() {\n            this.openAddDialog();\n            this.dialogFormTitle = '添加子服务器';\n            this.serverForm.parentId = this.viewServer.id;\n        },\n        hideViewDialog() {\n            this.viewDialogFormVisible = false;\n            this.getServerByPage();\n        },\n        openShowDialog(scopeRow){\n            this.viewServer = scopeRow;\n            this.getServerListByParentId();\n            this.viewDialogFormVisible = true;\n        },\n        getServerListByParentId(){\n            getServerListByParentId({parentId:this.viewServer.id}).then(res=>{\n                if (res.success) {\n                    this.childrenData = res.result;\n                }\n            })\n        },\n        openEditDialog(scopeRow) {\n            this.dialogFormTitle = '修改服务器';\n            this.isEdit = true;\n            this.serverForm = scopeRow;\n            this.dialogFormVisible = true;\n        },\n        enable(v) {\n            this.$Modal.confirm({\n                title: \"确认启用\",\n                content: \"您确认要启用服务器 \" + v.name + \" ?\",\n                loading: true,\n                onOk: () => {\n                    enableServer({id:v.id}).then(res => {\n                        this.$Modal.remove();\n                        if (res.success) {\n                            this.$Message.success(\"操作成功\");\n                            this.refresh();\n                        }\n                    });\n                }\n            });\n        },\n        disable(v) {\n            this.$Modal.confirm({\n                title: \"确认禁用\",\n                content: \"您确认要禁用服务器 \" + v.name + \" ?\",\n                loading: true,\n                onOk: () => {\n                    disableServer({id:v.id}).then(res => {\n                        this.$Modal.remove();\n                        if (res.success) {\n                            this.$Message.success(\"操作成功\");\n                            this.refresh();\n                        }\n                    });\n                }\n            });\n        },\n        setDefault(v) {\n            this.$Modal.confirm({\n                title: \"确认设置\",\n                content: \"您确认要 \" + v.name + \" 为默认操作服务器?\",\n                loading: true,\n                onOk: () => {\n                    setDefaultServer({id:v.id}).then(res => {\n                        this.$Modal.remove();\n                        if (res.success) {\n                            this.$Message.success(res.message);\n                        }else {\n                            this.$Message.error(res.message);\n                        }\n                        this.getDefault();\n                    });\n                }\n            });\n        },\n        getDefault(){\n            this.currServer = \"\";\n            getDefaultServer().then(res => {\n                if (res.success) {\n                    this.currServer = res.result;\n                }\n            })\n        }\n    },\n    mounted() {\n        this.init();\n    }\n}\n",{"version":3,"sources":["serverManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"serverManage.vue","sourceRoot":"src/views/sys/server-manage","sourcesContent":["<template>\n  <div class=\"search\">\n    <Row>\n      <Col>\n        <Card>\n          <Row>\n            <div v-if=\"currServer\">\n              <h2>当前操作主服务器</h2>\n              <h4>服务器名称:{{currServer.name}}</h4>\n              <h4>服务器地址:{{currServer.address}}</h4>\n              <h4>服务器端口:{{currServer.port}}</h4>\n            </div>\n            <div v-else>\n              <h2>还未选择操作主服务器</h2>\n            </div>\n            <hr><br>\n          </Row>\n          <Row>\n            <Modal :title=dialogFormTitle v-model=\"dialogFormVisible\" :mask-closable=\"false\" width=\"50%\">\n              <Form :model=\"serverForm\" :label-width=\"120\">\n\n                <FormItem label=\"服务器名称\">\n                  <Input v-model=\"serverForm.name\" autocomplete=\"off\" placeholder=\"请输入服务器名称\"/>\n                </FormItem>\n\n                <FormItem label=\"服务器地址\" >\n                  <Input v-model=\"serverForm.address\" autocomplete=\"off\" placeholder=\"请输入服务器地址ip或域名  例10.10.10.10 或 www.huai.com \"/>\n                </FormItem>\n\n                <FormItem label=\"端口\" >\n                  <Input v-model=\"serverForm.port\" autocomplete=\"off\" placeholder=\"请输入端口号，default_port:80\"/>\n                </FormItem>\n              </Form>\n              <div slot=\"footer\">\n                <Button @click=\"hideAddDialog()\">取 消</Button>\n                <Button type=\"primary\" @click=\"addServer()\" v-show=\"!isEdit\">添加</Button>\n                <Button type=\"primary\" @click=\"editServer()\" v-show=\"isEdit\">修改</Button>\n              </div>\n            </Modal>\n          </Row>\n          <Row>\n            <Modal title=\"查看服务器组\" v-model=\"viewDialogFormVisible\" :mask-closable=\"false\" width=\"1000px\">\n              <h2>当前服务器</h2>\n              <h4>服务器名称:{{viewServer.name}}</h4>\n              <h4>服务器地址:{{viewServer.address}}</h4>\n              <h4>服务器端口:{{viewServer.port}}</h4>\n              <h2>当前子服务器列表</h2>\n              <Button @click=\"openAddDialogWithChildren\" type=\"primary\" icon=\"md-add\">添加子服务器</Button>\n              <Table border :columns=\"columns\" :data=\"childrenData\" ref=\"table\" sortable=\"custom\"></Table>\n              <div slot=\"footer\">\n                <Button @click=\"hideViewDialog()\">取 消</Button>\n              </div>\n            </Modal>\n          </Row>\n          <Row class=\"operation\">\n            <Button @click=\"openAddDialog\" type=\"primary\" icon=\"md-add\" v-show=\"this.$route.meta.permTypes.includes('add')\">添加主服务器</Button>\n            <Button @click=\"getServerByPage\" v-show=\"this.$route.meta.permTypes.includes('view')\">刷新</Button>\n          </Row>\n          <Row>\n            <Alert show-icon>\n              已选择\n              <span class=\"select-count\">{{selectCount}}</span> 项\n              <a class=\"select-clear\" @click=\"clearSelectAll\">清空</a>\n            </Alert>\n          </Row>\n          <Row>\n            <h2>主服务器列表</h2>\n            <Table\n                    :loading=\"loading\"\n                    border\n                    :columns=\"columns\"\n                    :data=\"data\"\n                    ref=\"table\"\n                    sortable=\"custom\"\n                    @on-sort-change=\"changeSort\"\n                    @on-selection-change=\"changeSelect\"\n            ></Table>\n          </Row>\n          <Row type=\"flex\" justify=\"end\" class=\"page\">\n            <Page\n                    :current=\"pageNumber\"\n                    :total=\"total\"\n                    :page-size=\"pageSize\"\n                    @on-change=\"changePage\"\n                    @on-page-size-change=\"changePageSize\"\n                    :page-size-opts=\"[10,20,50]\"\n                    size=\"small\"\n                    show-total\n                    show-elevator\n                    show-sizer\n            ></Page>\n          </Row>\n        </Card>\n      </Col>\n    </Row>\n\n  </div>\n</template>\n\n<script>\n    import {getServerByPage,addServer,updateServer,disableServer,enableServer,setDefaultServer,getDefaultServer,getServerListByParentId} from \"@/api/index\";\n    export default {\n        name: \"serverManage\",\n        data(){\n            return{\n                currServer: \"\",\n                loading: true,\n                selectList: [],\n                selectCount: 0,\n                dialogFormVisible: false,\n                viewDialogFormVisible: false,\n                dialogFormTitle: '',\n                isEdit: false,\n                columns: [\n                    {\n                        type: \"selection\",\n                        width: 60,\n                        align: \"center\"\n                    },\n                    {\n                        type: \"index\",\n                        width: 60,\n                        align: \"center\"\n                    },\n                    {\n                        title: \"服务器名称\",\n                        key: \"name\",\n                        align: \"center\",\n                        width: 150,\n                        sortable: true\n                    },\n                    {\n                        title: \"服务器地址\",\n                        key: \"address\",\n                        align: \"center\",\n                        width: 150,\n                        sortable: true\n                    },\n                    {\n                        title: \"端口\",\n                        key: \"port\",\n                        align: \"center\",\n                        width: 100,\n                    },\n                    {\n                        title: \"状态\",\n                        key: \"state\",\n                        align: \"center\",\n                        width: 100,\n                        sortable: true,\n                        render: (h, params) => {\n                            if (params.row.status == 0) {\n                                return h(\"div\", [h(\"Tag\", {props: {color: \"blue\"}}, \"正常\")]);\n                            } else if (params.row.status == -1) {\n                                return h(\"div\", [h(\"Tag\", {props: {color: \"red\"}}, \"弃用\")]);\n                            }\n                        }\n                    },\n                    {\n                        title: \"创建时间\",\n                        key: \"createTime\",\n                        align: \"center\",\n                        width: 180,\n                        sortable: true,\n                        sortType: \"desc\"\n                    },\n                    {\n                        title: \"更新时间\",\n                        key: \"updateTime\",\n                        align: \"center\",\n                        width: 180,\n                        sortable: true\n                    },\n                    {\n                        title: \"操作\",\n                        key: \"action\",\n                        align: \"center\",\n                        width: 300,\n                        render: (h, params) => {\n                            let enableOrDisable = \"\";\n                            let showButton = \"\";\n                            let editButton = h(\"Button\", {props: {type: \"primary\", size: \"small\",disabled:!this.$route.meta.permTypes.includes('edit')}, style: {marginRight: \"5px\"}, on: {click: () => {this.openEditDialog(params.row);}}}, \"编辑\");\n                            if (params.row.status == 0) {\n                                enableOrDisable = h(\"Button\", {props: {size: \"small\",disabled:!this.$route.meta.permTypes.includes('disable')}, style: {marginRight: \"5px\"}, on: {click: () => {this.disable(params.row);}}}, \"禁用\");\n                            } else {\n                                enableOrDisable = h(\"Button\", {props: {type: \"success\", size: \"small\",disabled:!this.$route.meta.permTypes.includes('enable')}, style: {marginRight: \"5px\"}, on: {click: () => {this.enable(params.row);}}}, \"启用\");\n                            };\n                            let setDefaultButton = \"\";\n                            if (params.row.parentId == \"0\") {\n                                showButton = h(\"Button\", {props: {type: \"info\", size: \"small\"}, style: {marginRight: \"5px\"}, on: {click: () => {this.openShowDialog(params.row);}}}, \"查看\");\n                                setDefaultButton = h(\"Button\", {props: {type: \"info\", size: \"small\",disabled:this.currServer.id == params.row.id}, style: {marginRight: \"5px\"}, on: {click: () => {this.setDefault(params.row);}}}, \"设为操作服\");\n                            }\n                            return h(\"div\", [showButton,editButton, enableOrDisable, setDefaultButton]);\n                        }\n                    }\n                ],\n                data: [],\n                childrenData: [],\n                serverForm: {\n                    name: \"\",\n                    address: \"\",\n                    port:\"\",\n                    parentId: \"0\"\n                },\n                viewServer: {},\n                sortColumn: \"createTime\",\n                sortType: \"desc\",\n                pageNumber: 1,\n                pageSize: 10,\n                total: 0,\n            }\n        },\n        methods:{\n            init(){\n                this.getServerByPage();\n                this.getDefault();\n            },\n            getServerByPage(){\n                let params = {\n                    pageNumber: this.pageNumber,\n                    pageSize: this.pageSize,\n                    sort: this.sortColumn,\n                    order: this.sort,\n                };\n                this.loading = true;\n              getServerByPage(params).then(res=>{\n                  this.loading = false;\n                  if (res.success) {\n                      this.data = res.result.records;\n                      this.total = res.result.total\n                      if (res.result.content || res.result.totalElements){\n                          this.data =  res.result.content;\n                          this.total = res.result.totalElements;\n                      }\n                  }\n              })\n            },\n            refresh(){\n                if (this.viewDialogFormVisible){\n                    this.getServerListByParentId()\n                } else {\n                    this.getServerByPage();\n                }\n            },\n            addServer(){\n                if (!this.checkFormData()) {\n                    return;\n                }\n                addServer(this.serverForm).then(res=>{\n                    if (res.success) {\n                        this.hideAddDialog();\n                        this.refresh();\n                    }\n                })\n            },\n            editServer(){\n                if (!this.checkFormData()) {\n                    return;\n                }\n                updateServer(this.serverForm).then(res=>{\n                    if (res.success) {\n                        this.hideAddDialog();\n                        this.refresh();\n                    }\n                })\n            },\n            checkFormData(){\n                if (!this.serverForm.name){\n                    this.$Message.error(\"请输入服务器名称\");\n                    return false;\n                }\n                if (!this.serverForm.address){\n                    this.$Message.error(\"请输入服务器地址\");\n                    return false;\n                }\n                if (!this.serverForm.port){\n                    this.serverForm.port = 80;\n                }\n                return true;\n            },\n            clearSelectAll() {\n                this.$refs.table.selectAll(false);\n            },\n            changeSelect(e) {\n                this.selectList = e;\n                this.selectCount = e.length;\n            },\n            changePage(v) {\n                this.pageNumber = v;\n                this.getServerByPage();\n                this.clearSelectAll();\n            },\n            changePageSize(v) {\n                this.pageSize = v;\n                this.getServerByPage();\n            },\n            changeSort(e) {\n                this.sortColumn = e.key;\n                this.sortType = e.order;\n                if (e.order == \"normal\") {\n                    this.sortType = \"\";\n                }\n                this.getServerByPage();\n            },\n            openAddDialog() {\n                this.dialogFormTitle = '添加服务器';\n                this.serverForm = {};\n                this.serverForm.parentId = \"0\";\n                this.isEdit = false;\n                this.dialogFormVisible = true;\n            },\n            hideAddDialog() {\n                this.dialogFormVisible = false;\n                this.refresh();\n            },\n            openAddDialogWithChildren() {\n                this.openAddDialog();\n                this.dialogFormTitle = '添加子服务器';\n                this.serverForm.parentId = this.viewServer.id;\n            },\n            hideViewDialog() {\n                this.viewDialogFormVisible = false;\n                this.getServerByPage();\n            },\n            openShowDialog(scopeRow){\n                this.viewServer = scopeRow;\n                this.getServerListByParentId();\n                this.viewDialogFormVisible = true;\n            },\n            getServerListByParentId(){\n                getServerListByParentId({parentId:this.viewServer.id}).then(res=>{\n                    if (res.success) {\n                        this.childrenData = res.result;\n                    }\n                })\n            },\n            openEditDialog(scopeRow) {\n                this.dialogFormTitle = '修改服务器';\n                this.isEdit = true;\n                this.serverForm = scopeRow;\n                this.dialogFormVisible = true;\n            },\n            enable(v) {\n                this.$Modal.confirm({\n                    title: \"确认启用\",\n                    content: \"您确认要启用服务器 \" + v.name + \" ?\",\n                    loading: true,\n                    onOk: () => {\n                        enableServer({id:v.id}).then(res => {\n                            this.$Modal.remove();\n                            if (res.success) {\n                                this.$Message.success(\"操作成功\");\n                                this.refresh();\n                            }\n                        });\n                    }\n                });\n            },\n            disable(v) {\n                this.$Modal.confirm({\n                    title: \"确认禁用\",\n                    content: \"您确认要禁用服务器 \" + v.name + \" ?\",\n                    loading: true,\n                    onOk: () => {\n                        disableServer({id:v.id}).then(res => {\n                            this.$Modal.remove();\n                            if (res.success) {\n                                this.$Message.success(\"操作成功\");\n                                this.refresh();\n                            }\n                        });\n                    }\n                });\n            },\n            setDefault(v) {\n                this.$Modal.confirm({\n                    title: \"确认设置\",\n                    content: \"您确认要 \" + v.name + \" 为默认操作服务器?\",\n                    loading: true,\n                    onOk: () => {\n                        setDefaultServer({id:v.id}).then(res => {\n                            this.$Modal.remove();\n                            if (res.success) {\n                                this.$Message.success(res.message);\n                            }else {\n                                this.$Message.error(res.message);\n                            }\n                            this.getDefault();\n                        });\n                    }\n                });\n            },\n            getDefault(){\n                this.currServer = \"\";\n                getDefaultServer().then(res => {\n                    if (res.success) {\n                        this.currServer = res.result;\n                    }\n                })\n            }\n        },\n        mounted() {\n            this.init();\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}