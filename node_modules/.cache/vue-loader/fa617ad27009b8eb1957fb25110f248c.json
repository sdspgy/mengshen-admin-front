{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/upload-img/uploadImg.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/upload-img/uploadImg.vue","mtime":1574132205000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport uploadPicInput from \"../../my-components/rbac/upload-pic-input\";\nimport {getUploadImgConfig,uploadImg} from \"@/api/index\";\nexport default {\n    name: \"uploadImg\",\n    components: {\n        uploadPicInput\n    },\n    data() {\n        return {\n            fileList: [],\n            errorList: [],\n            succesList: [],\n            types:[],\n        }\n    },\n    methods: {\n        getUploadImgConfig(){\n            getUploadImgConfig().then(res=>{\n                this.types = [];\n                res.result.forEach(obj=>{\n                    this.types.push({type:obj.split(\",\")[0],name:obj.split(\",\")[1]})\n                })\n            })\n        },\n        handleUpload (file) {\n            this.fileList.push(file);\n            return false;\n        },\n        upload (type) {\n            console.log('>>>>', this.fileList)\n            if (this.fileList.length == 0) {\n                this.$Message.error('未选择文件！');\n                return;\n            }\n            let formData = new FormData();\n            for(var i=0; i< this.fileList.length; i++){\n                formData.append(\"file\",this.fileList[i]);\n            }\n            formData.append(\"type\",type);\n            uploadImg(formData).then(res=>{\n                debugger\n                if (res.code === 200) {\n                    this.fileList = [];\n                    this.$Message.info('上传成功');\n                    this.succesList = res.result.succ;\n                    this.errorList = res.result.error;\n                }\n            })\n        },\n        deleteFile(index) {\n            this.fileList.splice(index,1);\n        },\n    },\n    mounted() {\n        this.getUploadImgConfig();\n    }\n}\n",{"version":3,"sources":["uploadImg.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"uploadImg.vue","sourceRoot":"src/views/game/upload-img","sourcesContent":["<template>\n  <div>\n    <Upload\n            multiple\n            ref=\"upload\"\n            type=\"drag\"\n            accept=\".jpg, .jpeg, .png, .gif, .bmp\"\n            :max-size=\"5000\"\n            :before-upload=\"handleUpload\"\n            action=\"#\"\n    >\n      <div style=\"padding: 20px 0\">\n        <Icon type=\"ios-cloud-upload\" size=\"52\" style=\"color: #3399ff\"></Icon>\n        <p>点击或者拖拽到此次上传图片</p>\n      </div>\n    </Upload>\n    <div>\n      <ul class=\"file-list\" v-for=\"(file,index) in fileList\" :key=\"index\">\n        <li>文件名: <span style=\"font-size:15px;\">{{ file.name }} </span> <Button @click=\"deleteFile(index)\">删除</Button></li>\n      </ul>\n    </div>\n    <Row>\n      <Col v-for=\"(item, i) in types\" :key=\"i\" style=\"float: left;margin: 10px\">\n        <Button type=\"primary\"  @click=\"upload(item.type)\">上传{{item.name}}图片</Button>\n      </Col>\n    </Row>\n\n    <h2 v-show=\"succesList.length>0\">成功信息</h2>\n    <ul class=\"file-list\" v-for=\"(item,index) in succesList\" :key=\"index\">\n      <li><span style=\"font-size:15px;\">{{ item }}</span></li>\n    </ul>\n    <h2 v-show=\"errorList.length>0\">错误信息</h2>\n    <ul class=\"file-list\" v-for=\"(item,index) in errorList\" :key=\"index\">\n      <li><span style=\"font-size:15px;\">{{ item }}</span></li>\n    </ul>\n\n\n  </div>\n</template>\n\n<script>\n    import uploadPicInput from \"../../my-components/rbac/upload-pic-input\";\n    import {getUploadImgConfig,uploadImg} from \"@/api/index\";\n    export default {\n        name: \"uploadImg\",\n        components: {\n            uploadPicInput\n        },\n        data() {\n            return {\n                fileList: [],\n                errorList: [],\n                succesList: [],\n                types:[],\n            }\n        },\n        methods: {\n            getUploadImgConfig(){\n                getUploadImgConfig().then(res=>{\n                    this.types = [];\n                    res.result.forEach(obj=>{\n                        this.types.push({type:obj.split(\",\")[0],name:obj.split(\",\")[1]})\n                    })\n                })\n            },\n            handleUpload (file) {\n                this.fileList.push(file);\n                return false;\n            },\n            upload (type) {\n                console.log('>>>>', this.fileList)\n                if (this.fileList.length == 0) {\n                    this.$Message.error('未选择文件！');\n                    return;\n                }\n                let formData = new FormData();\n                for(var i=0; i< this.fileList.length; i++){\n                    formData.append(\"file\",this.fileList[i]);\n                }\n                formData.append(\"type\",type);\n                uploadImg(formData).then(res=>{\n                    debugger\n                    if (res.code === 200) {\n                        this.fileList = [];\n                        this.$Message.info('上传成功');\n                        this.succesList = res.result.succ;\n                        this.errorList = res.result.error;\n                    }\n                })\n            },\n            deleteFile(index) {\n                this.fileList.splice(index,1);\n            },\n        },\n        mounted() {\n            this.getUploadImgConfig();\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}