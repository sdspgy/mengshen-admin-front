{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/upload-img/uploadImg.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/upload-img/uploadImg.vue","mtime":1574132205000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport uploadPicInput from \"../../my-components/rbac/upload-pic-input\";\nimport {getUploadImgConfig,uploadImg} from \"@/api/index\";\nexport default {\n    name: \"uploadImg\",\n    components: {\n        uploadPicInput\n    },\n    data() {\n        return {\n            fileList: [],\n            errorList: [],\n            succesList: [],\n            types:[],\n        }\n    },\n    methods: {\n        getUploadImgConfig(){\n            getUploadImgConfig().then(res=>{\n                this.types = [];\n                res.result.forEach(obj=>{\n                    this.types.push({type:obj.split(\",\")[0],name:obj.split(\",\")[1]})\n                })\n            })\n        },\n        handleUpload (file) {\n            this.fileList.push(file);\n            return false;\n        },\n        upload (type) {\n            console.log('>>>>', this.fileList)\n            if (this.fileList.length == 0) {\n                this.$Message.error('未选择文件！');\n                return;\n            }\n            let formData = new FormData();\n            for(var i=0; i< this.fileList.length; i++){\n                formData.append(\"file\",this.fileList[i]);\n            }\n            formData.append(\"type\",type);\n            uploadImg(formData).then(res=>{\n                debugger\n                if (res.code === 200) {\n                    this.fileList = [];\n                    this.$Message.info('上传成功');\n                    this.succesList = res.result.succ;\n                    this.errorList = res.result.error;\n                }\n            })\n        },\n        deleteFile(index) {\n            this.fileList.splice(index,1);\n        },\n    },\n    mounted() {\n        this.getUploadImgConfig();\n    }\n}\n",null]}