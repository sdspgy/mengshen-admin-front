{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/feedback/feedback.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/feedback/feedback.vue","mtime":1574132205000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {delFeedbackBytime,getFeedback,getFeedbackEx,delFeedbackById} from \"@/api/index\";\nimport util from \"../../../libs/util\";\nexport default {\n    name: \"feedback\",\n    data() {\n        return {\n            columns: [\n                {type: \"index\", width: 60, align: \"center\"},\n                {title: \"openID\", key: \"name\", width: 80,align: \"center\"},\n                {title: \"用户ID\", key: \"userId\", width: 80,align: \"center\"},\n                {title: \"反馈时间\", key: \"subTime\", width: 110, align: \"center\",render: (h, params) => {return h(\"div\", util.Time2DefaultFormat(params.row.subTime))}},\n                {title: \"内容\", key: \"contentStr\", width: 200,align: \"center\"},\n                {title: \"操作\", key: \"action\", width: 100, align: \"center\",\n                    render: (h, params) => {\n                        return h(\"div\", [\n                            h(\"Button\", {props: {type: \"error\", size: \"small\"}, on: {click: () => {this.delFeedback(params.row.zid);}}}, \"删除\")]);\n                    }\n                }],\n            feedbacks: [],\n            loading: true,\n            pagesize: 10,\n            currentpage: 1,\n            total: 0,\n            form: {\n                zid: ''\n            },\n            dialogFormVisible: false,\n            formLabelWidth: '120px',\n            delBytime: {\n                delTime: new Date()\n            },\n            queryBytime: {\n                selectTime: [new Date(), new Date()]\n            }\n        }\n    },\n    methods: {\n        delFeedback(zid) {\n            delFeedbackById({zid:zid}).then(res=>{\n                if (res.status === 200) {\n                    this.currentpage = 1;\n                    this.feedbacks = res.data.feedbacks;\n                    this.total = res.data.total;\n                }\n            });\n        },\n        getFeedbackEx() {\n            getFeedbackEx().then(res =>{\n                let url = window.URL.createObjectURL(new Blob([res.data]))\n                let link = document.createElement('a')\n                link.style.display = 'none'\n                link.href = url\n                link.setAttribute('download', '反馈.xlsx');\n                document.body.appendChild(link)\n                link.click()\n            });\n        },\n\n        getFeedback() {\n            let timeStamp = [];\n            this.queryBytime.selectTime.forEach(o=>{\n                timeStamp.push(o.getTime());\n            })\n            getFeedback({per_page:this.pagesize,cur_page:this.currentpage,selectTime:timeStamp}).then(res=>{\n                if (res.status === 200) {\n                    this.feedbacks = res.data.feedbacks;\n                    this.total = res.data.total;\n                }\n            });\n        },\n        handleSizeChange(value) {\n            this.pagesize = value;\n            this.getFeedback();\n        },\n        handleCurrentChange(value) {\n            this.currentpage = value;\n            this.getFeedback();\n        },\n        delFeedbackBytime() {\n            delFeedbackBytime({time:util.Time2DefaultFormat(this.delBytime.delTime)}).then(res=>{\n                if (res.status === 200) {\n                    this.$Message.info(\"删除成功\");\n                    this.currentpage = 1;\n                    this.getFeedback();\n                }\n            });\n        }\n    },\n}\n",null]}