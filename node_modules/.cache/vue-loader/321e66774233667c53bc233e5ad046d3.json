{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/server/serverManager.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/server/serverManager.vue","mtime":1574132205000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {getStopServerInfo, updateStopServerNotice, changeServerState} from \"@/api/index\";\n\nexport default {\n    name: \"serverManager\",\n    data() {\n        return {\n            form: {\n                version: '',\n                appVersion: '',\n                whiteList: '',\n                maintenanceMsg: '',\n                title: '',\n            },\n            isOpenServer: true,\n        }\n    },\n    methods: {\n        init() {\n            getStopServerInfo().then(res => {\n                if (res.status === 200) {\n                    this.form = res.data.announce;\n                    this.isOpenServer = res.data.isOpenServer;\n                }\n            });\n        },\n        updateStopServerNotice() {\n            updateStopServerNotice(this.form).then(res => {\n                if (res.status === 200) {\n                    this.$Message.success('修改成功');\n                    this.form = res.data.announce;\n                }\n            })\n        },\n        changeServerState(isOpen) {\n            this.isOpenServer = isOpen;\n            changeServerState({isOpenServer: this.isOpenServer}).then(res => {\n                if (res.status === 200) {\n                    if (res.data.isOpenServer) {\n                        this.$Message.success('开服');\n                    }else {\n                        this.$Message.error('停服');\n                    }\n                    this.isOpenServer = res.data.isOpenServer;\n                }\n                this.init();\n            })\n        }\n    },\n    mounted() {\n        this.init();\n    }\n}\n",{"version":3,"sources":["serverManager.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"serverManager.vue","sourceRoot":"src/views/game/server","sourcesContent":["<template>\n  <div>\n    <Form :model=\"form\" :label-width=\"120\">\n      <FormItem label=\"服务端版本号\">\n        <Input v-model=\"form.version\" autocomplete=\"off\" placeholder=\"请输入服务端版本号\"/>\n      </FormItem>\n\n      <FormItem label=\"app版本号\">\n        <Input v-model=\"form.appVersion\" autocomplete=\"off\" placeholder=\"请输入app版本号\"/>\n      </FormItem>\n\n      <FormItem label=\"停服公告标题\">\n        <Input v-model=\"form.title\" autocomplete=\"off\" placeholder=\"请输入停服公告标题\"/>\n      </FormItem>\n\n      <FormItem label=\"停服公告\">\n        <Input v-model=\"form.maintenanceMsg\" autocomplete=\"off\" type=\"textarea\" placeholder=\"请输入公告内容\"\n               :autosize=\"{ minRows: 3, maxRows: 5}\"/>\n      </FormItem>\n\n      <FormItem label=\"白名单(openid半角逗号分隔)\">\n        <Input v-model=\"form.whiteList\" autocomplete=\"off\" placeholder=\"请输入停服后可进入游戏的白名单openid英文逗号分隔\"/>\n      </FormItem>\n    </Form>\n    <Button type=\"primary\" @click=\"updateStopServerNotice()\">更新停服公告</Button>\n    <br/><br/>\n    <div v-show=\"!isOpenServer\">\n      <h3 style=\"color: #ff0000\">当前处于停服状态</h3>\n      <Button type=\"primary\" @click=\"changeServerState(true)\">开服</Button>\n    </div>\n    <div v-show=\"isOpenServer\">\n      <h3 style=\"color: #1bd70b\">当前处于开服状态</h3>\n      <Button type=\"error\" @click=\"changeServerState(false)\">停服</Button>\n    </div>\n\n\n  </div>\n</template>\n\n<script>\n    import {getStopServerInfo, updateStopServerNotice, changeServerState} from \"@/api/index\";\n\n    export default {\n        name: \"serverManager\",\n        data() {\n            return {\n                form: {\n                    version: '',\n                    appVersion: '',\n                    whiteList: '',\n                    maintenanceMsg: '',\n                    title: '',\n                },\n                isOpenServer: true,\n            }\n        },\n        methods: {\n            init() {\n                getStopServerInfo().then(res => {\n                    if (res.status === 200) {\n                        this.form = res.data.announce;\n                        this.isOpenServer = res.data.isOpenServer;\n                    }\n                });\n            },\n            updateStopServerNotice() {\n                updateStopServerNotice(this.form).then(res => {\n                    if (res.status === 200) {\n                        this.$Message.success('修改成功');\n                        this.form = res.data.announce;\n                    }\n                })\n            },\n            changeServerState(isOpen) {\n                this.isOpenServer = isOpen;\n                changeServerState({isOpenServer: this.isOpenServer}).then(res => {\n                    if (res.status === 200) {\n                        if (res.data.isOpenServer) {\n                            this.$Message.success('开服');\n                        }else {\n                            this.$Message.error('停服');\n                        }\n                        this.isOpenServer = res.data.isOpenServer;\n                    }\n                    this.init();\n                })\n            }\n        },\n        mounted() {\n            this.init();\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>\n"]}]}