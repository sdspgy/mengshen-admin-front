{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/time-manager/timeManager.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/game/time-manager/timeManager.vue","mtime":1574132205000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n    getServerTime,\n    updateServerTime\n} from \"@/api/index\";\nimport util from \"../../../libs/util\";\n\nexport default {\n    name: \"timeManager\",\n    data() {\n        return {\n            timeVal: '',\n            nowTimes: [],\n            results:[],\n            nowTimeColumns: [\n                {type: \"index\", width: 60, align: \"center\"},\n                {title: \"服务器名称\", key: \"name\", align: \"center\", width: 150},\n                {title: \"服务器地址\", key: \"address\", align: \"center\", width: 150,},\n                {title: \"端口\", key: \"port\", align: \"center\", width: 100,},\n                {title: \"请求url\", key: \"requestUrl\", align: \"center\", width: 200,},\n                {title: \"请求状态\", key: \"success\", align: \"center\", width: 100,},\n                {title: \"时间 or 错误信息\", key: \"msg\", align: \"center\", width: 300,render: (h, params) => {\n                    let msgOrTime = params.row.msg;\n                        if (params.row.success) {\n                            msgOrTime = util.Time2DefaultFormat(JSON.parse(params.row.msg).data.now);\n                        }\n                        return h(\"div\", msgOrTime);\n                    }},\n            ],\n            resultColumns: [\n                {type: \"index\", width: 60, align: \"center\"},\n                {title: \"服务器名称\", key: \"name\", align: \"center\", width: 150},\n                {title: \"服务器地址\", key: \"address\", align: \"center\", width: 150,},\n                {title: \"端口\", key: \"port\", align: \"center\", width: 100,},\n                {title: \"请求url\", key: \"requestUrl\", align: \"center\", width: 200,},\n                {title: \"请求状态\", key: \"success\", align: \"center\", width: 100,},\n                {title: \"返回信息\", key: \"msg\", align: \"center\", width: 300,},\n            ],\n        };\n    },\n    methods: {\n        getServerTime() {\n            getServerTime().then(res => {\n                this.timeVal = new Date(JSON.parse(res.nowMaster).data.now);\n                this.nowTimes = res.nowChildrenTimes;\n                }\n            );\n        },\n        updateServerTime(reset){\n            updateServerTime({newTime:util.formatDate(new Date(this.timeVal),'yyyy-MM-dd HH:mm:ss'),reset:reset}).then(res =>{\n                this.results = [];\n                this.getServerTime();\n                this.$Message.success(\"操作成功\");\n                this.results = res.result;\n\n\n            });\n        }\n    },\n    mounted() {\n        this.getServerTime();\n    }\n}\n",null]}