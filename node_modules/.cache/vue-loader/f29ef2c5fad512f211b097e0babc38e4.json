{"remainingRequest":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/my-components/rbac/upload-pic-input.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/src/views/my-components/rbac/upload-pic-input.vue","mtime":1574132205000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hoolai/Documents/tyz/workspace-ws/baobao-admin-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.upload {\n  display: inline-block;\n  margin-left: 10px;\n}\n",{"version":3,"sources":["upload-pic-input.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiJA;AACA;AACA;AACA","file":"upload-pic-input.vue","sourceRoot":"src/views/my-components/rbac","sourcesContent":["<template>\n  <div style=\"display: flex;\">\n    <Upload\n            :action=\"uploadFileUrl\"\n            :headers=\"accessToken\"\n            :on-success=\"handleSuccess\"\n            :on-error=\"handleError\"\n            :format=\"['jpg','jpeg','png','gif','bmp']\"\n            accept=\".jpg, .jpeg, .png, .gif, .bmp\"\n            :max-size=\"5120\"\n            :on-format-error=\"handleFormatError\"\n            :on-exceeded-size=\"handleMaxSize\"\n            :before-upload=\"beforeUpload\"\n            :show-upload-list=\"false\"\n            ref=\"up\"\n            class=\"upload\">\n      <Button :loading=\"loading\" :size=\"size\" :disabled=\"disabled\" :icon=\"icon\">上传图片</Button>\n    </Upload>\n    <Poptip trigger=\"hover\" title=\"图片预览\" placement=\"right-start\" width=\"350\">\n      <Input\n        v-model=\"currentValue\"\n        @on-change=\"handleChange\"\n        :placeholder=\"placeholder\"\n        :size=\"size\"\n        :disabled=\"disabled\"\n        :readonly=\"readonly\"\n        :maxlength=\"maxlength\"\n        clearable\n      />\n      <div slot=\"content\">\n        <img :src=\"currentValue\" alt=\"无效的图片链接\" style=\"width: 100%;margin: auto;display: block;\">\n        <a @click=\"viewImage=true\" style=\"margin-top:5px;text-align:right;display:block\">查看大图</a>\n      </div>\n    </Poptip>\n\n\n    <Modal title=\"图片预览\" v-model=\"viewImage\" :styles=\"{top: '30px'}\" draggable>\n      <img :src=\"currentValue\" alt=\"无效的图片链接\" style=\"width: 100%;margin: 0 auto;display: block;\">\n      <div slot=\"footer\">\n        <Button @click=\"viewImage=false\">关闭</Button>\n      </div>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport { uploadFile } from \"@/api/index\";\nexport default {\n  name: \"uploadPicInput\",\n  props: {\n    value: String,\n    size: String,\n    placeholder: {\n      type: String,\n      default: \"可输入图片链接\"\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    readonly: {\n      type: Boolean,\n      default: false\n    },\n    maxlength: Number,\n    icon: {\n      type: String,\n      default: \"ios-cloud-upload-outline\"\n    }\n  },\n  data() {\n    return {\n      accessToken: {},\n      currentValue: this.value,\n      loading: false,\n      viewImage: false,\n      uploadFileUrl: uploadFile\n    };\n  },\n  methods: {\n    init() {\n      this.accessToken = {\n        accessToken: this.getStore(\"accessToken\")\n      };\n    },\n    handleFormatError(file) {\n      this.loading = false;\n      this.$Notice.warning({\n        title: \"不支持的文件格式\",\n        desc:\n          \"所选文件‘ \" +\n          file.name +\n          \" ’格式不正确, 请选择 .jpg .jpeg .png .gif .bmp格式文件\"\n      });\n    },\n    handleMaxSize(file) {\n      this.loading = false;\n      this.$Notice.warning({\n        title: \"文件大小过大\",\n        desc: \"所选文件‘ \" + file.name + \" ’大小过大, 不得超过 5M.\"\n      });\n    },\n    beforeUpload() {\n      this.loading = true;\n      return true;\n    },\n    handleSuccess(res, file) {\n      this.loading = false;\n      if (res.success) {\n        file.url = res.result;\n        this.currentValue = res.result;\n        this.$emit(\"input\", this.currentValue);\n        this.$emit(\"on-change\", this.currentValue);\n      } else {\n        this.$Message.error(res.message);\n      }\n    },\n    handleError(error, file, fileList) {\n      this.loading = false;\n      this.$Message.error(error.toString());\n    },\n    handleChange(v) {\n      this.$emit(\"input\", this.currentValue);\n      this.$emit(\"on-change\", this.currentValue);\n    },\n    setCurrentValue(value) {\n      if (value === this.currentValue) {\n        return;\n      }\n      this.currentValue = value;\n      this.$emit(\"on-change\", this.currentValue);\n    }\n  },\n  watch: {\n    value(val) {\n      this.setCurrentValue(val);\n    }\n  },\n  created() {\n    this.init();\n  }\n};\n</script>\n\n<style lang=\"less\">\n.upload {\n  display: inline-block;\n  margin-left: 10px;\n}\n</style>\n\n"]}]}