(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4de07ef0"],{"2aff":function(t,e,i){},d9db:function(t,e,i){"use strict";var s=i("2aff"),n=i.n(s);n.a},f791:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._l(t.uploadList,(function(e,s){return i("div",{key:s,staticClass:"upload-list"},["finished"==e.status?i("div",[i("img",{attrs:{src:e.url}}),i("div",{staticClass:"upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},on:{click:function(i){return t.handleView(e.url)}}}),i("Icon",{attrs:{type:"ios-trash-outline"},on:{click:function(i){return t.handleRemove(e)}}})],1)]):i("div",[e.showProgress?i("Progress",{attrs:{percent:e.percentage,"hide-info":""}}):t._e()],1)])})),i("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{multiple:t.multiple,"show-upload-list":!1,"on-success":t.handleSuccess,"on-error":t.handleError,format:["jpg","jpeg","png","gif"],"max-size":5120,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,type:"drag",action:t.uploadFileUrl,headers:t.accessToken}},[i("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[i("Icon",{attrs:{type:"md-camera",size:"20"}})],1)]),i("Modal",{attrs:{title:"图片预览",styles:{top:"30px"},draggable:""},model:{value:t.viewImage,callback:function(e){t.viewImage=e},expression:"viewImage"}},[i("img",{staticStyle:{width:"100%",margin:"0 auto",display:"block"},attrs:{src:t.imgUrl,alt:"无效的图片链接"}}),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:function(e){t.viewImage=!1}}},[t._v("关闭")])],1)])],2)},n=[],o=i("365c");function a(t){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}var l={name:"uploadPicThumb",props:{value:Object,multiple:{type:Boolean,default:!0},limit:{type:Number,default:10}},data:function(){return{accessToken:{},uploadFileUrl:o["Ub"],uploadList:[],viewImage:!1,imgUrl:""}},methods:{init:function(){this.accessToken={accessToken:this.getStore("accessToken")}},handleView:function(t){this.imgUrl=t,this.viewImage=!0},handleRemove:function(t){var e=this.uploadList;this.uploadList.splice(e.indexOf(t),1),this.returnValue()},handleSuccess:function(t,e){t.success?(e.url=t.result,!this.multiple&&this.uploadList.length>0&&this.uploadList.splice(0,1),this.uploadList.push(e),this.returnValue()):this.$Message.error(t.message)},handleError:function(t,e,i){this.$Message.error(t.toString())},handleFormatError:function(t){this.$Notice.warning({title:"不支持的文件格式",desc:"所选文件‘ "+t.name+" ’格式不正确, 请选择 .jpg .jpeg .png .gif图片格式文件"})},handleMaxSize:function(t){this.$Notice.warning({title:"文件大小过大",desc:"所选文件‘ "+t.name+" ’大小过大, 不得超过 5M."})},handleBeforeUpload:function(){return!(this.multiple&&this.uploadList.length>=this.limit)||(this.$Message.warning("最多只能上传"+this.limit+"张图片"),!1)},returnValue:function(){if(!this.uploadList||this.uploadList.length<1)this.multiple?this.$emit("on-change",[]):this.$emit("on-change","");else if(this.multiple){var t=[];this.uploadList.forEach((function(e){t.push(e.url)})),this.$emit("on-change",t)}else{var e=this.uploadList[0].url;this.$emit("on-change",e)}},setData:function(t){var e=this;if(this.multiple&&t.length>this.limit)this.$Message.warning("设置图片数据失败，最多只能设置"+this.limit+"张图片");else{if("string"==typeof t){this.uploadList=[];var i={url:t,status:"finished"};this.uploadList.push(i)}else"object"==a(t)&&(this.uploadList=[],t.forEach((function(t){var i={url:t,status:"finished"};e.uploadList.push(i)})));this.returnValue()}}},mounted:function(){this.init()}},r=l,u=(i("d9db"),i("2877")),c=Object(u["a"])(r,s,n,!1,null,null,null);e["default"]=c.exports}}]);