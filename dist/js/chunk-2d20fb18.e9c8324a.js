(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d20fb18"],{b55d:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Form",{ref:"searchForm",staticClass:"search-form",attrs:{model:e.searchForm,inline:"","label-width":70}},[i("Form-item",{attrs:{label:"游戏ID",prop:"gameid"}},[i("Select",{staticStyle:{width:"200px"},model:{value:e.searchForm.gameid,callback:function(t){e.$set(e.searchForm,"gameid",t)},expression:"searchForm.gameid"}},e._l(e.games,(function(t){return i("Option",{key:t.gameid,attrs:{value:t.gameid}},[e._v(e._s(t.name))])})),1)],1),i("Form-item",{attrs:{label:"渠道码",prop:"creativeid"}},[i("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:"请输入渠道码"},model:{value:e.searchForm.creativeid,callback:function(t){e.$set(e.searchForm,"creativeid",t)},expression:"searchForm.creativeid"}})],1)],1),i("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.handleSearch}},[e._v("搜索")]),i("Button",{directives:[{name:"show",rawName:"v-show",value:this.$route.meta.permTypes.includes("add"),expression:"this.$route.meta.permTypes.includes('add')"}],staticStyle:{margin:"10px 10px"},attrs:{type:"primary",icon:"md-add"},on:{click:e.add}},[e._v("添加渠道\n    ")]),i("Row",[i("Table",{ref:"table",attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data,sortable:"custom"}})],1),i("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[i("Page",{attrs:{current:e.searchForm.pageNumber,total:e.total,"page-size":e.searchForm.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1),i("Modal",{attrs:{title:e.modalTitle,"mask-closable":!1,width:500},model:{value:e.creativeModalVisible,callback:function(t){e.creativeModalVisible=t},expression:"creativeModalVisible"}},[i("Form",{ref:"creativeForm",attrs:{model:e.creativeForm,"label-width":80,rules:e.creativeFormValidate}},[i("FormItem",{attrs:{label:"游戏名称",prop:"gameid"}},[i("Select",{staticStyle:{width:"200px"},model:{value:e.creativeForm.gameid,callback:function(t){e.$set(e.creativeForm,"gameid",t)},expression:"creativeForm.gameid"}},e._l(e.games,(function(t){return i("Option",{key:t.gameid,attrs:{value:t.gameid}},[e._v(e._s(t.name))])})),1)],1),i("FormItem",{attrs:{label:"渠道码",prop:"creativeid",error:e.errorCreativeid}},[i("Input",{model:{value:e.creativeForm.creativeid,callback:function(t){e.$set(e.creativeForm,"creativeid",t)},expression:"creativeForm.creativeid"}})],1),i("FormItem",{attrs:{label:"渠道名称",prop:"creativeName",error:e.errorCreativeName}},[i("Input",{model:{value:e.creativeForm.creativeName,callback:function(t){e.$set(e.creativeForm,"creativeName",t)},expression:"creativeForm.creativeName"}})],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text"},on:{click:e.cancelCreative}},[e._v("取消")]),i("Button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.submitCreative}},[e._v("提交")])],1)],1)],1)},r=[],o=i("365c"),c={name:"gameCreative",comments:{},data:function(){var e=this;return{columns:[{type:"selection",width:60,align:"center",fixed:"left"},{type:"index",width:60,align:"center",fixed:"left"},{title:"游戏ID",key:"gameid",width:150},{title:"渠道码",key:"creativeid",width:150},{title:"渠道名称",key:"creativeName",width:150},{title:"操作",key:"action",width:200,align:"center",render:function(t,i){var a=t("Button",{props:{type:"primary",size:"small",disabled:!e.$route.meta.permTypes.includes("edit")},style:{marginRight:"5px"},on:{click:function(){e.edit(i.row)}}},"编辑"),r=t("Button",{props:{type:"error",size:"small",disabled:!e.$route.meta.permTypes.includes("delete")},on:{click:function(){e.remove(i.row)}}},"删除");return t("div",[a,r])}}],data:[],searchForm:{gameid:"",creativeid:"",pageNumber:1,pageSize:10},total:0,submitLoading:!1,creativeModalVisible:!1,creativeForm:{id:"",gameid:"",creativeid:"",creativeName:""},games:[]}},methods:{init:function(){this.queryAllCreative()},handleSearch:function(){this.queryAllCreative()},queryAllCreative:function(){var e=this;Object(o["Ab"])(this.searchForm).then((function(t){t.success&&(e.data=t.result[1].records,e.games=t.result[0].records,e.total=t.result.total)}))},changePage:function(e){this.searchForm.pageNumber=e,this.queryAllCreative(),this.clearSelectAll()},changePageSize:function(e){this.searchForm.pageSize=e,this.queryAllCreative()},clearSelectAll:function(){this.$refs.table.selectAll(!1)},submitAdvert:function(){var e=this;this.$refs.creativeForm.validate((function(t){if(t)if(0==e.modalType){if(delete e.creativeForm.id,""==e.creativeForm.creativeid||void 0==e.creativeForm.creativeid)return void(e.errorCreativeid="渠道码不能为空");if(""==e.creativeForm.creativeName||void 0==e.creativeForm.creativeName)return void(e.errorCreativeName="渠道名称不能为空");e.submitLoading=!0,Object(o["b"])({gameid:e.creativeForm.gameid,creativeid:e.creativeForm.creativeid,creativeName:e.creativeForm.creativeName}).then((function(t){e.submitLoading=!1,t.success&&(e.$Message.success("操作成功"),e.queryAllCreative(),e.creativeModalVisible=!1)}))}else e.submitLoading=!0,Object(o["E"])({id:e.creativeForm.id,gameid:e.creativeForm.gameid,creativeid:e.creativeForm.creativeid,creativeName:e.creativeForm.creativeName}).then((function(t){e.submitLoading=!1,t.success&&(e.$Message.success("操作成功"),e.queryAllCreative(),e.creativeModalVisible=!1)}))}))},cancelAdvert:function(){this.creativeModalVisible=!1},add:function(){this.modalType=0,this.modalTitle="添加渠道",this.$refs.creativeForm.resetFields(),this.creativeModalVisible=!0},edit:function(e){for(var t in this.modalType=1,this.modalTitle="编辑渠道",this.$refs.creativeForm.resetFields(),e)null==e[t]&&(e[t]="");var i=JSON.stringify(e),a=JSON.parse(i);this.creativeForm=a,this.creativeModalVisible=!0},remove:function(e){var t=this;this.$Modal.confirm({title:"确认删除",content:"您确认要删除渠道名为： "+e.creativeName+"?",loading:!0,onOk:function(){Object(o["s"])(e.id).then((function(e){t.$Modal.remove(),e.success&&(t.$Message.success("删除成功"),t.queryAllCreative())}))}})}},mounted:function(){this.init()}},s=c,l=i("2877"),n=Object(l["a"])(s,a,r,!1,null,null,null);t["default"]=n.exports}}]);